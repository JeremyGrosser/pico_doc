<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Discriminants</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.SmallBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-6-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-7-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>3.7 Discriminants</H1>
<div class="paranum"><a name="p1">1/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00326.TXT">AI95-00326-01</A></I>} 
[<A NAME="I2251"></A> <A NAME="I2252"></A><A NAME="I2253"></A>A composite 
type (other than an array or interface type) can have discriminants, 
which parameterize the type. A <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN> 
specifies the discriminants of a composite type. A discriminant of an 
object is a component of the object, and is either of a discrete type 
or an access type. An <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN> 
in the declaration of a view of a type specifies that the discriminants 
of the type are unknown for the given view; all subtypes of such a view 
are indefinite subtypes.]&nbsp;</div>
<div class="paranum"><a name="p1.a">1.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Term entry:&nbsp;</B><B>discriminant</B> 
&mdash; parameter for a composite type, which can control, for example, 
the bounds of a component that is an array<BR>
Note: A discriminant for a task type can be used to pass data to a task 
of the type upon its creation.</span></div>
<div class="paranum"><a name="p1.b">1.b/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
<A NAME="I2254"></A><A NAME="I2255"></A>A view of a type, and all subtypes 
of the view, have <I>unknown discriminants</I> when the number or names 
of the discriminants, if any, are unknown at the point of the type declaration 
for the view. A <SPAN Class="swiss"><A HREF="AA-3-7.html#S0059">discriminant_part</A></SPAN> 
of (&lt;&gt;) is used to indicate unknown discriminants.&nbsp;</div>

<H4 Class="centered">Language Design Principles</H4>
<div class="paranum"><a name="p1.c">1.c/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00402.TXT">AI95-00402-01</A></I>} 
When an access discriminant is initialized at the time of object creation 
with an allocator of an anonymous type, the allocated object and the 
object with the discriminant are tied together for their lifetime. They 
should be allocated out of the same storage pool, and then at the end 
of the lifetime of the enclosing object, finalized and reclaimed together. 
In this case, the allocated object is called a coextension (see <A HREF="AA-3-10-2.html">3.10.2</A>). 
</div>
<div class="paranum"><a name="p1.d">1.d/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The above principle when 
applied to a nonlimited type implies that such an object may be copied 
only to a shorter-lived object, because attempting to assign it to a 
longer-lived object would fail because the access discriminants would 
not match. In a copy, the lifetime connection between the enclosing object 
and the allocated object does not exist. The allocated object is tied 
in the above sense only to the original object. Other copies have only 
secondary references to it.</div>
<div class="paranum"><a name="p1.e">1.e/2</a></div>
<div class="Annotations">Note that when an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">allocator</A></SPAN> 
appears as a constraint on an access discriminant in a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
that is elaborated independently from object creation, no such connection 
exists. For example, if a named constrained subtype is declared via &quot;<B>subtype</B> 
Constr <B>is</B> Rec(Acc_Discrim =&gt; <B>new</B> T);&quot; or if such 
an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">allocator</A></SPAN> 
appears in the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
for a component, the allocator is evaluated when the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
is elaborated, and hence its lifetime is typically longer than the objects 
or components that will later be subject to the constraint. In these 
cases, the allocated object should not be reclaimed until the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
goes out of scope.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2</a></div>
<div class="Indented1"><SPAN Class="swiss">discriminant_part</SPAN><A NAME="I2256"></A><A NAME="S0059"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I2257"></A><SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN>&nbsp;|&nbsp;<A NAME="I2258"></A><SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN></div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Indented1"><SPAN Class="swiss">unknown_discriminant_part</SPAN><A NAME="I2259"></A><A NAME="S0060"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN>(&lt;&gt;)</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Indented1"><SPAN Class="swiss">known_discriminant_part</SPAN><A NAME="I2260"></A><A NAME="S0061"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;(<A NAME="I2261"></A><SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN>&nbsp;{;&nbsp;<A NAME="I2262"></A><SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN>})</div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00231.TXT">AI95-00231-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0398-1.TXT">AI12-0398-1</A></I>} 
<SPAN Class="swiss">discriminant_specification</SPAN><A NAME="I2263"></A><A NAME="S0062"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<A NAME="I2264"></A><SPAN Class="swiss"><A HREF="AA-3-3-1.html#S0033">defining_identifier_list</A></SPAN>&nbsp;:&nbsp;[<A NAME="I2265"></A><SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>]&nbsp;<A NAME="I2266"></A><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN>&nbsp;[:=&nbsp;<A NAME="I2267"></A><SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>]<span class="insert5"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<A NAME="I2268"></A><SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN>]&nbsp;</span><BR>
&nbsp;|&nbsp;<A NAME="I2269"></A><SPAN Class="swiss"><A HREF="AA-3-3-1.html#S0033">defining_identifier_list</A></SPAN>&nbsp;:&nbsp;<A NAME="I2270"></A><SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN>&nbsp;[:=&nbsp;<A NAME="I2271"></A><SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>]<span class="insert5"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<A NAME="I2272"></A><SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN>]&nbsp;</span></div>
<div class="paranum"><a name="p5.a">5.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0398-1.TXT">AI12-0398-1</A></I>} 
<span class="insert5">Only implementation-defined aspects are allowed 
on discriminants in Ada 2022. Implementers are cautioned that any aspect 
allowed on a discriminant will need conformance rules. If, for instance, 
an aspect changed the representation of a discriminant, rules would be 
needed to ensure that the representation is the same for all views of 
the type (partial and full).</span>&nbsp;</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Indented1"><SPAN Class="swiss">default_expression</SPAN><A NAME="I2273"></A><A NAME="S0063"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I2274"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN></div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p7">7</a></div>
<div class="Normal"><A NAME="I2275"></A>The expected type for the <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN> 
is that of the corresponding discriminant.&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p8">8/2</a></div>
<div class="Normal">{<I><A HREF="defect1.html#8652/0007">8652/0007</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00098.TXT">AI95-00098-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
A <SPAN Class="swiss"><A HREF="AA-3-7.html#S0059">discriminant_part</A></SPAN> 
is only permitted in a declaration for a composite type that is not an 
array or interface type [(this includes generic formal types)]. A type 
declared with a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN> 
is called a <I>discriminated</I> type,<A NAME="I2276"></A> as is a type 
that inherits (known) discriminants.&nbsp;</div>
<div class="paranum"><a name="p8.a">8.a</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>Discriminants on 
array types were considered, but were omitted to ease (existing) implementations. 
</div>
<div class="paranum"><a name="p8.b">8.b</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Note that the above definition 
for &ldquo;discriminated type&rdquo; does not include types declared 
with an <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN>. 
This seems consistent with Ada 83, where such types (in a generic formal 
part) would not be considered discriminated types. Furthermore, the full 
type for a type with unknown discriminants need not even be composite, 
much less have any discriminants.</div>
<div class="paranum"><a name="p8.b.1">8.b.1/1</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0007">8652/0007</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00098.TXT">AI95-00098-01</A></I>} 
On the other hand, <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN>s 
cannot be applied to type declarations that cannot have a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN>. 
There is no point in having unknown discriminants on a type that can 
never have discriminants (for instance, a formal modular type), even 
when these are allowed syntactically.&nbsp;</div>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00231.TXT">AI95-00231-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
The subtype of a discriminant may be defined by an optional <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN> 
and a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN>, 
in which case the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
shall denote a discrete or access subtype, or it may be defined by an 
<SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN>. 
<A NAME="I2277"></A>A discriminant that is defined by an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
is called an <I>access discriminant</I> and is of an anonymous access 
type.&nbsp;</div>
<div class="paranum"><a name="p9.a">9.a/2</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
</div>
<div class="paranum"><a name="p9.b">9.b</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>Note that discriminants of a 
named access type are not considered &ldquo;access discriminants&rdquo;. 
Similarly, &ldquo;access parameter&rdquo; only refers to a formal parameter 
defined by an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN>. 
</div>
<div class="paranum"><a name="p9.1">9.1/3</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00402.TXT">AI95-00402-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0214-1.TXT">AI05-0214-1</A></I>} 
<SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">Default_expression</A></SPAN>s 
shall be provided either for all or for none of the discriminants of 
a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN>. 
No <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>s 
are permitted in a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN> 
in a declaration of a nonlimited tagged type [or a generic formal type].</div>
<div class="paranum"><a name="p9.c">9.c/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>The all-or-none rule is related 
to the rule that a discriminant constraint shall specify values for all 
discriminants. One could imagine a different rule that allowed a constraint 
to specify only some of the discriminants, with the others provided by 
default. Having defaults for discriminants has a special significance 
&mdash; it allows objects of the type to be unconstrained, with the discriminants 
alterable as part of assigning to the object.</div>
<div class="paranum"><a name="p9.d">9.d/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0214-1.TXT">AI05-0214-1</A></I>} 
Defaults for discriminants of tagged types are disallowed so that every 
object of a nonlimited tagged type is constrained, either by an explicit 
constraint, or by its initial discriminant values. This substantially 
simplifies the semantic rules and the implementation of inherited dispatching 
operations. We don't need this rule for limited tagged types, as the 
discriminants of such objects cannot be changed after the object is created 
in any case &mdash; no full-object assignment is supported, and that 
is required to change discriminant values. For generic formal types, 
the restriction simplifies the type matching rules. If one simply wants 
a &quot;default&quot; value for the discriminants, a constrained subtype 
can be declared for future use.&nbsp;</div>
<div class="paranum"><a name="p10">10/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00402.TXT">AI95-00402-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0063-1.TXT">AI05-0063-1</A></I>} 
A <SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN> 
for an access discriminant may have a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
only in the declaration for an immutably limited type (see <A HREF="AA-7-5.html">7.5</A>). 
In addition to the places where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit.<A NAME="I2278"></A>&nbsp;</div>
<div class="paranum"><a name="p10.a">10.a/3</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>This rule implies that a 
type can have a default for an access discriminant if the type is limited, 
but not if the only reason it's limited is because of a limited component. 
Compare the definition of limited type and immutably limited type in 
<A HREF="AA-7-5.html">7.5</A>.&nbsp;</div>
<div class="paranum"><a name="p10.b">10.b/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>A (nonformal) limited private 
type can always have a default for an access discriminant, because having 
the default itself makes the type immutably limited. Such a private type 
must necessarily have a full type with the same access discriminant with 
a default, and thus the full type will always be immutably limited (if 
legal).&nbsp;</div>
<div class="paranum"><a name="p10.c">10.c/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
We considered the following rules for access discriminants:&nbsp;</div>
<div class="paranum"><a name="p10.d">10.d</a></div>
<div class="SmallBulleted">If a type has an access discriminant, this 
automatically makes it limited, just like having a limited component 
automatically makes a type limited. This was rejected because it decreases 
program readability, and because it seemed error prone (two bugs in a 
previous version of the RM9X were attributable to this rule).</div>
<div class="paranum"><a name="p10.e">10.e/2</a></div>
<div class="SmallBulleted">A type with an access discriminant shall be 
limited. This is equivalent to the rule we actually chose for Ada 95, 
except that it allows a type to have an access discriminant if it is 
limited just because of a limited component. For example, any record 
containing a task would be allowed to have an access discriminant, whereas 
the actual rule requires &ldquo;<B>limited</B> <B>record</B>&rdquo;. 
This rule was also rejected due to readability concerns, and because 
would interact badly with the rules for limited types that &ldquo;become 
nonlimited&rdquo;.</div>
<div class="paranum"><a name="p10.e.1">10.e.1/3</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0063-1.TXT">AI05-0063-1</A></I>} 
A type may have an access discriminant if it is an immutably limited 
type. This was the rule chosen for Ada 95.</div>
<div class="paranum"><a name="p10.f">10.f/2</a></div>
<div class="SmallBulleted">Any type may have an access discriminant. 
For nonlimited type, there is no special accessibility for access discriminants; 
they're the same as any other anonymous access component. For a limited 
type, they have the special accessibility of Ada 95. However, this doesn't 
work because a limited partial view can have a nonlimited full view -- 
giving the two views different accessibility.</div>
<div class="paranum"><a name="p10.f.1">10.f.1/3</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0063-1.TXT">AI05-0063-1</A></I>} 
Any type may have an access discriminant, as above. However, special 
accessibility rules only apply to types that are immutably limited (task, 
protected, and explicitly limited records). However, this breaks privacy; 
worse, Legality Rules depend on the definition of accessibility.</div>
<div class="paranum"><a name="p10.f.2">10.f.2/3</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0063-1.TXT">AI05-0063-1</A></I>} 
Any type may have an access discriminant, as above. Limited types have 
special accessibility, while nonlimited types have normal accessibility. 
However, a limited partial view with an access discriminant can only 
be completed by an immutably limited type. That prevents accessibility 
from changing. A runtime accessibility check is required on generic formal 
types with access discriminants. However, changing between limited and 
nonlimited types would have far-reaching consequences for access discriminants 
&mdash; which is uncomfortable.</div>
<div class="paranum"><a name="p10.g">10.g/2</a></div>
<div class="SmallBulleted">Any type may have an access discriminant. 
All types have special accessibility. This was considered early during 
the Ada 9X process, but was dropped for &ldquo;unpleasant complexities&rdquo;, 
which unfortunately aren't recorded. It does seem that an accessibility 
check would be needed on assignment of such a type, to avoid copying 
an object with a discriminant pointing to a local object into a more 
global object (and thus creating a dangling pointer).</div>
<div class="paranum"><a name="p10.h">10.h/2</a></div>
<div class="SmallBulleted">Any type may have an access discriminant, 
but access discriminants cannot have defaults. All types have special 
accessibility. This gets rid of the problems on assignment (you couldn't 
change such a discriminant), but it would be horribly incompatible with 
Ada 95.</div>
<div class="paranum"><a name="p10.h.1">10.h.1/3</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0063-1.TXT">AI05-0063-1</A></I>} 
Any type may have an access discriminant, but access discriminants may 
have defaults only if they are of an immutably limited type. This is 
the rule chosen for Ada 2005, as it is not incompatible, and it doesn't 
require weird accessibility checks.&nbsp;</div>
<div class="paranum"><a name="p11">11/2</a></div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00402.TXT">AI95-00402-01</A></I>} 
</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Normal" style="margin-bottom: 0.4em">For a type defined 
by a <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>, 
if a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN> 
is provided in its declaration, then:&nbsp;</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Bulleted">The parent subtype shall be constrained;</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Bulleted">If the parent type is not a tagged type, then each 
discriminant of the derived type shall be used in the constraint defining 
the parent subtype;</div>
<div class="paranum"><a name="p14.a">14.a</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>This ensures that 
the new discriminant can share storage with an existing discriminant.</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Bulleted">If a discriminant is used in the constraint defining 
the parent subtype, the subtype of the discriminant shall be statically 
compatible (see <A HREF="AA-4-9-1.html">4.9.1</A>) with the subtype of 
the corresponding parent discriminant.&nbsp;</div>
<div class="paranum"><a name="p15.a">15.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This ensures that on conversion 
(or extension via an extension aggregate) to a distantly related type, 
if the discriminants satisfy the target type's requirements they satisfy 
all the intermediate types' requirements as well.&nbsp;</div>
<div class="paranum"><a name="p15.b">15.b</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>There is no requirement 
that the new discriminant have the same (or any) <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
as the parent's discriminant.&nbsp;</div>
<div class="paranum"><a name="p16">16/3</a></div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0102-1.TXT">AI05-0102-1</A></I>} 
</div>
<div class="paranum"><a name="p16.a">16.a/3</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN></div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p17">17</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN> 
declares a discriminant; the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
denotes its subtype unless it is an access discriminant, in which case 
the discriminant's subtype is the anonymous access-to-variable subtype 
defined by the <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN>.</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Normal">[For a type defined by a <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>, 
each discriminant of the parent type is either inherited, constrained 
to equal some new discriminant of the derived type, or constrained to 
the value of an expression.] <A NAME="I2279"></A>When inherited or constrained 
to equal some new discriminant, the parent discriminant and the discriminant 
of the derived type are said to <I>correspond</I>. Two discriminants 
also correspond if there is some common discriminant to which they both 
correspond. A discriminant corresponds to itself as well. <A NAME="I2280"></A>If 
a discriminant of a parent type is constrained to a specific value by 
a <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>, 
then that discriminant is said to be <I>specified</I> by that <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>. 
</div>
<div class="paranum"><a name="p18.a">18.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The correspondence relationship 
is transitive, symmetric, and reflexive. That is, if A corresponds to 
B, and B corresponds to C, then A, B, and C each corresponds to A, B, 
and C in all combinations.</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="Normal"><A NAME="I2281"></A>A <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0029">constraint</A></SPAN> 
that appears within the definition of a discriminated type <I>depends 
on a discriminant</I> of the type if it names the discriminant as a bound 
or discriminant value. A <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
depends on a discriminant if its <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0029">constraint</A></SPAN> 
depends on the discriminant, or on a discriminant that corresponds to 
it.&nbsp;</div>
<div class="paranum"><a name="p19.a">19.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>A <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0029">constraint</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-9-1.html#S0248">task_body</A></SPAN> 
is not considered to <I>depend</I> on a discriminant of the task type, 
even if it names it. It is only the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0029">constraint</A></SPAN>s 
in the type definition itself that are considered dependents. Similarly 
for protected types.&nbsp;</div>
<div class="paranum"><a name="p20">20</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I2282"></A>A 
component <I>depends on a discriminant</I> if:&nbsp;</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Bulleted">Its <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
depends on the discriminant; or&nbsp;</div>
<div class="paranum"><a name="p21.a">21.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>A component does <I>not</I> 
depend on a discriminant just because its <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
refers to the discriminant.</div>
<div class="paranum"><a name="p22">22</a></div>
<div class="Bulleted">It is declared in a <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0071">variant_part</A></SPAN> 
that is governed by the discriminant; or</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="Bulleted">It is a component inherited as part of a <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>, 
and the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0029">constraint</A></SPAN> 
of the <I>parent_</I><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
depends on the discriminant; or&nbsp;</div>
<div class="paranum"><a name="p23.a">23.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>When the parent subtype depends 
on a discriminant, the parent part of the derived type is treated like 
a discriminant-dependent component.&nbsp;</div>
<div class="paranum"><a name="p23.b">23.b</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Because of this rule, we 
don't really need to worry about &ldquo;corresponding&rdquo; discriminants, 
since all the inherited components will be discriminant-dependent if 
there is a new <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN> 
whose discriminants are used to constrain the old discriminants.&nbsp;</div>
<div class="paranum"><a name="p24">24</a></div>
<div class="Bulleted">It is a subcomponent of a component that depends 
on the discriminant.&nbsp;</div>
<div class="paranum"><a name="p24.a">24.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>The concept of discriminant-dependent 
(sub)components is primarily used in various rules that disallow renaming 
or 'Access, or specify that certain discriminant-changing assignments 
are erroneous. The goal is to allow implementations to move around or 
change the size of discriminant-dependent subcomponents upon a discriminant-changing 
assignment to an enclosing object. The above definition specifies that 
all subcomponents of a discriminant-dependent component or parent part 
are themselves discriminant-dependent, even though their presence or 
size does not in fact depend on a discriminant. This is because it is 
likely that they will move in a discriminant-changing assignment if they 
are a component of one of several discriminant-dependent parts of the 
same record.&nbsp;</div>
<div class="paranum"><a name="p25">25</a></div>
<div class="Normal">Each value of a discriminated type includes a value 
for each component of the type that does not depend on a discriminant[; 
this includes the discriminants themselves]. The values of discriminants 
determine which other component values are present in the value of the 
discriminated type.&nbsp;</div>
<div class="paranum"><a name="p25.a">25.a</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>Which values are present 
might depend on discriminants of some ancestor type that are constrained 
in an intervening <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>. 
That's why we say &quot;values of discriminants&quot; instead of &quot;values 
of <I>the</I> discriminants&quot; &mdash; a subtle point.</div>
<div class="paranum"><a name="p26">26</a></div>
<div class="Normal"><A NAME="I2283"></A><A NAME="I2284"></A><A NAME="I2285"></A><A NAME="I2286"></A>A 
type declared with a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN> 
is said to have <I>known discriminants</I>; its first subtype is unconstrained. 
<A NAME="I2287"></A><A NAME="I2288"></A>A type declared with an <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN> 
is said to have <I>unknown discriminants</I>. A type declared without 
a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0059">discriminant_part</A></SPAN> 
has no discriminants, unless it is a derived type; if derived, such a 
type has the same sort of discriminants (known, unknown, or none) as 
its parent (or ancestor) type. A tagged class-wide type also has unknown 
discriminants. <A NAME="I2289"></A><A NAME="I2290"></A>[Any subtype of 
a type with unknown discriminants is an unconstrained and indefinite 
subtype (see <A HREF="AA-3-2.html">3.2</A> and <A HREF="AA-3-3.html">3.3</A>).] 
</div>
<div class="paranum"><a name="p26.a">26.a/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
An <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN> 
&ldquo;(&lt;&gt;)&rdquo; is only permitted in the declaration of a (generic 
or nongeneric) private type, private extension, incomplete type, or formal 
derived type. Hence, only such types, descendants thereof, and class-wide 
types can have unknown discriminants. An <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN> 
is used to indicate that the corresponding actual or full type might 
have discriminants without defaults, or be an unconstrained array subtype. 
Tagged class-wide types are also considered to have unknown discriminants 
because discriminants can be added by type extensions, so the total number 
of discriminants of any given value of a tagged class-wide type is not 
known at compile time.</div>
<div class="paranum"><a name="p26.b">26.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
A subtype with unknown discriminants is indefinite, and hence an object 
of such a subtype needs explicit initialization. A limited private type 
with unknown discriminants is &ldquo;extremely&rdquo; limited; objects 
of such a type  can be initialized only by subprograms (either procedures 
with a parameter of the type, or a function returning the type) declared 
in the package. Subprograms declared elsewhere can operate on and even 
return the type, but they can only initialize the object by calling (ultimately) 
a subprogram in the package declaring the type. Such a type is useful 
for keeping complete control over object creation within the package 
declaring the type.</div>
<div class="paranum"><a name="p26.c">26.c</a></div>
<div class="Annotations">A partial view of a type might have unknown 
discriminants, while the full view of the same type might have known, 
unknown, or no discriminants.&nbsp;</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p27">27/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
For an access discriminant, its <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
is elaborated when the value of the access discriminant is defined: by 
evaluation of its <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>, 
by elaboration of a <SPAN Class="swiss"><A HREF="AA-3-7-1.html#S0064">discriminant_constraint</A></SPAN>, 
or by an assignment that initializes the enclosing object. <A NAME="I2291"></A></div>
<div class="paranum"><a name="p27.a">27.a/2</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00231.TXT">AI95-00231-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
The conversion of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
defining the access discriminant to the anonymous access type raises 
Program_Error for an object created by an allocator of an access type 
T, if the initial value is an access parameter that designates a view 
whose accessibility level is deeper than that of T.&nbsp;</div>
<div class="paranum"><a name="p28">28</a></div>
<div class="Notes">NOTE 1&nbsp;&nbsp;&nbsp;If a discriminated type has 
<SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>s 
for its discriminants, then unconstrained variables of the type are permitted, 
and the values of the discriminants can be changed by an assignment to 
such a variable. If defaults are not provided for the discriminants, 
then all variables of the type are constrained, either by explicit constraint 
or by their initial value; the values of the discriminants of such a 
variable cannot be changed after initialization.&nbsp;</div>
<div class="paranum"><a name="p28.a">28.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>This connection between discriminant 
defaults and unconstrained variables can be a source of confusion. For 
Ada 95, we considered various ways to break the connection between defaults 
and unconstrainedness, but ultimately gave up for lack of a sufficiently 
simple and intuitive alternative.</div>
<div class="paranum"><a name="p28.b">28.b</a></div>
<div class="Annotations"><A NAME="I2292"></A>An unconstrained discriminated 
subtype with defaults is called a <I>mutable</I> subtype, and a variable 
of such a subtype is called a mutable variable, because the discriminants 
of such a variable can change. There are no mutable arrays (that is, 
the bounds of an array object can never change), because there is no 
way in the language to define default values for the bounds. Similarly, 
there are no mutable class-wide subtypes, because there is no way to 
define the default tag, and defaults for discriminants are not allowed 
in the tagged case. Mutable tags would also require a way for the maximum 
possible size of such a class-wide subtype to be known. (In some implementations, 
all mutable variables are allocated with the maximum possible size. This 
approach is appropriate for real-time applications where implicit use 
of the heap is inappropriate.)</div>
<div class="paranum"><a name="p29">29</a></div>
<div class="Notes">NOTE 2&nbsp;&nbsp;&nbsp;The <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
for a discriminant of a type is evaluated when an object of an unconstrained 
subtype of the type is created.</div>
<div class="paranum"><a name="p30">30</a></div>
<div class="Notes">NOTE 3&nbsp;&nbsp;&nbsp;Assignment to a discriminant 
of an object (after its initialization) is not allowed, since the name 
of a discriminant is a constant; neither <SPAN Class="swiss"><A HREF="AA-5-2.html#S0173">assignment_statement</A></SPAN>s 
nor assignments inherent in passing as an <B>in out</B> or <B>out</B> 
parameter are allowed. Note however that the value of a discriminant 
can be changed by assigning to the enclosing object, presuming it is 
an unconstrained variable.&nbsp;</div>
<div class="paranum"><a name="p30.a">30.a/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
An <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN> 
is permitted only in the declaration of a private type (including generic 
formal private), private extension, incomplete type, or generic formal 
derived type. These are the things that will have a corresponding completion 
or generic actual, which will either define the discriminants, or say 
there are none. The (&lt;&gt;) indicates that the actual/full subtype 
might be an indefinite subtype. An <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN> 
is not permitted in a normal untagged derived type declaration, because 
there is no separate full type declaration for such a type. Note that 
(&lt;&gt;) allows unconstrained array bounds; those are somewhat like 
undefaulted discriminants.</div>
<div class="paranum"><a name="p30.b">30.b</a></div>
<div class="Annotations">For a derived type, either the discriminants 
are inherited as is, or completely respecified in a new <SPAN Class="swiss"><A HREF="AA-3-7.html#S0059">discriminant_part</A></SPAN>. 
In this latter case, each discriminant of the parent type shall be constrained, 
either to a specific value, or to equal one of the new discriminants. 
Constraining a parent type's discriminant to equal one of the new discriminants 
is like a renaming of the discriminant, except that the subtype of the 
new discriminant can be more restrictive than that of the parent's one. 
In any case, the new discriminant can share storage with the parent's 
discriminant.&nbsp;</div>
<div class="paranum"><a name="p31">31</a></div>
<div class="Notes">NOTE 4&nbsp;&nbsp;&nbsp;A discriminant that is of 
a named access type is not called an access discriminant; that term is 
used only for discriminants defined by an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN>. 
</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p32">32</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of discriminated 
types:</I>&nbsp;</div>
<div class="paranum"><a name="p33">33</a></div>
<div class="Examples"><B>type</B>&nbsp;Buffer(Size&nbsp;:&nbsp;Buffer_Size&nbsp;:=&nbsp;100)&nbsp;&nbsp;<B>is</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-3-5-4.html">3.5.4</A></I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pos&nbsp;&nbsp;&nbsp;:&nbsp;Buffer_Size&nbsp;:=&nbsp;0;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Value&nbsp;:&nbsp;String(1&nbsp;..&nbsp;Size);<BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;</div>
<div class="paranum"><a name="p34">34</a></div>
<div class="Examples"><B>type</B>&nbsp;Matrix_Rec(Rows,&nbsp;Columns&nbsp;:&nbsp;Integer)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mat&nbsp;:&nbsp;Matrix(1&nbsp;..&nbsp;Rows,&nbsp;1&nbsp;..&nbsp;Columns);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-3-6.html">3.6</A></I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;</div>
<div class="paranum"><a name="p35">35</a></div>
<div class="Examples"><B>type</B>&nbsp;Square(Side&nbsp;:&nbsp;Integer)&nbsp;<B>is</B>&nbsp;<B>new</B><BR>
&nbsp;&nbsp;&nbsp;Matrix_Rec(Rows&nbsp;=&gt;&nbsp;Side,&nbsp;Columns&nbsp;=&gt;&nbsp;Side);</div>
<div class="paranum"><a name="p36">36</a></div>
<div class="Examples"><B>type</B>&nbsp;Double_Square(Number&nbsp;:&nbsp;Integer)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Left&nbsp;&nbsp;:&nbsp;Square(Number);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Right&nbsp;:&nbsp;Square(Number);<BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;</div>
<div class="paranum"><a name="p37">37/3</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<B>task&nbsp;type</B>&nbsp;Worker(Prio&nbsp;:&nbsp;System.Priority;&nbsp;Buf&nbsp;:&nbsp;<B>access</B>&nbsp;Buffer)<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Priority&nbsp;=&gt;&nbsp;Prio&nbsp;<B>is</B>&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-D-1.html">D.1</A></I></SPAN><BR>
&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;discriminants&nbsp;used&nbsp;to&nbsp;parameterize&nbsp;the&nbsp;task&nbsp;type&nbsp;(see&nbsp;<A HREF="AA-9-1.html">9.1</A>)</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>entry</B>&nbsp;Fill;<BR>
&nbsp;&nbsp;&nbsp;<B>entry</B>&nbsp;Drain;<BR>
<B>end</B>&nbsp;Worker;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum"><a name="p37.a">37.a</a></div>
<div class="Annotations"><A NAME="I2293"></A>The syntax for a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN> 
is modified to allow an <I>access discriminant</I>, with a type specified 
by an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
(see <A HREF="AA-3-10.html">3.10</A>).</div>
<div class="paranum"><a name="p37.b">37.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
Discriminants are allowed on all composite types other than array and 
interface types.</div>
<div class="paranum"><a name="p37.c">37.c</a></div>
<div class="Annotations">Discriminants may be of an access type.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<div class="paranum"><a name="p37.d">37.d</a></div>
<div class="Annotations"><SPAN Class="swiss"><A HREF="AA-3-7.html#S0059">Discriminant_part</A></SPAN>s 
are not elaborated, though an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
is elaborated when the discriminant is initialized.</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p37.e">37.e/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00402.TXT">AI95-00402-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
Access discriminants (anonymous access types used as a discriminant) 
can be used on any type allowing discriminants. Defaults aren't allowed 
on discriminants of nonlimited types, however, so that accessibility 
problems don't happen on assignment.</div>
<div class="paranum"><a name="p37.f">37.f/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00231.TXT">AI95-00231-01</A></I>} 
<SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN> 
can be used in the declaration of a discriminant.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p37.g">37.g/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0007">8652/0007</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00098.TXT">AI95-00098-01</A></I>} 
<B>Corrigendum:</B> The wording was clarified so that types that cannot 
have discriminants cannot have an <SPAN Class="swiss"><A HREF="AA-3-7.html#S0060">unknown_discriminant_part</A></SPAN>.</div>
<div class="paranum"><a name="p37.h">37.h/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
Added wording to prevent interfaces from having discriminants. We don't 
want interfaces to have any components.</div>
<div class="paranum"><a name="p37.i">37.i/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
Removed wording which implied or required an access discriminant to have 
an access-to-object type (anonymous access types can now be access-to-subprogram 
types as well).</div>
<div class="paranum"><a name="p37.j">37.j/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00326.TXT">AI95-00326-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0299-1.TXT">AI05-0299-1</A></I>} 
Fixed the wording of the introduction to this subclause to reflect that 
both incomplete and partial views can have unknown discriminants. That 
was always true, but for some reason this wording specified partial views.</div>
<div class="paranum"><a name="p37.k">37.k/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
Changed the wording to use the new term &ldquo;explicitly limited record&rdquo;, 
which makes the intent much clearer (and eliminates confusion with derived 
types that happen to contain the reserved word <B>limited</B>).&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2005</H4>
<div class="paranum"><a name="p37.l">37.l/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0063-1.TXT">AI05-0063-1</A></I>} 
<A NAME="I2294"></A><B>Correction:</B> Changed the rules for when access 
discriminants can have defaults to depend on the new definition for immutably 
limited types; this will help ensure that unusual corner cases are properly 
handled. Note that the Ada 2005 rule was unintentionally incompatible 
with the Ada 95 rule (as enforced by the ACATS); this change brings it 
back into alignment with actual practice. So there should be no practical 
incompatibility.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p37.m">37.m/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0214-1.TXT">AI05-0214-1</A></I>} 
<A NAME="I2295"></A>A limited tagged type may now have defaults for its 
discriminants.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p37.n">37.n/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0102-1.TXT">AI05-0102-1</A></I>} 
<B>Correction:</B> Moved implicit conversion Legality Rule to <A HREF="AA-8-6.html">8.6</A>. 
</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p37.o">37.o/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0398-1.TXT">AI12-0398-1</A></I>} 
<span class="insert5"><A NAME="I2296"></A>Discriminants now can have 
an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN>, 
allowing the specification of (implementation-defined) aspects for individual 
discriminants.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-6-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-7-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
