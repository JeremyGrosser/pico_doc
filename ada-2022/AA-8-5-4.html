<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Subprogram Renaming Declarations</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.AnnotationsWideAbove {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left:  10.2em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-5-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-5-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>8.5.4 Subprogram Renaming Declarations</H1>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0299-1.TXT">AI05-0299-1</A></I>} 
A <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0242">subprogram_renaming_declaration</A></SPAN> 
can serve as the completion of a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN>; 
<A NAME="I4768"></A>such a <SPAN Class="swiss"><A HREF="AA-8-5.html#S0238">renaming_declaration</A></SPAN> 
is called a <I>renaming-as-body</I>. <A NAME="I4769"></A>A <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0242">subprogram_renaming_declaration</A></SPAN> 
that is not a completion is called a <I>renaming-as-declaration</I>[, 
and is used to rename a subprogram (possibly an enumeration literal) 
or an entry].&nbsp;</div>
<div class="paranum"><a name="p1.a">1.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>A renaming-as-body is a 
declaration, as defined in Clause <A HREF="AA-3.html">3</A>.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/3</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20218.TXT">AI95-00218-03</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0183-1.TXT">AI05-0183-1</A></I>} 
<SPAN Class="swiss">subprogram_renaming_declaration</SPAN><A NAME="I4770"></A><A NAME="S0242"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;[<A NAME="I4771"></A><SPAN Class="swiss"><A HREF="AA-8-3-1.html#S0234">overriding_indicator</A></SPAN>]<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I4772"></A><SPAN Class="swiss"><A HREF="AA-6-1.html#S0196">subprogram_specification</A></SPAN>&nbsp;<B>renames</B>&nbsp;<I>callable_entity_</I><A NAME="I4773"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<A NAME="I4774"></A><SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN>];</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p3">3</a></div>
<div class="Normal"><A NAME="I4775"></A>The expected profile for the 
<I>callable_entity_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is the profile given in the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0196">subprogram_specification</A></SPAN>. 
</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0239-1.TXT">AI05-0239-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0373-1.TXT">AI12-0373-1</A></I>} 
The profile of a renaming-as-declaration shall be mode conformant<span class="delete5">,</span> 
with that of the renamed callable entity. <A NAME="I4776"></A></div>
<div class="paranum"><a name="p4.1">4.1/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00423.TXT">AI95-00423-01</A></I>} 
For a parameter or result subtype of the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0196">subprogram_specification</A></SPAN> 
that has an explicit <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>:</div>
<div class="paranum"><a name="p4.2">4.2/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0287-1.TXT">AI12-0287-1</A></I>} 
if the <I>callable_entity_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
<span class="insert5">statically&nbsp;</span>denotes a generic formal subprogram 
of a generic unit <I>G</I>, and the <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0242">subprogram_renaming_declaration</A></SPAN> 
occurs within the body of a generic unit <I>G</I> or within the body 
of a generic unit declared within the declarative region of the generic 
unit <I>G</I>, then the corresponding parameter or result subtype of 
the formal subprogram of <I>G</I> shall have a <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>;</div>
<div class="paranum"><a name="p4.3">4.3/2</a></div>
<div class="Bulleted">otherwise, the subtype of the corresponding parameter 
or result type of the renamed callable entity shall exclude null. <A NAME="I4777"></A>In 
addition to the places where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit.&nbsp;</div>
<div class="paranum"><a name="p4.a">4.a/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Reason:&nbsp;</B>This 
rule prevents &ldquo;lying&rdquo;. <B>Null</B> must never be the value 
of a parameter or result with an explicit <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>. 
The first bullet is an assume-the-worst rule which prevents trouble in 
generic bodies (including bodies of child units) when the formal subtype 
excludes null implicitly.&nbsp;</div>
<div class="paranum"><a name="p5">5/3</a></div>
<div class="Normal">{<I><A HREF="defect1.html#8652/0027">8652/0027</A></I>} 
{<I><A HREF="defect1.html#8652/0028">8652/0028</A></I>} {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00135.TXT">AI95-00135-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00145.TXT">AI95-00145-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0239-1.TXT">AI05-0239-1</A></I>} 
The profile of a renaming-as-body shall conform fully to that of the 
declaration it completes. <A NAME="I4778"></A>If the renaming-as-body 
completes that declaration before the subprogram it declares is frozen, 
the profile shall be mode conformant <A NAME="I4779"></A>with that of 
the renamed callable entity and the subprogram it declares takes its 
convention from the renamed subprogram; otherwise, the profile shall 
be subtype conformant with that of the renamed callable entity and the 
convention of the renamed subprogram shall not be Intrinsic. <A NAME="I4780"></A>A 
renaming-as-body is illegal if the declaration occurs before the subprogram 
whose declaration it completes is frozen, and the renaming renames the 
subprogram itself, through one or more subprogram renaming declarations, 
none of whose subprograms has been frozen.&nbsp;</div>
<div class="paranum"><a name="p5.a">5.a/1</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>The otherwise part of the second 
sentence is to allow an implementation of a renaming-as-body as a single 
jump instruction to the target subprogram. Among other things, this prevents 
a subprogram from being completed with a renaming of an entry. (In most 
cases, the target of the jump can be filled in at link time. In some 
cases, such as a renaming of a name like &quot;A(I).<B>all</B>&quot;, 
an indirect jump is needed. Note that the name is evaluated at renaming 
time, not at call time.)</div>
<div class="paranum"><a name="p5.a.1">5.a.1/1</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0028">8652/0028</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00145.TXT">AI95-00145-01</A></I>} 
The first part of the second sentence is intended to allow renaming-as-body 
of predefined operators before the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN> 
is frozen. For some types (such as integer types), the parameter type 
for operators is the base type, and it would be very strange for<BR>
<TT>&nbsp;&nbsp;&nbsp;<B>function</B> Equal (A, B : <B>in</B> T) <B>return</B> 
Boolean;</TT><BR>
<TT>&nbsp;&nbsp;&nbsp;<B>function</B> Equal (A, B : <B>in</B> T) <B>return</B> 
Boolean <B>renames</B> &quot;=&quot;;</TT><BR>
to be illegal. (Note that predefined operators cannot be renamed this 
way after the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN> 
is frozen, as they have convention Intrinsic.)</div>
<div class="paranum"><a name="p5.b">5.b/1</a></div>
<div class="Annotations">The first sentence is the normal rule for completions 
of <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN>s. 
</div>
<div class="paranum"><a name="p5.c">5.c</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>An <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0257">entry_declaration</A></SPAN>, 
unlike a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN>, 
cannot be completed with a <SPAN Class="swiss"><A HREF="AA-8-5.html#S0238">renaming_declaration</A></SPAN>. 
Nor can a <SPAN Class="swiss"><A HREF="AA-12-1.html#S0311">generic_subprogram_declaration</A></SPAN>.</div>
<div class="paranum"><a name="p5.d">5.d</a></div>
<div class="Annotations">The syntax rules prevent a protected subprogram 
declaration from being completed by a renaming. This is fortunate, because 
it allows us to avoid worrying about whether the implicit protected object 
parameter of a protected operation is involved in the conformance rules. 
</div>
<div class="paranum"><a name="p5.d.1">5.d.1/1</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="defect1.html#8652/0027">8652/0027</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00135.TXT">AI95-00135-01</A></I>} 
Circular renames before freezing is illegal, as the compiler would not 
be able to determine the convention of the subprogram. Other circular 
renames are handled below; see Bounded (Run-Time) Errors.&nbsp;</div>
<div class="paranum"><a name="p5.1">5.1/2</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00228.TXT">AI95-00228-01</A></I>} 
The <I>callable_entity_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of a renaming shall not denote a subprogram that requires overriding 
(see <A HREF="AA-3-9-3.html">3.9.3</A>).&nbsp;</div>
<div class="paranum"><a name="p5.d.2">5.d.2/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00228.TXT">AI95-00228-01</A></I>} 
Such a rename cannot be of the inherited subprogram (which requires overriding 
because it cannot be called), and thus cannot squirrel away a subprogram 
(see below). That would be confusing, so we make it illegal. The renaming 
is allowed after the overriding, as then the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
will denote the overriding subprogram, not the inherited one.&nbsp;</div>
<div class="paranum"><a name="p5.2">5.2/2</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00228.TXT">AI95-00228-01</A></I>} 
The <I>callable_entity_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of a renaming-as-body shall not denote an abstract subprogram.&nbsp;</div>
<div class="paranum"><a name="p5.d.3">5.d.3/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00228.TXT">AI95-00228-01</A></I>} 
Such a subprogram has no body, so it hardly can replace one in the program. 
</div>
<div class="paranum"><a name="p5.3">5.3/5</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0204-1.TXT">AI12-0204-1</A></I>} 
<span class="insert5">If the <I>callable_entity_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of a renaming is a prefixed view, the prefix of that view shall denote 
an object for which renaming is allowed.</span></div>
<div class="paranum"><a name="p5.e">5.e/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0204-1.TXT">AI12-0204-1</A></I>} 
<span class="insert5">The prefix in such a case is essentially renamed 
and passed to any calls of the renamed subprogram. If the prefix isn't 
legal to rename, that doesn't make sense (and allowing it might end up 
passing a nonexistent object to some calls).</span>&nbsp;</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
that denotes a formal parameter of the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0196">subprogram_specification</A></SPAN> 
is not allowed within the <I>callable_entity_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>. 
</div>
<div class="paranum"><a name="p6.a">6.a</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Reason:&nbsp;</B>This 
is to prevent things like this:&nbsp;</div>
<div class="paranum"><a name="p6.b">6.b</a></div>
<div class="SmallExamples"><B>function</B>&nbsp;F(X&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Integer&nbsp;<B>renames</B>&nbsp;Table(X).<B>all</B>;</div>
<div class="paranum"><a name="p6.c">6.c</a></div>
<div class="AnnotationsWideAbove" style="margin-bottom: 0.4em">A similar 
rule in <A HREF="AA-6-1.html">6.1</A> forbids things like this:&nbsp;</div>
<div class="paranum"><a name="p6.d">6.d</a></div>
<div class="SmallExamples"><B>function</B>&nbsp;F(X&nbsp;:&nbsp;Integer;&nbsp;Y&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;X)&nbsp;<B>return</B>&nbsp;Integer;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p7">7</a></div>
<div class="Normal">A renaming-as-declaration declares a new view of 
the renamed entity. The profile of this new view takes its subtypes, 
parameter modes, and calling convention from the original profile of 
the callable entity, while taking the formal parameter <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>s 
from the profile given in the <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0242">subprogram_renaming_declaration</A></SPAN>. 
The new view is a function or procedure, never an entry.&nbsp;</div>
<div class="paranum"><a name="p7.a">7.a</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>When renaming an entry 
as a procedure, the compile-time rules apply as if the new view is a 
procedure, but the run-time semantics of a call are that of an entry 
call.&nbsp;</div>
<div class="paranum"><a name="p7.b">7.b</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>For example, it is illegal 
for the <SPAN Class="swiss"><A HREF="AA-9-5-3.html#S0264">entry_call_statement</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0276">timed_entry_call</A></SPAN> 
to call the new view. But what looks like a procedure call will do things 
like barrier waiting.</div>
<div class="paranum"><a name="p7.b.1">7.b.1/3</a></div>
<div class="Annotations">{<I><A HREF="defect2.html#8652/0105">8652/0105</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00211.TXT">AI95-00211-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00228.TXT">AI95-00228-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0095-1.TXT">AI05-0095-1</A></I>} 
All properties of the renamed entity are inherited by the new view unless 
otherwise stated by this document. In particular, if the renamed entity 
is abstract, the new view also is abstract. Similarly, if the renamed 
entity is not a program unit, then neither is the renaming. (Implicitly 
declared subprograms are not program units, see <A HREF="AA-10-1.html">10.1</A>). 
</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p7.1">7.1/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0014">8652/0014</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00064.TXT">AI95-00064-01</A></I>} 
For a call to a subprogram whose body is given as a renaming-as-body, 
the execution of the renaming-as-body is equivalent to the execution 
of a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0216">subprogram_body</A></SPAN> 
that simply calls the renamed subprogram with its formal parameters as 
the actual parameters and, if it is a function, returns the value of 
the call.&nbsp;</div>
<div class="paranum"><a name="p7.b.2">7.b.2/1</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This implies that the subprogram 
completed by the renaming-as-body has its own elaboration check.&nbsp;</div>
<div class="paranum"><a name="p8">8/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0123-1.TXT">AI05-0123-1</A></I>} 
For a call on a renaming of a dispatching subprogram that is overridden, 
if the overriding occurred before the renaming, then the body executed 
is that of the overriding declaration, even if the overriding declaration 
is not visible at the place of the renaming; otherwise, the inherited 
or predefined subprogram is called. A corresponding rule applies to a 
call on a renaming of a predefined equality operator for an untagged 
record type.&nbsp;</div>
<div class="paranum"><a name="p8.a">8.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Note that whether or not 
the renaming is itself primitive has nothing to do with the renamed subprogram.</div>
<div class="paranum"><a name="p8.b">8.b/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0123-1.TXT">AI05-0123-1</A></I>} 
Note that the above rule is only for tagged types and equality of untagged 
record types.</div>
<div class="paranum"><a name="p8.c">8.c</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">Consider the following 
example:&nbsp;</div>
<div class="paranum"><a name="p8.d">8.d</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;P&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is</B>&nbsp;<B>tagged</B>&nbsp;<B>null</B>&nbsp;<B>record</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Predefined_Equal(X,&nbsp;Y&nbsp;:&nbsp;T)&nbsp;<B>return</B>&nbsp;Boolean&nbsp;<B>renames</B>&nbsp;&quot;=&quot;;<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;=&quot;(X,&nbsp;Y&nbsp;:&nbsp;T)&nbsp;<B>return</B>&nbsp;Boolean;&nbsp;--<SPAN Class="roman"><I>&nbsp;Override&nbsp;predefined&nbsp;&quot;=&quot;.</I></SPAN><BR>
<B>end</B>&nbsp;P;</div>
<div class="paranum"><a name="p8.e">8.e</a></div>
<div class="SmallExamples"><B>with</B>&nbsp;P;&nbsp;<B>use</B>&nbsp;P;<BR>
<B>package</B>&nbsp;Q&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;User_Defined_Equal(X,&nbsp;Y&nbsp;:&nbsp;T)&nbsp;<B>return</B>&nbsp;Boolean&nbsp;<B>renames</B>&nbsp;P.&quot;=&quot;;<BR>
<B>end</B>&nbsp;Q;</div>
<div class="paranum"><a name="p8.f">8.f</a></div>
<div class="Annotations">A call on Predefined_Equal will execute the 
predefined equality operator of T, whereas a call on User_Defined_Equal 
will execute the body of the overriding declaration in the private part 
of P.</div>
<div class="paranum"><a name="p8.g">8.g</a></div>
<div class="Annotations">Thus a renaming allows one to squirrel away 
a copy of an inherited or predefined subprogram before later overriding 
it.<A NAME="I4781"></A>&nbsp;</div>

<H4 Class="centered">Bounded (Run-Time) Errors</H4>
<div class="paranum"><a name="p8.1">8.1/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0027">8652/0027</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00135.TXT">AI95-00135-01</A></I>} 
If a subprogram directly or indirectly renames itself, then it is a bounded 
error to call that subprogram. Possible consequences are that Program_Error 
or Storage_Error is raised, or that the call results in infinite recursion. 
<A NAME="I4782"></A><A NAME="I4783"></A></div>
<div class="paranum"><a name="p8.g.1">8.g.1/1</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="defect1.html#8652/0027">8652/0027</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00135.TXT">AI95-00135-01</A></I>} 
This has to be a bounded error, as it is possible for a renaming-as-body 
appearing in a package body to cause this problem. Thus it is not possible 
in general to detect this problem at compile time.&nbsp;</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Notes">NOTE 1&nbsp;&nbsp;&nbsp;A procedure can only be renamed 
as a procedure. A function whose <SPAN Class="swiss"><A HREF="AA-6-1.html#S0200">defining_designator</A></SPAN> 
is either an <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
or an <SPAN Class="swiss"><A HREF="AA-6-1.html#S0202">operator_symbol</A></SPAN> 
can be renamed with either an <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
or an <SPAN Class="swiss"><A HREF="AA-6-1.html#S0202">operator_symbol</A></SPAN>; 
for renaming as an operator, the subprogram specification given in the 
<SPAN Class="swiss"><A HREF="AA-8-5.html#S0238">renaming_declaration</A></SPAN> 
is subject to the rules given in <A HREF="AA-6-6.html">6.6</A> for operator 
declarations. Enumeration literals can be renamed as functions; similarly, 
<SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN>s 
that denote functions (such as references to Succ and Pred) can be renamed 
as functions. An entry can only be renamed as a procedure; the new <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is only allowed to appear in contexts that allow a procedure <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>. 
An entry of a family can be renamed, but an entry family cannot be renamed 
as a whole.</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Notes">NOTE 2&nbsp;&nbsp;&nbsp;The operators of the root 
numeric types cannot be renamed because the types in the profile are 
anonymous, so the corresponding specifications cannot be written; the 
same holds for certain attributes, such as Pos.</div>
<div class="paranum"><a name="p11">11/5</a></div>
<div class="Notes"><SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN><span class="delete5">NOTE 3&nbsp;&nbsp;&nbsp;</span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0292-1.TXT">AI12-0292-1</A></I>} 
<span class="delete5">Calls with the new <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of a renamed entry are <SPAN Class="swiss"><A HREF="AA-6-4.html#S0217">procedure_call_statement</A></SPAN>s 
and are not allowed at places where the syntax requires an <SPAN Class="swiss"><A HREF="AA-9-5-3.html#S0264">entry_call_statement</A></SPAN> 
in <SPAN Class="swiss">conditional_</SPAN> and <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0276">timed_entry_call</A></SPAN>s, 
nor in an <SPAN Class="swiss"><A HREF="AA-9-7-4.html#S0280">asynchronous_select</A></SPAN>; 
similarly, the Count attribute is not available for the new <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>.</span></div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Notes">NOTE 4&nbsp;&nbsp;&nbsp;The primitiveness of a renaming-as-declaration 
is determined by its profile, and by where it occurs, as for any declaration 
of (a view of) a subprogram; primitiveness is not determined by the renamed 
view. In order to perform a dispatching call, the subprogram name has 
to denote a primitive subprogram, not a nonprimitive renaming of a primitive 
subprogram.&nbsp;</div>
<div class="paranum"><a name="p12.a">12.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>A <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0242">subprogram_renaming_declaration</A></SPAN> 
could more properly be called <SPAN Class="swiss">renaming_as_subprogram_declaration</SPAN>, 
since you're renaming something as a subprogram, but you're not necessarily 
renaming a subprogram. But that's too much of a mouthful. Or, alternatively, 
we could call it a <SPAN Class="swiss">callable_entity_renaming_declaration</SPAN>, 
but that's even worse. Not only is it a mouthful, it emphasizes the entity 
being renamed, rather than the new view, which we think is a bad idea. 
We'll live with the oddity.&nbsp;</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p13">13</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of subprogram 
renaming declarations:</I>&nbsp;</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Examples"><B>procedure</B>&nbsp;My_Write(C&nbsp;:&nbsp;<B>in</B>&nbsp;Character)&nbsp;<B>renames</B>&nbsp;Pool(K).Write;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-4-1-3.html">4.1.3</A></I></SPAN></div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Examples"><B>function</B>&nbsp;Real_Plus(Left,&nbsp;Right&nbsp;:&nbsp;Real&nbsp;&nbsp;&nbsp;)&nbsp;<B>return</B>&nbsp;Real&nbsp;&nbsp;&nbsp;&nbsp;<B>renames</B>&nbsp;&quot;+&quot;;<BR>
<B>function</B>&nbsp;Int_Plus&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Integer&nbsp;<B>renames</B>&nbsp;&quot;+&quot;;</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="Examples"><B>function</B>&nbsp;Rouge&nbsp;<B>return</B>&nbsp;Color&nbsp;<B>renames</B>&nbsp;Red;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-3-5-1.html">3.5.1</A></I></SPAN><BR>
<B>function</B>&nbsp;Rot&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Color&nbsp;<B>renames</B>&nbsp;Red;<BR>
<B>function</B>&nbsp;Rosso&nbsp;<B>return</B>&nbsp;Color&nbsp;<B>renames</B>&nbsp;Rouge;</div>
<div class="paranum"><a name="p17">17</a></div>
<div class="Examples" style="margin-bottom: 0.9em"><B>function</B>&nbsp;Next(X&nbsp;:&nbsp;Color)&nbsp;<B>return</B>&nbsp;Color&nbsp;<B>renames</B>&nbsp;Color'Succ;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-3-5-1.html">3.5.1</A></I></SPAN></div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Example of a subprogram 
renaming declaration with new parameter names:</I>&nbsp;</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="Examples" style="margin-bottom: 0.9em"><B>function</B>&nbsp;&quot;*&quot;&nbsp;(X,Y&nbsp;:&nbsp;Vector)&nbsp;<B>return</B>&nbsp;Real&nbsp;<B>renames</B>&nbsp;Dot_Product;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-6-1.html">6.1</A></I></SPAN></div>
<div class="paranum"><a name="p20">20</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Example of a subprogram 
renaming declaration with a new default expression:</I>&nbsp;</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Examples" style="margin-bottom: 0.9em"><B>function</B>&nbsp;Minimum(L&nbsp;:&nbsp;Link&nbsp;:=&nbsp;Head)&nbsp;<B>return</B>&nbsp;Cell&nbsp;<B>renames</B>&nbsp;Min_Cell;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-6-1.html">6.1</A></I></SPAN></div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p21.a">21.a/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0028">8652/0028</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00145.TXT">AI95-00145-01</A></I>} 
<A NAME="I4784"></A><B>Corrigendum:</B> Allowed a renaming-as-body to 
be just mode conformant with the specification if the subprogram is not 
yet frozen.</div>
<div class="paranum"><a name="p21.b">21.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20218.TXT">AI95-00218-03</A></I>} 
<SPAN Class="swiss"><A HREF="AA-8-3-1.html#S0234">Overriding_indicator</A></SPAN> 
(see <A HREF="AA-8-3-1.html">8.3.1</A>) is optionally added to subprogram 
renamings.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p21.c">21.c/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0014">8652/0014</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00064.TXT">AI95-00064-01</A></I>} 
<B>Corrigendum:</B> Described the semantics of renaming-as-body, so that 
the location of elaboration checks is clear.</div>
<div class="paranum"><a name="p21.d">21.d/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0027">8652/0027</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00135.TXT">AI95-00135-01</A></I>} 
<B>Corrigendum:</B> Clarified that circular renaming-as-body is illegal 
(if it can be detected in time) or a bounded error.</div>
<div class="paranum"><a name="p21.e">21.e/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00228.TXT">AI95-00228-01</A></I>} 
<B>Amendment Correction:</B> Clarified that renaming a shall-be-overridden 
subprogram is illegal, as well as renaming-as-body an abstract subprogram.</div>
<div class="paranum"><a name="p21.f">21.f/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00423.TXT">AI95-00423-01</A></I>} 
Added matching rules for <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>s. 
</div>

<H4 Class="centered">Inconsistencies With Ada 2005</H4>
<div class="paranum"><a name="p21.f.1">21.f.1/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0123-1.TXT">AI05-0123-1</A></I>} 
<A NAME="I4785"></A>Renaming of user-defined untagged record equality 
is now defined to call the overridden body so long as the overriding 
occurred before the renames. This could change the body called in unusual 
cases; the change is necessary to preserve the principle that the body 
called for an explicit call to &quot;=&quot; (via a renames in this case) 
is the same as the one inherited for a derived type and used in generics. 
Note that any renamings before the overriding will be unchanged. Any 
differences caused by the change will be rare and most likely will fix 
a bug.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p21.g">21.g/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0183-1.TXT">AI05-0183-1</A></I>} 
<A NAME="I4786"></A>An optional <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN> 
can be used in a <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0242">subprogram_renaming_declaration</A></SPAN>. 
This is described in <A HREF="AA-13-1-1.html">13.1.1</A>.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2012</H4>
<div class="paranum"><a name="p21.h">21.h/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0204-1.TXT">AI12-0204-1</A></I>} 
<span class="insert5"><A NAME="I4787"></A><B>Correction:</B> Added a 
rule to ensure that the prefix of a renaming of a prefixed view continues 
to exist during the life of a renames. If the prefix is a subcomponent 
that depends on discriminants, Ada 2005 and 2012 would have allowed the 
prefix while Ada 2022 would not. Without this change, explicit forms 
(renaming the object and then using that in calls) would be safer than 
the renaming; that's inconsistent with other kinds of renaming.</span> 
</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p21.i">21.i/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0287-1.TXT">AI12-0287-1</A></I>} 
<span class="insert5"><B>Correction:</B> Added wording to ensure that 
the object subject to a Legality Rule can be determined at compile-time. 
The alternative being nonsense, we treat this as a wording change.</span> 
</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-5-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-5-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
