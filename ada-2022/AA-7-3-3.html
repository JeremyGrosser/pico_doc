<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Default Initial Conditions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.8em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-3-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-3-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>7.3.3 <span class="insert5">Default Initial Conditions</span><span class="delete5"></span></H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0396-1.TXT">AI12-0396-1</A></I>} 
<span class="insert5">For a private type or private extension (including 
a generic formal type), the following language-defined assertion aspect 
may be specified with an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN> 
(see <A HREF="AA-13-1-1.html">13.1.1</A>):</span></div>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0419-1.TXT">AI12-0419-1</A></I>} 
<span class="insert5">Default_Initial_Condition</span></div><div class="WideHanging-Body"><br clear="left">
<span class="insert5">This aspect shall be specified by an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>, 
called a <I>default initial condition expression</I>. Default_Initial_Condition 
may be specified on a <SPAN Class="swiss"><A HREF="AA-7-3.html#S0232">private_type_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-7-3.html#S0233">private_extension_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-12-5-1.html#S0324">formal_private_type_definition</A></SPAN>, 
or a <SPAN Class="swiss"><A HREF="AA-12-5-1.html#S0325">formal_derived_type_definition</A></SPAN>. 
<A NAME="I4523"></A><A NAME="I4524"></A><A NAME="I4525"></A>[The Default_Initial_Condition 
aspect is not inherited, but its effects are additive, as defined below.]</span></div>
<div class="paranum"><a name="p2.a">2.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Aspect Description 
for&nbsp;</B></span><span class="insert5"><B>Default_Initial_Condition:&nbsp;</B></span><span class="insert5">A 
condition that will hold true after the default initialization of an 
object.</span></div>
<div class="paranum"><a name="p2.b">2.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Term entry:&nbsp;</B><B>default 
initial condition</B> &mdash; property that holds for every default-initialized 
object of a given type</span></div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5">The expected type for a default initial condition 
expression is any boolean type.</span></div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0397-1.TXT">AI12-0397-1</A></I>} 
<span class="insert5">Within a default initial condition expression associated 
with a declaration for a type T, a name that denotes the declaration 
is interpreted as a current instance of a notional (nonabstract) formal 
derived type NT with ancestor T, that has directly visible primitive 
operations.</span></div>
<div class="paranum"><a name="p4.a">4.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B>This is 
analogous to the rule for Post'Class (see <A HREF="AA-6-1-1.html">6.1.1</A>) 
and ensures that the expression is well-defined for any descendant of 
type T.</span>&nbsp;</div>
<div class="paranum"><a name="p4.b">4.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>The 
operations of NT are also nonabstract, so the rule against a call of 
an abstract subprogram does not trigger for a default initial condition 
for an abstract type. Note that, presuming T is tagged, it is possible 
to call class-wide operations of the type T given an object of type NT. 
Similarly it is possible to explicitly convert an object of type NT to 
a subtype of T, and pass it to a nonprimitive operation expecting a parameter 
of type T. [Note that one cannot directly convert to (the first subtype 
of) T since it represents the current instance of the type within the 
aspect expression, but one can convert to a subtype of T (including a 
subtype that matches the first subtype).]</span>&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5">The Default_Initial_Condition aspect shall not 
be specified for a type whose partial view has unknown discriminants[, 
whether explicitly declared or inherited].</span></div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5">If the Default_Initial_Condition aspect is specified 
for a type T, then the default initial condition expression applies to 
T and to all descendants of T.</span></div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0397-1.TXT">AI12-0397-1</A></I>} 
<span class="insert5">If one or more default initial condition expressions 
apply to a [(nonabstract)] type T, then a default initial condition check 
is performed after successful initialization of an object of type T by 
default (see <A HREF="AA-3-3-1.html">3.3.1</A>). In the case of a controlled 
type, the check is performed after the call to the type's Initialize 
procedure (see <A HREF="AA-7-6.html">7.6</A>).</span></div>
<div class="paranum"><a name="p7.a">7.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Proof:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0397-1.TXT">AI12-0397-1</A></I>} 
<span class="insert5">If T is an abstract type, then there will never 
be an initialization of an object of the type.</span>&nbsp;</div>
<div class="paranum"><a name="p8">8/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5">If performing checks is required by the Default_Initial_Condition 
assertion policy (see <A HREF="AA-11-4-2.html">11.4.2</A>) in effect 
at the point of the corresponding <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN> 
applicable to a given type, then the respective default initial condition 
expression is considered enabled.</span></div>
<div class="paranum"><a name="p9">9/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0397-1.TXT">AI12-0397-1</A></I>} 
<span class="insert5">The default initial condition check consists of 
the evaluation of each enabled default initial condition expression that 
applies to T. Any operations within such an expression that were resolved 
as primitive operations of the (notional) formal derived type NT, are 
in the evaluation of the expression resolved as for a formal derived 
type in an instance with T as the actual type for NT (see <A HREF="AA-12-5-1.html">12.5.1</A>). 
These evaluations, if there are more than one, are performed in an arbitrary 
order. If any of these evaluate to False, Assertions.Assertion_Error 
is raised at the point of the object initialization.<A NAME="I4526"></A><A NAME="I4527"></A><A NAME="I4528"></A></span></div>
<div class="paranum"><a name="p9.a">9.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0397-1.TXT">AI12-0397-1</A></I>} 
<span class="insert5">Just as is true for a formal derived type (see 
<A HREF="AA-12-5-1.html">12.5.1</A>), for a tagged type T, the controlling 
tag of a call on a primitive of NT will cause the body of the corresponding 
primitive of T to be executed. For an untagged type T, invoking a primitive 
of NT will cause the body of the operation of the type where the aspect 
originated to be executed, with conversions performed as for an inherited 
subprogram.</span>&nbsp;</div>
<div class="paranum"><a name="p10">10/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
<span class="insert5">[For a generic formal type T, default initial condition 
checks performed are as determined by the actual type, along with any 
default initial condition of the formal type itself.]</span></div>
<div class="paranum"><a name="p10.a">10.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Proof:&nbsp;</B>This follows 
from the general dynamic semantics rules given above, but we mention 
it explicitly so that there can be no doubt that it is intended.</span> 
</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p11">11/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0332-1.TXT">AI12-0332-1</A></I>} 
<span class="insert5">Implementations may extend the syntax or semantics 
of the Default_Initial_Condition aspect in an implementation-defined 
manner.</span></div>
<div class="paranum"><a name="p11.a">11.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation defined: 
</B></span><span class="insert5">Any extensions of the Default_Initial_Condition 
aspect.</span></div>
<div class="paranum"><a name="p11.b">11.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B>This is 
intended to allow preexisting usages from SPARK 2014 to remain acceptable 
in conforming implementations, as well as to provide future flexibility. 
Note the word &ldquo;extend&rdquo; in this permission; we expect that 
any aspect usage that conforms with the (other) rules of this subclause 
will be accepted by any Ada implementation, regardless of any implementation-defined 
extensions.</span>&nbsp;</div>
<div class="paranum"><a name="p12">12/5</a></div>
<div class="Notes">NOTE&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
<span class="insert5">For an example of the use of this aspect, see the 
Vector container definition in <A HREF="AA-A-18-2.html">A.18.2</A>.</span> 
</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p12.a">12.a/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0265-1.TXT">AI12-0265-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0397-1.TXT">AI12-0397-1</A></I>} 
<span class="insert5"><A NAME="I4529"></A>Aspect Default_Initial_Condition 
is new.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-3-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-3-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
