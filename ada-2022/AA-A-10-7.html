<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Input-Output of Characters and Strings</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented2 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-10-6.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-10-8.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>A.10.7 Input-Output of Characters and Strings</H1>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal" style="margin-bottom: 0.4em">For an item of type 
Character the following procedures are provided:&nbsp;</div>
<div class="paranum"><a name="p2">2</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Get(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Character);<BR>
<B>procedure</B>&nbsp;Get(Item&nbsp;:&nbsp;<B>out</B>&nbsp;Character);</div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Indented2">After skipping any line terminators and any page 
terminators, reads the next character from the specified input file and 
returns the value of this character in the out parameter Item.</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception End_Error 
is propagated if an attempt is made to skip a file terminator.</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Put(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;Character);<BR>
<B>procedure</B>&nbsp;Put(Item&nbsp;:&nbsp;<B>in</B>&nbsp;Character);</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">If the line length 
of the specified output file is bounded (that is, does not have the conventional 
value zero), and the current column number exceeds it, has the effect 
of calling New_Line with a spacing of one. Then, or otherwise, outputs 
the given character to the file.</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Look_Ahead&nbsp;(File&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>out</B>&nbsp;Character;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End_Of_Line&nbsp;:&nbsp;<B>out</B>&nbsp;Boolean);<BR>
<B>procedure</B>&nbsp;Look_Ahead&nbsp;(Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>out</B>&nbsp;Character;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End_Of_Line&nbsp;:&nbsp;<B>out</B>&nbsp;Boolean);</div>
<div class="paranum"><a name="p8">8/3</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0038-1.TXT">AI05-0038-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
Status_Error is propagated if the file is not open. Mode_Error is propagated 
if the mode of the file is not In_File. Sets End_Of_Line to True if at 
end of line, including if at end of page or at end of file; in each of 
these cases the value of Item is not specified. <A NAME="I7999"></A>Otherwise, 
End_Of_Line is set to False and Item is set to the next character (without 
consuming it) from the file.</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Get_Immediate(File&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Character);<BR>
<B>procedure</B>&nbsp;Get_Immediate(Item&nbsp;:&nbsp;<B>out</B>&nbsp;Character);</div>
<div class="paranum"><a name="p10">10/3</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0038-1.TXT">AI05-0038-1</A></I>} 
Reads the next character, either control or graphic, from the specified 
File or the default input file. Status_Error is propagated if the file 
is not open. Mode_Error is propagated if the mode of the file is not 
In_File. End_Error is propagated if at the end of the file. The current 
column, line and page numbers for the file are not affected.</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Get_Immediate(File&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>out</B>&nbsp;Character;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Available&nbsp;:&nbsp;<B>out</B>&nbsp;Boolean);<BR>
<B>procedure</B>&nbsp;Get_Immediate(Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>out</B>&nbsp;Character;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Available&nbsp;:&nbsp;<B>out</B>&nbsp;Boolean);</div>
<div class="paranum"><a name="p12">12/3</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0038-1.TXT">AI05-0038-1</A></I>} 
If a character, either control or graphic, is available from the specified 
File or the default input file, then the character is read; Available 
is True and Item contains the value of this character. If a character 
is not available, then Available is False and the value of Item is not 
specified. <A NAME="I8000"></A>Status_Error is propagated if the file 
is not open. Mode_Error is propagated if the mode of the file is not 
In_File. End_Error is propagated if at the end of the file. The current 
column, line and page numbers for the file are not affected.</div>
<div class="paranum"><a name="p13">13/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00301.TXT">AI95-00301-01</A></I>} 
For an item of type String the following subprograms are provided:&nbsp;</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Get(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;String);<BR>
<B>procedure</B>&nbsp;Get(Item&nbsp;:&nbsp;<B>out</B>&nbsp;String);</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">Determines the length 
of the given string and attempts that number of Get operations for successive 
characters of the string (in particular, no operation is performed if 
the string is null).</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Put(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;String);<BR>
<B>procedure</B>&nbsp;Put(Item&nbsp;:&nbsp;<B>in</B>&nbsp;String);</div>
<div class="paranum"><a name="p17">17</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">Determines the length 
of the given string and attempts that number of Put operations for successive 
characters of the string (in particular, no operation is performed if 
the string is null).</div>
<div class="paranum"><a name="p17.1">17.1/2</a></div>
<div class="Examples"><B>function</B>&nbsp;Get_Line(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;String;<BR>
<B>function</B>&nbsp;Get_Line&nbsp;<B>return</B>&nbsp;String;</div>
<div class="paranum"><a name="p17.2">17.2/2</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00301.TXT">AI95-00301-01</A></I>} 
Returns a result string constructed by reading successive characters 
from the specified input file, and assigning them to successive characters 
of the result string. The result string has a lower bound of 1 and an 
upper bound of the number of characters read. Reading stops when the 
end of the line is met; Skip_Line is then (in effect) called with a spacing 
of 1.</div>
<div class="paranum"><a name="p17.3">17.3/2</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00301.TXT">AI95-00301-01</A></I>} 
Constraint_Error is raised if the length of the line exceeds Positive'Last; 
in this case, the line number and page number are unchanged, and the 
column number is unspecified but no less than it was before the call.<A NAME="I8001"></A> 
The exception End_Error is propagated if an attempt is made to skip a 
file terminator.</div>
<div class="paranum"><a name="p17.a">17.a/2</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00301.TXT">AI95-00301-01</A></I>} 
Precisely what is left in the file is unspecified if Constraint_Error 
is raised because the line doesn't fit in a String; it should be consistent 
with column number. This allows implementers to use whatever buffering 
scheme makes sense. But the line terminator is not skipped in this case. 
</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Get_Line(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last&nbsp;:&nbsp;<B>out</B>&nbsp;Natural);<BR>
<B>procedure</B>&nbsp;Get_Line(Item&nbsp;:&nbsp;<B>out</B>&nbsp;String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last&nbsp;:&nbsp;<B>out</B>&nbsp;Natural);</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="Indented2">Reads successive characters from the specified 
input file and assigns them to successive characters of the specified 
string. Reading stops if the end of the string is met. Reading also stops 
if the end of the line is met before meeting the end of the string; in 
this case Skip_Line is (in effect) called with a spacing of 1. <A NAME="I8002"></A>The 
values of characters not assigned are not specified.</div>
<div class="paranum"><a name="p20">20</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">If characters are 
read, returns in Last the index value such that Item(Last) is the last 
character assigned (the index of the first character assigned is Item'First). 
If no characters are read, returns in Last an index value that is one 
less than Item'First. The exception End_Error is propagated if an attempt 
is made to skip a file terminator.</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Put_Line(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;String);<BR>
<B>procedure</B>&nbsp;Put_Line(Item&nbsp;:&nbsp;<B>in</B>&nbsp;String);</div>
<div class="paranum"><a name="p22">22</a></div>
<div class="Indented2">Calls the procedure Put for the given string, 
and then the procedure New_Line with a spacing of one.&nbsp;</div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum"><a name="p23">23</a></div>
<div class="Normal">The Get_Immediate procedures should be implemented 
with unbuffered input. For a device such as a keyboard, input should 
be &ldquo;available&rdquo; if a key has already been typed, whereas for 
a disk file, input should always be available except at end of file. 
For a file associated with a keyboard-like device, any line-editing features 
of the underlying operating system should be disabled during the execution 
of Get_Immediate.&nbsp;</div>
<div class="paranum"><a name="p23.a">23.a/2</a></div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B>Get_Immediate 
should be implemented with unbuffered input; input should be available 
immediately; line-editing should be disabled.</div>
<div class="paranum"><a name="p24">24</a></div>
<div class="Notes">NOTE 1&nbsp;&nbsp;&nbsp;Get_Immediate can be used 
to read a single key from the keyboard &ldquo;immediately&rdquo;; that 
is, without waiting for an end of line. In a call of Get_Immediate without 
the parameter Available, the caller will wait until a character is available.</div>
<div class="paranum"><a name="p25">25</a></div>
<div class="Notes">NOTE 2&nbsp;&nbsp;&nbsp;In a literal string parameter 
of Put, the enclosing string bracket characters are not output. Each 
doubled string bracket character in the enclosed string is output as 
a single string bracket character, as a consequence of the rule for string 
literals (see <A HREF="AA-2-6.html">2.6</A>).</div>
<div class="paranum"><a name="p26">26</a></div>
<div class="Notes">NOTE 3&nbsp;&nbsp;&nbsp;A string read by Get or written 
by Put can extend over several lines. An implementation is allowed to 
assume that certain external files do not contain page terminators, in 
which case Get_Line and Skip_Line can return as soon as a line terminator 
is read.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<div class="paranum"><a name="p26.a">26.a/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00301.TXT">AI95-00301-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<A NAME="I8003"></A>The Get_Line functions are added to Ada.Text_IO. 
If Ada.Text_IO is referenced in a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0235">use_clause</A></SPAN>, 
and a function Get_Line is defined in a package that is also referenced 
in a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0235">use_clause</A></SPAN>, 
the user-defined Get_Line may no longer be use-visible, resulting in 
errors. This should be rare and is easily fixed if it does occur.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p26.b">26.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00301.TXT">AI95-00301-01</A></I>} 
<A NAME="I8004"></A>The Text_IO.Get_Line functions are new.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p26.c">26.c/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0038-1.TXT">AI05-0038-1</A></I>} 
<B>Correction:</B> Added missing wording about raising Status_Error to 
Look_Ahead and Get_Immediate.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-10-6.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-10-8.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
