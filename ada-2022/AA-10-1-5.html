<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Pragmas and Program Units</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.SmallBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>10.1.5 Pragmas and Program Units</H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
[This subclause discusses pragmas related to<span class="delete5">&nbsp;program 
units, library units, and</span> <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0285">compilation</A></SPAN>s.] 
</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><A NAME="I5491"></A><A NAME="I5492"></A>Certain 
<SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s are 
defined to be <I>program unit pragmas</I>. <A NAME="I5493"></A>A <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
given as the argument of a program unit pragma shall resolve to denote 
the declarations or renamings of one or more program units that occur 
immediately within the declarative region or <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0285">compilation</A></SPAN> 
in which the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
immediately occurs, or it shall resolve to denote the declaration of 
the immediately enclosing program unit (if any); the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to the denoted program unit(s). If there are no <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s 
given as arguments, the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to the immediately enclosing program unit.</span>&nbsp;</div>
<div class="paranum"><a name="p2.a">2.a/5</a></div>
<div class="Annotations"><span class="delete5"><B>Ramification:&nbsp;</B>The 
fact that this is a Name Resolution Rule means that the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
will not apply to declarations from outer declarative regions.</span> 
</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5">A program unit pragma shall appear in one of these 
places:</span>&nbsp;</div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Bulleted"><span class="delete5">At the place of a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0286">compilation_unit</A></SPAN>, 
in which case the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall immediately follow in the same <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0285">compilation</A></SPAN> 
(except for other <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s) 
a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0288">library_unit_declaration</A></SPAN> 
that is a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-12-1.html#S0311">generic_subprogram_declaration</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="AA-12-3.html#S0315">generic_instantiation</A></SPAN>, 
and the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall have an argument that is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denoting that declaration.</span>&nbsp;</div>
<div class="paranum"><a name="p4.a">4.a/5</a></div>
<div class="Annotations"><span class="delete5"><B>Ramification:&nbsp;</B>The 
<SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> has to 
denote the immediately preceding <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0288">library_unit_declaration</A></SPAN>.</span> 
</div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0033">8652/0033</A></I>} 
<span class="delete5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00136.TXT">AI95-00136-01</A></I>} 
<span class="delete5">Immediately within the visible part of a program 
unit and before any nested declaration (but not within a generic formal 
part), in which case the argument, if any, shall be a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
that denotes the immediately enclosing program unit declaration.</span> 
</div>
<div class="paranum"><a name="p5.a">5.a/5</a></div>
<div class="Annotations"><span class="delete5"><B>Ramification:&nbsp;</B>The 
argument is optional in this case.</span>&nbsp;</div>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="Bulleted"><span class="delete5">At the place of a declaration 
other than the first, of a <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
or program unit declaration, in which case the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall have an argument, which shall be a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
that denotes one or more of the following (and nothing else): a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-12-1.html#S0311">generic_subprogram_declaration</A></SPAN>, 
or a <SPAN Class="swiss"><A HREF="AA-12-3.html#S0315">generic_instantiation</A></SPAN>, 
of the same <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
or program unit declaration.</span>&nbsp;</div>
<div class="paranum"><a name="p6.a">6.a/5</a></div>
<div class="Annotations"><span class="delete5"><B>Ramification:&nbsp;</B>If 
you want to denote a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0216">subprogram_body</A></SPAN> 
that is not a completion, or a <SPAN Class="swiss"><A HREF="AA-7-1.html#S0229">package_declaration</A></SPAN>, 
for example, you have to put the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
inside.</span>&nbsp;</div>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0132-1.TXT">AI05-0132-1</A></I>} 
<span class="delete5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><A NAME="I5494"></A><A NAME="I5495"></A><A NAME="I5496"></A><A NAME="I5497"></A>Certain 
program unit pragmas are defined to be <I>library unit pragmas</I>. If 
a library unit pragma applies to a program unit, the program unit shall 
be a library unit.</span>&nbsp;</div>
<div class="paranum"><a name="p7.a">7.a/5</a></div>
<div class="Annotations"><span class="delete5"><B>Ramification:&nbsp;</B>This, 
together with the rules for program unit pragmas above, implies that 
if a library unit pragma applies to a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0195">subprogram_declaration</A></SPAN> 
(and similar things), it has to appear immediately after the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0286">compilation_unit</A></SPAN>, 
whereas if the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to a <SPAN Class="swiss"><A HREF="AA-7-1.html#S0229">package_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0216">subprogram_body</A></SPAN> 
that is not a completion (and similar things), it has to appear inside, 
as the first <SPAN Class="swiss"><A HREF="AA-3-11.html#S0087">declarative_item</A></SPAN>.</span> 
</div>
<div class="Normal"><span class="insert5"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
2 through 7 were moved to <A HREF="AA-J.html">Annex J</A>, &ldquo;<A HREF="AA-J.html">Obsolescent 
Features</A>&rdquo;.</I></SPAN></span>&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p7.1">7.1/5</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5">A library unit pragma that applies to a generic 
unit does not apply to its instances, unless a specific rule for the 
pragma specifies the contrary.</span>&nbsp;</div>

<H4 Class="centered">Post-Compilation Rules</H4>
<div class="paranum"><a name="p8">8</a></div>
<div class="Normal"><A NAME="I5498"></A><A NAME="I5499"></A>Certain <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s 
are defined to be <I>configuration pragmas</I>; they shall appear before 
the first <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0286">compilation_unit</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0285">compilation</A></SPAN>. 
[They are generally used to select a partition-wide or system-wide option.] 
The <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to all <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0286">compilation_unit</A></SPAN>s 
appearing in the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0285">compilation</A></SPAN>, 
unless there are none, in which case it applies to all future <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0286">compilation_unit</A></SPAN>s 
compiled into the same environment.&nbsp;</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00212.TXT">AI95-00212-01</A></I>} 
An implementation may require that configuration pragmas that select 
partition-wide or system-wide options be compiled when the environment 
contains no <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0287">library_item</A></SPAN>s 
other than those of the predefined environment. In this case, the implementation 
shall still accept configuration pragmas in individual compilations that 
confirm the initially selected partition-wide or system-wide options.</div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum"><a name="p10">10/5</a></div>
<div class="Normal">{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5">When applied to a generic unit, a program unit 
pragma that is not a library unit pragma should apply to each instance 
of the generic unit for which there is not an overriding pragma applied 
directly to the instance.</span>&nbsp;</div>
<div class="paranum"><a name="p10.a">10.a/5</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><span class="delete5"><B>Implementation Advice: 
</B></span><span class="delete5">When applied to a generic unit, a program 
unit pragma that is not a library unit pragma should apply to each instance 
of the generic unit for which there is not an overriding pragma applied 
directly to the instance.</span></div>
<div class="Normal"><span class="insert5"><SPAN STYLE="font-size: 80%"><I>Paragraph 
10 was moved to <A HREF="AA-J.html">Annex J</A>, &ldquo;<A HREF="AA-J.html">Obsolescent 
Features</A>&rdquo;.</I></SPAN></span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p10.b">10.b/5</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0033">8652/0033</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00136.TXT">AI95-00136-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><B>Corrigendum:</B> The wording was corrected to 
ensure that a program unit pragma cannot appear in private parts or generic 
formal parts.</span></div>
<div class="paranum"><a name="p10.c">10.c/5</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><B>Corrigendum:</B> The wording was clarified to 
explain the meaning of program unit and library unit pragmas in generic 
units.</span></div>
<div class="paranum"><a name="p10.d">10.d/5</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5">The Implementation Advice added by the Corrigendum 
was moved, as it was not in the normal order. (This changes the paragraph 
number.) It originally was directly after the new Static Semantics rule.</span></div>
<div class="paranum"><a name="p10.e">10.e/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00212.TXT">AI95-00212-01</A></I>} 
The permission to place restrictions was clarified to:&nbsp;</div>
<div class="paranum"><a name="p10.f">10.f/2</a></div>
<div class="SmallBulleted">Ensure that it applies only to partition-wide 
configuration pragmas, not ones like Assertion_Policy (see <A HREF="AA-11-4-2.html">11.4.2</A>), 
which can be different in different units; and</div>
<div class="paranum"><a name="p10.g">10.g/2</a></div>
<div class="SmallBulleted">Ensure that confirming pragmas are always 
allowed.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p10.h">10.h/5</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0132-1.TXT">AI05-0132-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><B>Correction:</B> A library unit pragma must apply 
directly to a library unit, even if no name is given in the pragma.</span> 
</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p10.i">10.i/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="insert5">The terms &ldquo;program unit pragma&rdquo; and 
&ldquo;library unit pragma&rdquo; were moved to <A HREF="AA-J.html">Annex 
J</A>, &ldquo;<A HREF="AA-J.html">Obsolescent Features</A>&rdquo; (specifically 
to <A HREF="AA-J-15.html">J.15</A>) as all of the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s 
that use these terms are now in that annex.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
