<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Timing Events</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left:  10.2em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-14-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-16.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>D.15 Timing Events</H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0299-1.TXT">AI05-0299-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0445-1.TXT">AI12-0445-1</A></I>} 
This subclause describes a language-defined package to allow user-defined 
protected procedures to be executed at a specified time without the <span class="insert5">use 
of</span><span class="delete5">&nbsp;need for</span> a task or a delay statement. 
</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p2">2/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
The following language-defined library package exists:&nbsp;</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0241-1.TXT">AI12-0241-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0302-1.TXT">AI12-0302-1</A></I>} 
<B>package</B>&nbsp;Ada.Real_Time.Timing_Events<span class="insert5"><BR>
&nbsp;&nbsp;<B>with</B>&nbsp;Nonblocking,&nbsp;Global&nbsp;=&gt;&nbsp;<B>in&nbsp;out&nbsp;synchronized</B></span>&nbsp;<B>is</B><A NAME="I10072"></A></div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0241-1.TXT">AI12-0241-1</A></I>} 
&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I10073"></A>Timing_Event&nbsp;<B>is&nbsp;tagged&nbsp;limited&nbsp;private</B>;<BR>
&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I10074"></A>Timing_Event_Handler<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>is&nbsp;access&nbsp;protected&nbsp;procedure</B>&nbsp;(Event&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Timing_Event)<span class="insert5"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Nonblocking&nbsp;=&gt;&nbsp;False</span>;</div>
<div class="paranum"><a name="p5">5/2</a></div>
<div class="Examples">&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I10075"></A>Set_Handler&nbsp;(Event&nbsp;&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Timing_Event;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;At_Time&nbsp;:&nbsp;<B>in</B>&nbsp;Time;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handler&nbsp;:&nbsp;<B>in</B>&nbsp;Timing_Event_Handler);<BR>
&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I10076"></A>Set_Handler&nbsp;(Event&nbsp;&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Timing_Event;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In_Time&nbsp;:&nbsp;<B>in</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handler&nbsp;:&nbsp;<B>in</B>&nbsp;Timing_Event_Handler);<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I10077"></A>Current_Handler&nbsp;(Event&nbsp;:&nbsp;Timing_Event)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Timing_Event_Handler;<BR>
&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I10078"></A>Cancel_Handler&nbsp;(Event&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Timing_Event;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cancelled&nbsp;:&nbsp;<B>out</B>&nbsp;Boolean);</div>
<div class="paranum"><a name="p6">6/2</a></div>
<div class="Examples">&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I10079"></A>Time_Of_Event&nbsp;(Event&nbsp;:&nbsp;Timing_Event)&nbsp;<B>return</B>&nbsp;Time;</div>
<div class="paranum"><a name="p7">7/2</a></div>
<div class="Examples"><B>private</B><BR>
&nbsp;&nbsp;...&nbsp;--&nbsp;<SPAN Class="roman"><I>not&nbsp;specified&nbsp;by&nbsp;the&nbsp;language</I></SPAN><BR>
<B>end</B>&nbsp;Ada.Real_Time.Timing_Events;</div>
<div class="paranum"><a name="p8">8/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
The type Timing_Event represents a time in the future when an event is 
to occur. The type Timing_Event needs finalization<A NAME="I10080"></A> 
(see <A HREF="AA-7-6.html">7.6</A>).</div>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
An object of type Timing_Event is said to be <I>set</I> if it is associated 
with a nonnull value of type Timing_Event_Handler and <I>cleared</I> 
otherwise. All Timing_Event objects are initially cleared. <A NAME="I10081"></A><A NAME="I10082"></A></div>
<div class="paranum"><a name="p10">10/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
The type Timing_Event_Handler identifies a protected procedure to be 
executed by the implementation when the timing event occurs. Such a protected 
procedure is called a <I>handler</I>. <A NAME="I10083"></A></div>
<div class="paranum"><a name="p10.a">10.a/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Discussion: 
</B>Type Timing_Event is tagged. This makes it possible to share a handler 
between several events. In simple cases, 'Access can be used to compare 
the parameter with a specific timing event object (this works because 
a tagged type is a by-reference type). In more complex cases, a type 
extension of type Timing_Event can be declared; a double type conversion 
can be used to access the extension data. For example:</div>
<div class="paranum"><a name="p10.b">10.b/2</a></div>
<div class="SmallExamples"><B>type</B>&nbsp;Toaster_Timing_Event&nbsp;<B>is&nbsp;new</B>&nbsp;Timing_Event&nbsp;<B>with&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;Slot&nbsp;:&nbsp;Natural;<BR>
<B>end&nbsp;record</B>;</div>
<div class="paranum"><a name="p10.c">10.c/2</a></div>
<div class="SmallExamples">...</div>
<div class="paranum"><a name="p10.d">10.d/2</a></div>
<div class="SmallExamples"><B>protected&nbsp;body</B>&nbsp;Toaster&nbsp;<B>is</B></div>
<div class="paranum"><a name="p10.e">10.e/2</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Timer&nbsp;(Event&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Timing_Event)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pop_Up_Toast&nbsp;(Toaster_Timing_Event(Timing_Event'Class(Event)).Slot);<BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;Timer;</div>
<div class="paranum"><a name="p10.f">10.f/2</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;...<BR>
<B>end</B>&nbsp;Toaster;</div>
<div class="paranum"><a name="p10.g">10.g/2</a></div>
<div class="Annotations">The extra conversion to the class-wide type 
is necessary to make the conversions legal. While this usage is clearly 
ugly, we think that the need for this sort of usage will be rare, so 
we can live with it. It's certainly better than having no way to associate 
data with an event.&nbsp;</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p11">11/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
The procedures Set_Handler associate the handler Handler with the event 
Event: if Handler is <B>null</B>, the event is cleared; otherwise, it 
is set. The first procedure Set_Handler sets the execution time for the 
event to be At_Time. The second procedure Set_Handler sets the execution 
time for the event to be Real_Time.Clock + In_Time.</div>
<div class="paranum"><a name="p12">12/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
A call of a procedure Set_Handler for an event that is already set replaces 
the handler and the time of execution; if Handler is not <B>null</B>, 
the event remains set.</div>
<div class="paranum"><a name="p13">13/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
As soon as possible after the time set for the event, the handler is 
executed, passing the event as parameter. The handler is only executed 
if the timing event is in the set state at the time of execution. The 
initial action of the execution of the handler is to clear the event.</div>
<div class="paranum"><a name="p13.a">13.a/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>The second sentence of this paragraph 
is because of a potential race condition. The time might expire and yet 
before the handler is executed, some task could call Cancel_Handler (or 
equivalently call Set_Handler with a <B>null</B> parameter) and thus 
clear the handler.&nbsp;</div>
<div class="paranum"><a name="p14">14/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
If the Ceiling_Locking policy (see <A HREF="AA-D-3.html">D.3</A>) is 
in effect when a procedure Set_Handler is called, a check is made that 
the ceiling priority of Handler.<B>all</B> is Interrupt_Priority'Last. 
If the check fails, Program_Error is raised.</div>
<div class="paranum"><a name="p15">15/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0094-1.TXT">AI05-0094-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
If a procedure Set_Handler is called with zero or negative In_Time or 
with At_Time indicating a time in the past, then the handler is executed 
as soon as possible after the completion of the call of Set_Handler.</div>
<div class="paranum"><a name="p15.a">15.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0094-1.TXT">AI05-0094-1</A></I>} 
The handler will still be executed. Under no circumstances is a scheduled 
call of a handler lost.&nbsp;</div>
<div class="paranum"><a name="p15.b">15.b/3</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0094-1.TXT">AI05-0094-1</A></I>} 
We say &ldquo;as soon as possible&rdquo; so that we do not deadlock if 
we are executing the handler when Set_Handler is called. In that case, 
the current invocation of the handler must complete before the new handler 
can start executing.&nbsp;</div>
<div class="paranum"><a name="p16">16/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
The function Current_Handler returns the handler associated with the 
event Event if that event is set; otherwise, it returns <B>null</B>.</div>
<div class="paranum"><a name="p17">17/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
The procedure Cancel_Handler clears the event if it is set. Cancelled 
is assigned True if the event was set prior to it being cleared; otherwise, 
it is assigned False.</div>
<div class="paranum"><a name="p18">18/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
The function Time_Of_Event returns the time of the event if the event 
is set; otherwise, it returns Real_Time.Time_First.</div>
<div class="paranum"><a name="p19">19/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
As part of the finalization of an object of type Timing_Event, the Timing_Event 
is cleared.</div>
<div class="paranum"><a name="p19.a">19.a/2</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>This is the only 
finalization defined by the language that has a visible effect; but an 
implementation may have other finalization that it needs to perform. 
Implementations need to ensure that the event is cleared before anything 
else is finalized that would prevent a set event from being triggered. 
</div>
<div class="paranum"><a name="p20">20/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
If several timing events are set for the same time, they are executed 
in FIFO order of being set.</div>
<div class="paranum"><a name="p21">21/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
An exception propagated from a handler invoked by a timing event has 
no effect.</div>

<H4 Class="centered">Implementation Requirements</H4>
<div class="paranum"><a name="p22">22/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
For a given Timing_Event object, the implementation shall perform the 
operations declared in this package atomically with respect to any of 
these operations on the same Timing_Event object. The replacement of 
a handler by a call of Set_Handler shall be performed atomically with 
respect to the execution of the handler.</div>
<div class="paranum"><a name="p22.a">22.a/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This prevents various race conditions. 
In particular it ensures that if an event occurs when Set_Handler is 
changing the handler then either the new or old handler is executed in 
response to the appropriate event. It is never possible for a new handler 
to be executed in response to an old event.&nbsp;</div>

<H4 Class="centered">Metrics</H4>
<div class="paranum"><a name="p23">23/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
The implementation shall document the following metric:&nbsp;</div>
<div class="paranum"><a name="p24">24/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0210-1.TXT">AI05-0210-1</A></I>} 
An upper bound on the lateness of the execution of a handler. That is, 
the maximum time between the time specified for the event and when a 
handler is actually invoked assuming no other handler or task is executing 
during this interval.</div>
<div class="paranum"><a name="p24.a">24.a/2</a></div>
<div class="Annotations"><B>Documentation Requirement:&nbsp;</B>The metrics 
for timing events.</div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum"><a name="p25">25/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
The protected handler procedure should be executed directly by the real-time 
clock interrupt mechanism.</div>
<div class="paranum"><a name="p25.a">25.a/2</a></div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B>For a timing event, 
the handler should be executed directly by the real-time clock interrupt 
mechanism.</div>
<div class="paranum"><a name="p26">26/2</a></div>
<div class="Notes">NOTE 1&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
Since a call of Set_Handler is not a potentially blocking operation, 
it can be called from within a handler.</div>
<div class="paranum"><a name="p27">27/2</a></div>
<div class="Notes">NOTE 2&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
A Timing_Event_Handler can be associated with several Timing_Event objects.</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p27.a">27.a/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00297.TXT">AI95-00297-01</A></I>} 
<A NAME="I10084"></A>The package Real_Time.Timing_Events is new.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p27.b">27.b/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0094-1.TXT">AI05-0094-1</A></I>} 
<B>Correction:</B> Reworded to eliminate a deadlock condition if the 
event time is in the past and a handler is currently executing. This 
is technically an inconsistency, but only if a program is depending on 
deadlocking; since it is impossible to imagine how that could be useful, 
we have not documented this as an inconsistency.</div>
<div class="paranum"><a name="p27.c">27.c/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0210-1.TXT">AI05-0210-1</A></I>} 
<B>Correction:</B> Clarified the metric for lateness of a timing event 
to exclude interference from other handlers and tasks. This change might 
change the documentation of an implementation, but not the implementation 
itself, so there is no inconsistency.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-14-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-16.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
