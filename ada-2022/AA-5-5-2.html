<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Generalized Loop Iteration</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-5-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-5-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>5.5.2 Generalized Loop Iteration</H1>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
Generalized forms of loop iteration are provided by an <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN>. 
</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0156-1.TXT">AI12-0156-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0250-1.TXT">AI12-0250-1</A></I>} 
<SPAN Class="swiss">iterator_specification</SPAN><A NAME="I3941"></A><A NAME="S0183"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I3942"></A><SPAN Class="swiss"><A HREF="AA-3-1.html#S0022">defining_identifier</A></SPAN>&nbsp;<span class="insert5">[:&nbsp;<A NAME="I3943"></A><SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN>]&nbsp;</span><B>in</B>&nbsp;[<B>reverse</B>]&nbsp;<I>iterator_</I><A NAME="I3944"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN><span class="insert5"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<A NAME="I3945"></A><SPAN Class="swiss"><A HREF="AA-5-5.html#S0182">iterator_filter</A></SPAN>]</span><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="I3946"></A><SPAN Class="swiss"><A HREF="AA-3-1.html#S0022">defining_identifier</A></SPAN>&nbsp;[:&nbsp;<span class="insert5"><A NAME="I3947"></A><SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN></span><span class="delete5"><A NAME="I3948"></A><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">&nbsp;subtype_indication</A></SPAN></span>]&nbsp;<B>of</B>&nbsp;[<B>reverse</B>]&nbsp;<I>iterable_</I><A NAME="I3949"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN><span class="insert5"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<A NAME="I3950"></A><SPAN Class="swiss"><A HREF="AA-5-5.html#S0182">iterator_filter</A></SPAN>]</span></div>
<div class="paranum"><a name="p2.1">2.1/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0156-1.TXT">AI12-0156-1</A></I>} 
<SPAN Class="swiss"></SPAN><span class="insert5"><SPAN Class="swiss">loop_parameter_subtype_indication</SPAN></span><SPAN Class="swiss"></SPAN><A NAME="I3951"></A><A NAME="S0184"></A><span class="insert5"><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN></span><span class="insert5"><A NAME="I3952"></A><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>&nbsp;|&nbsp;<A NAME="I3953"></A><SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN></span></div>
<div class="paranum"><a name="p2.2">2.2/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5">If an <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
is for a parallel construct, the reserved word <B>reverse</B> shall not 
appear in the <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN>.</span> 
</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p3">3/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
For the first form of <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN>, 
called a <I>generalized iterator</I>,<A NAME="I3954"></A><A NAME="I3955"></A> 
the expected type for the <I>iterator_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is any iterator type.<A NAME="I3956"></A> For the second form of <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN>, 
the expected type for the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is any array or iterable container type.<A NAME="I3957"></A> If the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denotes an array object, the <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
is called an <I>array component iterator</I>;<A NAME="I3958"></A><A NAME="I3959"></A> 
otherwise it is called a <I>container element iterator</I>.<A NAME="I3960"></A><A NAME="I3961"></A> 
</div>
<div class="paranum"><a name="p3.a">3.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Term entry:&nbsp;</B><B>iterator</B> 
&mdash; construct that is used to loop over the elements of an array 
or container<BR>
Note: Iterators can be user defined, and can perform arbitrary computations 
to access elements from a container.</span></div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
If the reserved word <B>reverse</B> appears, the <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
is a <A NAME="I3962"></A><A NAME="I3963"></A><I>reverse iterator</I><span class="insert5">. 
If the <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
is for a parallel construct, the <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
is a <I>parallel iterator</I>.<A NAME="I3964"></A><A NAME="I3965"></A> 
Otherwise,</span><span class="delete5">; otherwise</span> it is a <I>forward 
iterator</I>.<A NAME="I3966"></A><A NAME="I3967"></A> <span class="insert5">Forward 
and reverse iterators are collectively called <I>sequential</I> iterators.<A NAME="I3968"></A><A NAME="I3969"></A> 
</span>In a reverse generalized iterator, the <I>iterator_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall be of a reversible iterator type. <span class="insert5">In a parallel 
generalized iterator, the <I>iterator_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall be of a parallel iterator type.&nbsp;</span>In a reverse container element 
iterator, the default iterator type for the type of the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall be a reversible iterator type.<span class="insert5">&nbsp;In a parallel 
container element iterator, the default iterator type for the type of 
the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall be of a parallel iterator type.</span></div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0151-1.TXT">AI12-0151-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0156-1.TXT">AI12-0156-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0183-1.TXT">AI12-0183-1</A></I>} 
<span class="insert5">The subtype defined by the <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN>, 
if any, of a generalized iterator shall statically match the iteration 
cursor subtype.&nbsp;</span>The <span class="insert4">subtype defined by</span><span class="delete4">&nbsp;type 
of</span> the <span class="insert5"><SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN></span><span class="delete5"><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">&nbsp;subtype_indication</A></SPAN></span>, 
if any, of an array component iterator shall <span class="insert4">statically 
match</span><span class="delete4">&nbsp;cover</span> the component <span class="insert4">subtype</span><span class="delete4">&nbsp;type</span> 
of the type of the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>. 
The <span class="insert4">subtype defined by</span><span class="delete4">&nbsp;type 
of</span> the <span class="insert5"><SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN></span><span class="delete5"><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">&nbsp;subtype_indication</A></SPAN></span>, 
if any, of a container element iterator shall <span class="insert4">statically 
match</span><span class="delete4">&nbsp;cover</span> the default element <span class="insert4">subtype</span><span class="delete4">&nbsp;type</span> 
for the type of the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>.</div>
<div class="paranum"><a name="p6">6/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
In a container element iterator whose <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
has type <I>T</I>, if the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denotes a constant or the Variable_Indexing aspect is not specified for 
<I>T</I>, then the Constant_Indexing aspect shall be specified for <I>T</I>.</div>
<div class="paranum"><a name="p6.1">6.1/4</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0047-1.TXT">AI12-0047-1</A></I>} 
<span class="insert4">The <I>iterator_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
or <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
shall not denote a subcomponent that depends on discriminants of an object 
whose nominal subtype is unconstrained, unless the object is known to 
be constrained.</span></div>
<div class="paranum"><a name="p6.a">6.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B>This is 
the same rule that applies to renames; it serves the same purpose of 
preventing the object from disappearing while the iterator is still using 
it.</span>&nbsp;</div>
<div class="paranum"><a name="p6.2">6.2/4</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0120-1.TXT">AI12-0120-1</A></I>} 
<span class="insert4">A container element iterator is illegal if the 
call of the default iterator function that creates the loop iterator 
(see below) is illegal.</span></div>
<div class="paranum"><a name="p6.b">6.b/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B>This 
can happen if the parameter to the default iterator function is <B>in 
out</B> and the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is a constant. The wording applies to any reason that the call would 
be illegal, as it's possible that one of the default parameters would 
be illegal, or that some accessibility check would fail.</span>&nbsp;</div>
<div class="paranum"><a name="p6.3">6.3/4</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0120-1.TXT">AI12-0120-1</A></I>} 
<span class="insert4">A generalized iterator is illegal if the iteration 
cursor subtype of the <I>iterator_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is a limited type at the point of the generalized iterator. A container 
element iterator is illegal if the default cursor subtype of the type 
of the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is a limited type at the point of the container element iterator.</span></div>
<div class="paranum"><a name="p6.c">6.c/4</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B>If the 
cursor type is limited, the assignment to the loop parameter for a generalized 
iterator would be illegal. The same is true for a container element iterator. 
We have to say &quot;at the point of the iterator&quot; as the limitedness 
of a type can change due to visibility.</span>&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0156-1.TXT">AI12-0156-1</A></I>} 
An <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
declares a <I>loop parameter</I>.<A NAME="I3970"></A> In a generalized 
iterator, <span class="delete5">the nominal subtype of the loop parameter 
is the iteration cursor subtype. In&nbsp;</span>an array component iterator<span class="insert5">,</span> 
or a container element iterator, if a <span class="insert5"><SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN></span><span class="delete5"><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">&nbsp;subtype_indication</A></SPAN></span> 
is present, it determines the nominal subtype of the loop parameter.<span class="insert5">&nbsp;In a generalized iterator, if a <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN> 
is not present, the nominal subtype of the loop parameter is the iteration 
cursor subtype.</span> In an array component iterator, if a <span class="insert5"><SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN></span><span class="delete5"><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">&nbsp;subtype_indication</A></SPAN></span> 
is not present, the nominal subtype of the loop parameter is the component 
subtype of the type of the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>. 
In a container element iterator, if a <span class="insert5"><SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN></span><span class="delete5"><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">&nbsp;subtype_indication</A></SPAN></span> 
is not present, the nominal subtype of the loop parameter is the default 
element subtype for the type of the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>.</div>
<div class="paranum"><a name="p8">8/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
In a generalized iterator, the loop parameter is a constant. In an array 
component iterator, the loop parameter is a constant if the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denotes a constant; otherwise it denotes a variable. In a container element 
iterator, the loop parameter is a constant if the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denotes a constant, or if the Variable_Indexing aspect is not specified 
for the type of the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>; 
otherwise it is a variable.</div>
<div class="paranum"><a name="p8.a">8.a/5</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0093-1.TXT">AI12-0093-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0156-1.TXT">AI12-0156-1</A></I>} 
<span class="insert4">The loop parameter of a generalized iterator has 
the same accessibility as the loop statement. This means that the loop 
parameter object is finalized when the loop statement is left. (It also 
may be finalized as part of assigning a new value to the loop parameter.) 
For array component iterators</span><span class="insert4"><span class="delete5">&nbsp;and 
container element iterators</span></span><span class="insert4">, the 
loop parameter directly denotes an element of the array&nbsp;</span><span class="insert4"><span class="delete5">or 
container&nbsp;</span></span><span class="insert4">and has the accessibility 
of the associated array</span><span class="insert4"><span class="delete5">&nbsp;or container</span></span><span class="insert4">.&nbsp;</span><span class="insert5">For 
container element iterators, the loop parameter denotes the result of 
the indexing function call (in the case of a constant indexing) or a 
generalized reference thereof (in the case of a variable indexing). Roughly 
speaking, the loop parameter has the accessibility level of a single 
iteration of the loop. More precisely, the function result (or the generalized 
reference thereof) is considered to be renamed in the declarative part 
of a notional block statement which immediately encloses the loop's <SPAN Class="swiss"><A HREF="AA-5-1.html#S0166">sequence_of_statements</A></SPAN>; 
the accessibility of the loop parameter is that of the block statement.</span><span class="insert4"></span> 
</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p9">9/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
For the execution of a <SPAN Class="swiss"><A HREF="AA-5-5.html#S0178">loop_statement</A></SPAN> 
with an <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN> 
is first elaborated. This elaboration elaborates the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>, 
if any.</div>
<div class="paranum"><a name="p10">10/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0250-1.TXT">AI12-0250-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
For a <span class="insert5">sequential&nbsp;</span>generalized iterator, the 
loop parameter is created, the <I>iterator_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is evaluated, and the denoted iterator object becomes the <I>loop iterator</I>.<A NAME="I3971"></A> 
In a forward generalized iterator, the operation First of the iterator 
type is called on the loop iterator, to produce the initial value for 
the loop parameter. If the result of calling Has_Element on the initial 
value is False, then the execution of the <SPAN Class="swiss"><A HREF="AA-5-5.html#S0178">loop_statement</A></SPAN> 
is complete. Otherwise, the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0166">sequence_of_statements</A></SPAN> 
is <span class="insert5">conditionally&nbsp;</span>executed and then the Next 
operation of the iterator type is called with the loop iterator and the 
current value of the loop parameter to produce the next value to be assigned 
to the loop parameter. This repeats until the result of calling Has_Element 
on the loop parameter is False, or the loop is left as a consequence 
of a transfer of control. For a reverse generalized iterator, the operations 
Last and Previous are called rather than First and Next.</div>
<div class="paranum"><a name="p10.a">10.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0093-1.TXT">AI12-0093-1</A></I>} 
<span class="insert4">The loop parameter of a generalized iterator is 
a variable of which the user only has a constant view. It follows the 
normal rules for a variable of its nominal subtype. In particular, if 
the nominal subtype is indefinite, the variable is constrained by its 
initial value. Similarly, if the nominal subtype is class-wide, the variable 
(like all variables) has the tag of the initial value. Constraint_Error 
may be raised by a subsequent iteration if Next or Previous return an 
object with a different tag or constraint.</span>&nbsp;</div>
<div class="paranum"><a name="p10.1">10.1/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5">For a parallel generalized iterator, the <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN>, 
if any, of the associated parallel construct, is first elaborated, to 
determine the maximum number of chunks (see <A HREF="AA-5-5.html">5.5</A>), 
and then the operation Split_Into_Chunks of the iterator type is called, 
with the determined maximum passed as the Max_Chunks parameter, specifying 
the upper bound for the number of loop parameter objects (and the number 
of logical threads of control) to be associated with the iterator. In 
the absence of a <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN>, 
the maximum number of chunks is determined in an implementation-defined 
manner.</span></div>
<div class="paranum"><a name="p10.b">10.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation defined: 
</B></span><span class="insert5">The maximum number of chunks for a parallel 
generalized iterator without a <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN>.</span></div>
<div class="paranum"><a name="p10.c">10.c/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B>The 
Max_Chunks parameter of the Split_Into_Chunks procedure is an upper bound 
for the number of chunks to be associated with a loop. A container implementation 
may opt for a lower value for the number of chunks if a more optimal 
split can be determined. For instance, a tree-based container might create 
the split based on the number of branches at the top levels of the tree.</span> 
</div>
<div class="paranum"><a name="p10.2">10.2/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0250-1.TXT">AI12-0250-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0418-1.TXT">AI12-0418-1</A></I>} 
<span class="insert5">Upon return from Split_Into_Chunks, the actual 
number of chunks for the loop is determined by calling the Chunk_Count 
operation of the iterator, at which point one logical thread of control 
is initiated for each chunk, with an associated chunk index in the range 
from one to the actual number of chunks.</span></div>
<div class="paranum"><a name="p10.3">10.3/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0250-1.TXT">AI12-0250-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0418-1.TXT">AI12-0418-1</A></I>} 
<span class="insert5">Within each logical thread of control, a loop parameter 
is created. If a <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN> 
with a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
is present in the associated parallel construct, then a chunk parameter 
is created and initialized with a value from the discrete subtype defined 
by the <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>, 
so that the order of the chosen chunk parameter values correspond to 
the order of the chunk indices associated with the logical threads of 
control. The operation First of the iterator type that has a Chunk parameter 
is called on the loop iterator, with Chunk initialized from the corresponding 
chunk index, to produce the initial value for the loop parameter. If 
the result of calling Has_Element on this initial value is False, then 
the execution of the logical thread of control is complete. Otherwise, 
the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0166">sequence_of_statements</A></SPAN> 
is conditionally executed, and then the Next operation of the iterator 
type that has a Chunk parameter is called with the loop iterator, the 
current value of the loop parameter, and the corresponding chunk index, 
to produce the next value to be assigned to the loop parameter. This 
repeats until the result of calling Has_Element on the loop parameter 
is False, or the associated parallel construct is left as a consequence 
of a transfer of control.</span></div>
<div class="paranum"><a name="p10.4">10.4/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0250-1.TXT">AI12-0250-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0418-1.TXT">AI12-0418-1</A></I>} 
<span class="insert5">In the absence of a transfer of control, the associated 
parallel construct of a parallel generalized iterator is complete when 
all of its logical threads of control are complete.</span></div>
<div class="paranum"><a name="p11">11/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0250-1.TXT">AI12-0250-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
For an array component iterator, <span class="insert5">the <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN> 
of the associated parallel construct, if any, is first elaborated to 
determine the maximum number of chunks (see <A HREF="AA-5-5.html">5.5</A>), 
and then&nbsp;</span>the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is evaluated and the denoted array object becomes the <I>array for the 
loop</I>.<A NAME="I3972"></A> If the array for the loop is a null array, 
then the execution of the <SPAN Class="swiss"><A HREF="AA-5-5.html#S0178">loop_statement</A></SPAN> 
is complete. Otherwise, the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0166">sequence_of_statements</A></SPAN> 
is <span class="insert5">conditionally&nbsp;</span>executed with the loop 
parameter denoting each component of the array for the loop, using a 
<I>canonical</I> order of components,<A NAME="I3973"></A> which is last 
dimension varying fastest (unless the array has convention Fortran, in 
which case it is first dimension varying fastest). For a forward array 
component iterator, the iteration starts with the component whose index 
values are each the first in their index range, and continues in the 
canonical order. For a reverse array component iterator, the iteration 
starts with the component whose index values are each the last in their 
index range, and continues in the reverse of the canonical order. <span class="insert5">For 
a parallel array component iterator, the iteration is broken up into 
contiguous chunks of the canonical order, such that all components are 
covered with no overlaps; each chunk has its own logical thread of control 
with its own loop parameter and iteration within each chunk is in the 
canonical order. The number of chunks is implementation defined, but 
is limited in the presence of a <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN> 
to the determined maximum.&nbsp;</span>The loop iteration proceeds until the 
<SPAN Class="swiss"><A HREF="AA-5-1.html#S0166">sequence_of_statements</A></SPAN> 
has been <span class="insert5">conditionally&nbsp;</span>executed for each 
component of the array for the loop, or until the loop is left as a consequence 
of a transfer of control.</div>
<div class="paranum"><a name="p11.a">11.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation defined: 
</B></span><span class="insert5">The number of chunks for an array component 
iterator.</span></div>
<div class="paranum"><a name="p11.1">11.1/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5">If a <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN> 
with a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
is present in the associated parallel construct, then the logical thread 
of control associated with a given chunk has a chunk parameter initialized 
with a distinct value from the discrete subtype defined by the <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>. 
The values of the chunk parameters are assigned such that they increase 
in the canonical order of the starting array components for the chunks.</span></div>
<div class="paranum"><a name="p12">12/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0111-1.TXT">AI12-0111-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
For a container element iterator, <span class="insert5">the <SPAN Class="swiss"><A HREF="AA-5-5.html#S0180">chunk_specification</A></SPAN> 
of the associated parallel construct, if any, is first elaborated to 
determine the maximum number of chunks (see <A HREF="AA-5-5.html">5.5</A>), 
and then&nbsp;</span>the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
is evaluated<span class="insert5">. If the container type has Iterator_View 
specified, an object of the Iterator_View type is created with the discriminant 
referencing the iterable container object denoted by the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>. 
This is the <I>iterable container object for the loop</I>. Otherwise,</span><span class="delete5">&nbsp;and</span> 
the iterable container object <span class="insert5">denoted by the <I>iterable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
becomes the iterable container object for the loop</span><span class="delete5">&nbsp;becomes 
the <I>iterable container object for the loop</I></span>.<A NAME="I3974"></A> 
The default iterator function for the type of the iterable container 
object for the loop is called on the iterable container object and the 
result is the <I>loop iterator</I>.<A NAME="I3975"></A> <span class="insert5">For 
a sequential container element iterator, an</span><span class="delete5">&nbsp;An</span> 
object of the default cursor subtype is created (the <I>loop cursor</I>).<A NAME="I3976"></A><span class="insert5">&nbsp;For a parallel container element iterator, each chunk of iterations will 
have its own loop cursor, again of the default cursor subtype.</span></div>
<div class="paranum"><a name="p12.a">12.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0111-1.TXT">AI12-0111-1</A></I>} 
<span class="insert5">If Iterator_View is specified, we add an extra 
object and use that object for this iteration. This allows these iterators 
to automatically use the stable view (defined in each of the language-defined 
containers) to do the iteration. That eliminates the need to set and 
clear the tampering with elements indication each time Reference is called; 
that eliminates substantial overhead as finalization is typically used 
to implement the tampering reset.</span>&nbsp;</div>
<div class="paranum"><a name="p13">13/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5">A</span><span class="delete5">&nbsp;For a</span> container 
element iterator<span class="insert5">&nbsp;then proceeds as described above 
for a generalized iterator, except that each reference to a loop parameter 
is replaced by a reference to the corresponding loop cursor. For a container 
element iterator, the loop parameter for each iteration instead denotes</span><span class="delete5">, 
the operation First of the iterator type is called on the loop iterator, 
to produce the initial value for the loop cursor. If the result of calling 
Has_Element on the initial value is False, then the execution of the 
<SPAN Class="swiss"><A HREF="AA-5-5.html#S0178">loop_statement</A></SPAN> 
is complete. Otherwise, the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0166">sequence_of_statements</A></SPAN> 
is executed with the loop parameter denoting</span> an indexing (see 
<A HREF="AA-4-1-6.html">4.1.6</A>) into the iterable container object 
for the loop, with the only parameter to the indexing being the <span class="delete5">current 
</span>value of the loop cursor<span class="insert5">&nbsp;for the given iteration</span><span class="delete5">; 
then the Next operation of the iterator type is called with the loop 
iterator and the loop cursor to produce the next value to be assigned 
to the loop cursor. This repeats until the result of calling Has_Element 
on the loop cursor is False, or until the loop is left as a consequence 
of a transfer of control. For a reverse container element iterator, the 
operations Last and Previous are called rather than First and Next</span>. 
If the loop parameter is a constant (see above), then the indexing uses 
the default constant indexing function for the type of the iterable container 
object for the loop; otherwise it uses the default variable indexing 
function.</div>
<div class="paranum"><a name="p14">14/4</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0120-1.TXT">AI12-0120-1</A></I>} 
<span class="insert4">Any exception propagated by the execution of a 
generalized iterator or container element iterator is propagated by the 
immediately enclosing loop statement.</span></div>
<div class="paranum"><a name="p14.a">14.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B>This 
text covers exceptions raised by called functions that make up the execution 
of the iterator as well as exceptions raised by the assignment to the 
loop parameter or cursor.</span>&nbsp;</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p15">15/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0429-1.TXT">AI12-0429-1</A></I>} 
<span class="insert5"><I>Example of a parallel generalized loop over 
an array:</I></span></div>
<div class="paranum"><a name="p16">16/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0429-1.TXT">AI12-0429-1</A></I>} 
<span class="insert5"><B>parallel</B></span><span class="delete5">&nbsp;--&nbsp;<SPAN Class="roman"><I>Array&nbsp;component&nbsp;iterator&nbsp;example:</I></SPAN></span><BR>
<B>for</B>&nbsp;Element&nbsp;<B>of</B>&nbsp;Board&nbsp;<B>loop</B>&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>See&nbsp;<A HREF="AA-3-6-1.html">3.6.1</A>.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;Element&nbsp;:=&nbsp;Element&nbsp;*&nbsp;2.0;&nbsp;--&nbsp;<SPAN Class="roman"><I>Double&nbsp;each&nbsp;element&nbsp;of&nbsp;Board,&nbsp;a&nbsp;two-dimensional&nbsp;array.</I></SPAN><BR>
<B>end&nbsp;loop</B>;</div>
<div class="paranum"><a name="p17">17/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0268-1.TXT">AI05-0268-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0429-1.TXT">AI12-0429-1</A></I>} 
<span class="insert5"><I>For examples of use of generalized iterators, 
see <A HREF="AA-A-18-33.html">A.18.33</A> and the corresponding container 
packages in <A HREF="AA-A-18-2.html">A.18.2</A> and <A HREF="AA-A-18-3.html">A.18.3</A>.</I></span><span class="delete5">&nbsp;For 
examples of use of generalized iterators, see <A HREF="AA-A-18-33.html">A.18.33</A> 
and the corresponding container packages in <A HREF="AA-A-18-2.html">A.18.2</A> 
and <A HREF="AA-A-18-3.html">A.18.3</A>.</span></div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p17.a">17.a/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
<A NAME="I3977"></A>Generalized forms of loop iteration are new.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2012</H4>
<div class="paranum"><a name="p17.b">17.b/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0047-1.TXT">AI12-0047-1</A></I>} 
<span class="insert4"><A NAME="I3978"></A><B>Corrigendum:</B> Added a 
rule to ensure that the object being iterated cannot be a component that 
could disappear before the loop completes. This could be incompatible 
by making a loop that was legal (and worked correctly, so long as the 
enclosing object is not modified during the loop) from the original Ada 
2012 illegal in corrected Ada 2012. Such loops should be pretty rare, 
especially as these iterator forms are new to Ada 2012.</span></div>
<div class="paranum"><a name="p17.c">17.c/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0120-1.TXT">AI12-0120-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Added rules to reject loops 
if the call to the default iterator function for a container element 
iterator is illegal, or if the cursor type of an iterator is limited. 
These are formally incompatible with original Ada 2012, but as it's unlikely 
that any Ada 2012 compiler ever allowed the illegal usages in an expansion 
of a loop (it's much more likely that they would have just caused an 
internal error in the compiler), this should have no effect in practice.</span></div>
<div class="paranum"><a name="p17.d">17.d/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0151-1.TXT">AI12-0151-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Added a requirement that the 
given subtype statically match the subtype of the element or component 
for a component element iterator or array component iterator. Original 
Ada 2012 text allowed any type that covered the subtype of the element 
or component, but that led to questions of what the meaning was if they 
are different. In this case, the element is essentially a renaming of 
the container element, and it doesn't make sense for the constraints 
to be different. Ignoring explicitly defined constraints in renames is 
a mistake that we don't want to continue, thus we require static matching. 
This means that some programs might be illegal, but those programs were 
misleading at best, and potentially would raise unexpected exceptions 
because the element values might have been invalid or abnormal with respect 
to the declared constraint.</span>&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p17.e">17.e/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0156-1.TXT">AI12-0156-1</A></I>} 
<span class="insert5"><A NAME="I3979"></A>For consistency, we now allow 
a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
on a generalized iterator, and anonymous access types on all forms of 
iterator. We introduced a new syntax non-terminal, <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0184">loop_parameter_subtype_indication</A></SPAN> 
to simplfy the wording.</span></div>
<div class="paranum"><a name="p17.f">17.f/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0250-1.TXT">AI12-0250-1</A></I>} 
<span class="insert5">An <SPAN Class="swiss"><A HREF="AA-5-5.html#S0182">iterator_filter</A></SPAN> 
is now allowed on <SPAN Class="swiss"><A HREF="AA-5-5-2.html#S0183">iterator_specification</A></SPAN>s. 
This is mainly for consistency with aggregate and reduction iterators, 
where it eliminates the need for temporary objects.</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p17.g">17.g/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0120-1.TXT">AI12-0120-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Added wording to specify that 
a loop propagates any exceptions propagated by the execution of an iterator. 
Since that's what naturally would happen from a macro-style expansion 
of the parts of an iterator, and no other interpretation makes sense 
given the way the rest of Ada works, we consider it so unlikely that 
any Ada 2012 implementation ever did anything else that we don't document 
this as a possible inconsistency.</span></div>
<div class="paranum"><a name="p17.h">17.h/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0111-1.TXT">AI12-0111-1</A></I>} 
<span class="insert5">Added wording to include the use of the iterator 
view in a container element iterator.</span></div>
<div class="paranum"><a name="p17.i">17.i/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0266-1.TXT">AI12-0266-1</A></I>} 
<span class="insert5">Added wording to describe the execution of parallel 
iterators.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-5-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-5-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
