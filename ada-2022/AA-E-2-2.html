<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Remote Types Library Units</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>E.2.2 Remote Types Library Units</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">[A remote types library unit supports the definition 
of types intended for use in communication between active partitions.] 
</div>

<H4 Class="centered">Language Design Principles</H4>
<div class="paranum"><a name="p1.a">1.a</a></div>
<div class="Annotations">The restrictions governing a remote types package 
are similar to those for a declared pure package. However, the restrictions 
are relaxed deliberately to allow such a package to contain declarations 
that violate the stateless property of pure packages, though it is presumed 
that any state-dependent properties are essentially invisible outside 
the package.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Indented1" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><A NAME="I10160"></A><A NAME="I10161"></A>The form 
of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Remote_Types is as follows:</span>&nbsp;</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
&nbsp;&nbsp;<span class="delete5"><B>pragma</B> <A NAME="I10162"></A><A NAME="I10163"></A>Remote_Types[(<I>library_unit_</I><A NAME="I10164"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>)];</span></div>
<div class="Normal"><span class="insert5"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
2 and 3 were moved to <A HREF="AA-J.html">Annex J</A>, &ldquo;<A HREF="AA-J.html">Obsolescent 
Features</A>&rdquo;.</I></SPAN></span>&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<A NAME="I10165"></A><span class="insert5">When the library unit aspect 
(see <A HREF="AA-13-1-1.html">13.1.1</A>)</span><span class="delete5">&nbsp;A</span><span class="delete5">&nbsp;<SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN></span> 
Remote_Types<span class="insert5"><A NAME="I10166"></A><A NAME="I10167"></A> 
of</span><span class="delete5">&nbsp;is used to specify that</span> a library 
unit is <span class="insert5">True, the library unit is&nbsp;</span>a <I>remote 
types library unit</I><span class="delete5">, namely that the Remote_Types 
aspect<A NAME="I10168"></A><A NAME="I10169"></A> of the library unit 
is True</span>. The following restrictions apply to such a library unit:</div>
<div class="paranum"><a name="p4.a">4.a/3</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Remote_Types: 
</B>Types in a given package may be used in remote procedure calls.</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Bulleted">[it shall be preelaborable;]</div>
<div class="paranum"><a name="p6">6/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0206-1.TXT">AI05-0206-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
it shall depend semantically only on declared pure <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0287">library_item</A></SPAN>s, 
shared passive library units, other remote types library units, or preelaborated 
normal library units that are mentioned only in private with clauses;</div>
<div class="paranum"><a name="p6.a">6.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
We say declared pure <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0287">library_item</A></SPAN> 
here, so that (all) limited views are allowed; those are not library 
units, but they are declared pure <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0287">library_item</A></SPAN>s. 
</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Bulleted">it shall not contain the declaration of any variable 
within the visible part of the library unit;&nbsp;</div>
<div class="paranum"><a name="p7.a">7.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is essentially a &ldquo;methodological&rdquo; 
restriction. A separate copy of a remote types package is included in 
each partition that references it, just like a normal package. Nevertheless, 
a remote types package is thought of as an &ldquo;essentially pure&rdquo; 
package for defining types to be used for interpartition communication, 
and it could be misleading to declare visible objects when no remote 
data access is actually being provided.&nbsp;</div>
<div class="paranum"><a name="p8">8/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00240.TXT">AI95-00240-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
the full view of each type declared in the visible part of the library 
unit that has any available stream attributes shall support external 
streaming (see <A HREF="AA-13-13-2.html">13.13.2</A>).&nbsp;</div>
<div class="paranum"><a name="p8.a">8.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is to prevent the use of 
the predefined Read and Write attributes of an access type as part of 
the Read and Write attributes of a visible type.&nbsp;</div>
<div class="paranum"><a name="p8.b">8.b/2</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
Types that do not have available stream attributes are excluded from 
this rule; that means that attributes do not need to be specified for 
most limited types. It is only necessary to specify attributes for nonlimited 
types that have a part that is of any access type, and for extensions 
of limited types with available stream attributes where the <SPAN Class="swiss"><A HREF="AA-3-9-1.html#S0075">record_extension_part</A></SPAN> 
includes a subcomponent of an access type, where the access type does 
not have specified attributes.&nbsp;</div>
<div class="paranum"><a name="p9">9/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="defect1.html#8652/0082">8652/0082</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00164.TXT">AI95-00164-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0060-1.TXT">AI05-0060-1</A></I>} 
<A NAME="I10170"></A>A named access type declared in the visible part 
of a remote types or remote call interface library unit is called a <I>remote 
access type</I>. <A NAME="I10171"></A><A NAME="I10172"></A>Such a type 
shall be:</div>
<div class="paranum"><a name="p9.1">9.1/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0082">8652/0082</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00164.TXT">AI95-00164-01</A></I>} 
an access-to-subprogram type, or</div>
<div class="paranum"><a name="p9.2">9.2/3</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0082">8652/0082</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00164.TXT">AI95-00164-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0060-1.TXT">AI05-0060-1</A></I>} 
a general access type that designates a class-wide limited private type, 
a class-wide limited interface type, or a class-wide private extension 
all of whose ancestors are either private extensions, limited interface 
types, or limited private types.&nbsp;</div>
<div class="paranum"><a name="p9.3">9.3/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0081">8652/0081</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00004.TXT">AI95-00004-01</A></I>} 
A type that is derived from a remote access type is also a remote access 
type.</div>
<div class="paranum"><a name="p9.4">9.4/5</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0283-1.TXT">AI12-0283-1</A></I>} 
<span class="insert5">A remote access-to-subprogram type shall not be 
nonblocking (see <A HREF="AA-9-5.html">9.5</A>).</span></div>
<div class="paranum"><a name="p9.a">9.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B>All calls 
on remote subprograms are considered potentially blocking, so they cannot 
statically be allowed in nonblocking code.</span>&nbsp;</div>
<div class="paranum"><a name="p9.b">9.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>The 
type declaration of a remote type is illegal if the Nonblocking aspect 
is True, either implicitly by inheritance or by explicit specification.</span> 
</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The following restrictions 
apply to the use of a remote access-to-subprogram type:&nbsp;</div>
<div class="paranum"><a name="p11">11/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00431.TXT">AI95-00431-01</A></I>} 
A value of a remote access-to-subprogram type shall be converted only 
to or from another (subtype-conformant) remote access-to-subprogram type;</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Bulleted">The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of an Access <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
that yields a value of a remote access-to-subprogram type shall statically 
denote a (subtype-conformant) remote subprogram.&nbsp;</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The following restrictions 
apply to the use of a remote access-to-class-wide type:&nbsp;</div>
<div class="paranum"><a name="p14">14/3</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0083">8652/0083</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00047.TXT">AI95-00047-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00240.TXT">AI95-00240-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0060-1.TXT">AI05-0060-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0101-1.TXT">AI05-0101-1</A></I>} 
The primitive subprograms of the corresponding specific type shall only 
have access parameters if they are controlling formal parameters. The 
primitive functions of the corresponding specific type shall only have 
an access result if it is a controlling access result. Each noncontrolling 
formal parameter and noncontrolling result type shall support external 
streaming (see <A HREF="AA-13-13-2.html">13.13.2</A>);</div>
<div class="paranum"><a name="p14.1">14.1/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0060-1.TXT">AI05-0060-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0215-1.TXT">AI05-0215-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
The corresponding specific type shall not have a primitive procedure 
with the Synchronization aspect specified unless the <SPAN Class="swiss"><A HREF="AA-9-5.html#S0256">synchronization_kind</A></SPAN> 
is Optional (see <A HREF="AA-9-5.html">9.5</A>);</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Bulleted">A value of a remote access-to-class-wide type shall 
be explicitly converted only to another remote access-to-class-wide type;</div>
<div class="paranum"><a name="p16">16/4</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0034-1.TXT">AI12-0034-1</A></I>} 
A value of a remote access-to-class-wide type shall be dereferenced (or 
implicitly converted to an anonymous access type) only as part of a dispatching 
call <span class="insert4">to a primitive operation of the designated 
type&nbsp;</span>where the value designates a controlling operand of the call 
(see <A HREF="AA-E-4.html">E.4</A>, &ldquo;<A HREF="AA-E-4.html">Remote 
Subprogram Calls</A>&rdquo;);&nbsp;</div>
<div class="paranum"><a name="p16.a">16.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0034-1.TXT">AI12-0034-1</A></I>} 
<span class="insert4">Stream attributes of the designated type are not 
primitive operations of the designated type, and thus remote calls to 
them are prohibited by this rule. This is good, as the access parameter 
of a stream attribute does not have external streaming, and thus cannot 
be a parameter of a remote call.</span>&nbsp;</div>
<div class="paranum"><a name="p16.1">16.1/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0101-1.TXT">AI05-0101-1</A></I>} 
A controlling access result value for a primitive function with any controlling 
operands of the corresponding specific type shall either be explicitly 
converted to a remote access-to-class-wide type or be part of a dispatching 
call where the value designates a controlling operand of the call;</div>
<div class="paranum"><a name="p17">17/4</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0085-1.TXT">AI12-0085-1</A></I>} 
The Storage_Pool attribute is not defined for a remote access-to-class-wide 
type; the expected type for an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">allocator</A></SPAN> 
shall not be a remote access-to-class-wide type. A remote access-to-class-wide 
type shall not be an actual parameter for a generic formal access type. 
The Storage_Size attribute of a remote access-to-class-wide type yields 
0<span class="delete4">; it is not allowed in an <SPAN Class="swiss"><A HREF="AA-13-3.html#S0349">attribute_definition_clause</A></SPAN></span>.<span class="insert4">&nbsp;The Storage_Pool and Storage_Size aspects shall not be specified for 
a remote access-to-class-wide type.</span>&nbsp;</div>
<div class="paranum"><a name="p17.a">17.a/3</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
All of these restrictions are because there is no storage pool associated 
with a remote access-to-class-wide type. The Storage_Size is defined 
to be 0 so that there is no conflict with the rules for pure units.&nbsp;</div>
<div class="paranum"><a name="p17.b">17.b/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0085-1.TXT">AI12-0085-1</A></I>} 
<span class="insert4">The prohibition against specifying the Storage_Size 
aspect for an access-to-class-wide type applies to any method of doing 
that, including via either an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN> 
or an <SPAN Class="swiss"><A HREF="AA-13-3.html#S0349">attribute_definition_clause</A></SPAN>.</span> 
</div>

<H4 Class="centered">Erroneous Execution</H4>
<div class="paranum"><a name="p17.1">17.1/4</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0076-1.TXT">AI12-0076-1</A></I>} 
<span class="insert4">Execution is erroneous if some operation (other 
than the initialization or finalization of the object) modifies the value 
of a constant object declared in the visible part of a remote types package.</span></div>
<div class="paranum"><a name="p17.c">17.c/4</a></div>
<div class="Annotations"><span class="insert4"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
<span class="insert4">This could be accomplished via a self-referencing 
pointer or via squirrelling&nbsp;</span><span class="insert5">away&nbsp;</span><span class="insert4">a 
writable pointer to a controlled object.</span>&nbsp;</div>
<div class="paranum"><a name="p18">18/5</a></div>
<div class="Notes">NOTE 1&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0442-1.TXT">AI12-0442-1</A></I>} 
A remote types library unit <span class="insert5">is not necessarily</span><span class="delete5">&nbsp;need 
not be</span> pure, and the types it defines <span class="insert5">can</span><span class="delete5">&nbsp;may</span> 
include levels of indirection implemented by using access types. User-specified 
Read and Write attributes (see <A HREF="AA-13-13-2.html">13.13.2</A>) 
provide for sending values of such a type between active partitions, 
with Write marshalling the representation, and Read unmarshalling any 
levels of indirection.</div>
<div class="paranum"><a name="p19">19/3</a></div>
<div class="Notes">NOTE 2&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0060-1.TXT">AI05-0060-1</A></I>} 
The value of a remote access-to-class-wide limited interface can designate 
an object of a nonlimited type derived from the interface.</div>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="Notes">NOTE 3&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0060-1.TXT">AI05-0060-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0440-1.TXT">AI12-0440-1</A></I>} 
A remote access type <span class="insert5">can</span><span class="delete5">&nbsp;may</span> 
designate a class-wide synchronized, protected, or task interface type. 
</div>
<div class="paranum"><a name="p20.a">20.a/3</a></div>
<div class="Annotations"><B>Proof:&nbsp;</B>Synchronized, protected, and task 
interfaces are all considered limited interfaces, see <A HREF="AA-3-9-4.html">3.9.4</A>. 
</div>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<div class="paranum"><a name="p20.b">20.b/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00240.TXT">AI95-00240-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0248-1.TXT">AI05-0248-1</A></I>} 
<A NAME="I10173"></A><B>Amendment Correction:</B> The wording was changed 
from &ldquo;user-specified&rdquo; to &ldquo;available&rdquo; read and 
write attributes. (This was then further changed, see below.) This means 
that an access type with the attributes specified in the private part 
would originally have been sufficient to allow the access type to be 
used in a remote type, but that is no longer allowed. Similarly, the 
attributes of a remote type that has access components have to be specified 
in the visible part. These changes were made so that the rules were consistent 
with the rules introduced for the Corrigendum for stream attributes; 
moreover, legality should not depend on the contents of the private part. 
</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p20.c">20.c/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<A NAME="I10174"></A>Remote types that cannot be streamed (that is, have 
no available stream attributes) do not require the specification of stream 
attributes. This is necessary so that most extensions of Limited_Controlled 
do not need stream attributes defined (otherwise there would be a significant 
incompatibility, as Limited_Controlled would need stream attributes, 
and then all extensions of it also would need stream attributes).&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p20.d">20.d/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0081">8652/0081</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00004.TXT">AI95-00004-01</A></I>} 
<B>Corrigendum:</B> Added missing wording so that a type derived from 
a remote access type is also a remote access type.</div>
<div class="paranum"><a name="p20.e">20.e/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0083">8652/0083</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00047.TXT">AI95-00047-01</A></I>} 
<B>Corrigendum:</B> Clarified that user-defined Read and Write attributes 
are required for the primitive subprograms corresponding to a remote 
access-to-class-wide type.</div>
<div class="paranum"><a name="p20.f">20.f/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0082">8652/0082</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00164.TXT">AI95-00164-01</A></I>} 
<B>Corrigendum:</B> Added missing wording so that a remote access type 
can designate an appropriate private extension.</div>
<div class="paranum"><a name="p20.g">20.g/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
Changed the wording to use the newly defined term <I>type that supports 
external streaming</I>, so that various issues with access types in pure 
units and implicitly declared attributes for type extensions are properly 
handled.</div>
<div class="paranum"><a name="p20.h">20.h/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
Defined Storage_Size to be 0 for remote access-to-class-wide types, rather 
than having it undefined. This eliminates issues with pure units requiring 
a defined storage size.</div>
<div class="paranum"><a name="p20.i">20.i/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00431.TXT">AI95-00431-01</A></I>} 
Corrected the wording so that a value of a local access-to-subprogram 
type cannot be converted to a remote access-to-subprogram type, as intended 
(and required by the ACATS).&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2005</H4>
<div class="paranum"><a name="p20.j">20.j/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0101-1.TXT">AI05-0101-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
<A NAME="I10175"></A><B>Correction:</B> Added rules <span class="insert5">about 
the</span><span class="delete5">&nbsp;for</span> returning of remote <span class="insert4">access-to-class-wide</span><span class="delete4">&nbsp;access-to-classwide</span> 
types; this had been missed in the past. While programs that returned 
unstreamable types from RCI functions were legal, it is not clear what 
they could have done (as the results could not be marshalled). Similarly, 
RCI functions that return remote controlling access types could try to 
save those values, but it is unlikely that a compiler would know how 
to do that usefully. Thus, it seems unlikely that any real programs will 
be impacted by these changes.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p20.k">20.k/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0060-1.TXT">AI05-0060-1</A></I>} 
<A NAME="I10176"></A><B>Correction:</B> Clarified that anonymous access 
types are never remote access types (and can be used in remote types 
units subject to the normal restrictions). Added wording to allow limited 
class-wide interfaces to be designated by remote access types.</div>
<div class="paranum"><a name="p20.l">20.l/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0206-1.TXT">AI05-0206-1</A></I>} 
Added wording to allow private withs of preelaborated normal units in 
the specification of a remote types unit.</div>
<div class="paranum"><a name="p20.m">20.m/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<A NAME="I10177"></A>Remote_Types is now a categorization aspect, so 
it can be specified by an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN><span class="delete5">&nbsp;&mdash; although the pragma is still preferred by the Reference Manual.</span> 
</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p20.n">20.n/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0034-1.TXT">AI12-0034-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Clarified that dispatching 
remote stream attribute calls are prohibited. We don't document this 
as an incompatibility, as the stream parameter cannot be marshalled for 
a remote call (it doesn't have external streaming), so it's impossible 
that any working program depends on this functionality.</span></div>
<div class="paranum"><a name="p20.o">20.o/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0076-1.TXT">AI12-0076-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Explicitly stated that modifying 
a visible constant in a remote types package is erroneous. We don't document 
this as inconsistent as implementations certainly can still do whatever 
they were previously doing (no change is required); moreover, this case 
(and many more) were erroneous in Ada 2005 and before, so we're just 
restoring the previous semantics.</span></div>
<div class="paranum"><a name="p20.p">20.p/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0085-1.TXT">AI12-0085-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Clarified that specifying the 
Storage_Pool or Storage_Size aspect for an access-to-class-wide type 
is not allowed. The intent is clear, and no implementation has ever allowed 
specifying the aspects (the attributes already cannot be specified), 
so we don't document this as an incompatibility.</span></div>
<div class="paranum"><a name="p20.q">20.q/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0283-1.TXT">AI12-0283-1</A></I>} 
<span class="insert5">Added a rule to ensure that potentially blocking 
remote calls are not considered nonblocking.</span></div>
<div class="paranum"><a name="p20.r">20.r/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="insert5">The pragma Remote_Types is now obsolescent.</span></div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
