<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Fixed Point Types</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.SmallIndented1Examples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 4.6em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left:  10.2em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-5-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-5-10.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>3.5.9 Fixed Point Types</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal"><A NAME="I2095"></A><A NAME="I2096"></A><A NAME="I2097"></A>A 
fixed point type is either an ordinary fixed point type, or a decimal 
fixed point type. <A NAME="I2098"></A>The error bound of a fixed point 
type is specified as an absolute value, called the <I>delta</I> of the 
fixed point type.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2</a></div>
<div class="Indented1"><SPAN Class="swiss">fixed_point_definition</SPAN><A NAME="I2099"></A><A NAME="S0047"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I2100"></A><SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0048">ordinary_fixed_point_definition</A></SPAN>&nbsp;|&nbsp;<A NAME="I2101"></A><SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0049">decimal_fixed_point_definition</A></SPAN></div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Indented1"><SPAN Class="swiss">ordinary_fixed_point_definition</SPAN><A NAME="I2102"></A><A NAME="S0048"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>delta</B>&nbsp;<I>static_</I><A NAME="I2103"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>&nbsp;&nbsp;<A NAME="I2104"></A><SPAN Class="swiss"><A HREF="AA-3-5-7.html#S0046">real_range_specification</A></SPAN></div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Indented1"><SPAN Class="swiss">decimal_fixed_point_definition</SPAN><A NAME="I2105"></A><A NAME="S0049"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>delta</B>&nbsp;<I>static_</I><A NAME="I2106"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>&nbsp;<B>digits</B>&nbsp;<I>static_</I><A NAME="I2107"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>&nbsp;[<A NAME="I2108"></A><SPAN Class="swiss"><A HREF="AA-3-5-7.html#S0046">real_range_specification</A></SPAN>]</div>
<div class="paranum"><a name="p5">5/4</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0152-1.TXT">AI12-0152-1</A></I>} 
<SPAN Class="swiss">digits_constraint</SPAN><A NAME="I2109"></A><A NAME="S0050"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>digits</B>&nbsp;<I>static_</I><span class="insert4"><A NAME="I2110"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN></span><span class="delete4"><A NAME="I2111"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">&nbsp;expression</A></SPAN></span>&nbsp;[<A NAME="I2112"></A><SPAN Class="swiss"><A HREF="AA-3-5.html#S0036">range_constraint</A></SPAN>]</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p6">6</a></div>
<div class="Normal"><A NAME="I2113"></A>For a type defined by a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0047">fixed_point_definition</A></SPAN>, 
the <I>delta</I> of the type is specified by the value of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
given after the reserved word <B>delta</B>; this <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
is expected to be of any real type. <A NAME="I2114"></A><A NAME="I2115"></A><A NAME="I2116"></A>For 
a type defined by a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0049">decimal_fixed_point_definition</A></SPAN> 
(a <I>decimal</I> fixed point type), the number of significant decimal 
digits for its first subtype (the <I>digits</I> of the first subtype) 
is specified by the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
given after the reserved word <B>digits</B>; this <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
is expected to be of any integer type.</div>
<div class="paranum"><a name="p6.1">6.1/4</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
<span class="insert4">The <SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
is expected to be of any integer type.</span>&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p7">7</a></div>
<div class="Normal">In a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0047">fixed_point_definition</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>s 
given after the reserved words <B>delta</B> and <B>digits</B> shall be 
static; their values shall be positive.</div>
<div class="paranum"><a name="p8">8/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00100.TXT">AI95-00100-01</A></I>} 
<A NAME="I2117"></A>The set of values of a fixed point type comprise 
the integral multiples of a number called the <I>small</I> of the type.<A NAME="I2118"></A> 
The <I>machine numbers</I> of a fixed point type are the values of the 
type that can be represented exactly in every unconstrained variable 
of the type. <A NAME="I2119"></A>For a type defined by an <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0048">ordinary_fixed_point_definition</A></SPAN> 
(an <I>ordinary</I> fixed point type), the <I>small</I> may be specified 
by an <SPAN Class="swiss"><A HREF="AA-13-3.html#S0349">attribute_definition_clause</A></SPAN> 
(see <A HREF="AA-13-3.html">13.3</A>); if so specified, it shall be no 
greater than the <I>delta</I> of the type. If not specified, the <I>small</I> 
of an ordinary fixed point type is an implementation-defined power of 
two less than or equal to the <I>delta</I>.&nbsp;</div>
<div class="paranum"><a name="p8.a">8.a</a></div>
<div class="Annotations"><B>Implementation defined:&nbsp;</B>The <I>small</I> 
of an ordinary fixed point type.</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Normal">For a decimal fixed point type, the <I>small</I> 
equals the <I>delta</I>; the <I>delta</I> shall be a power of 10. If 
a <SPAN Class="swiss"><A HREF="AA-3-5-7.html#S0046">real_range_specification</A></SPAN> 
is given, both bounds of the range shall be in the range &ndash;(10**<I>digits</I>&ndash;1)*<I>delta</I> 
.. +(10**<I>digits</I>&ndash;1)*<I>delta</I>.</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0047">fixed_point_definition</A></SPAN> 
is illegal if the implementation does not support a fixed point type 
with the given <I>small</I> and specified range or <I>digits</I>.&nbsp;</div>
<div class="paranum"><a name="p10.a">10.a</a></div>
<div class="Annotations"><B>Implementation defined:&nbsp;</B>What combinations 
of <I>small</I>, range, and <I>digits</I> are supported for fixed point 
types.</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Normal">For a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
with a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
shall denote a decimal fixed point subtype.&nbsp;</div>
<div class="paranum"><a name="p11.a">11.a</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>Or, as an obsolescent feature, 
a floating point subtype is permitted &mdash; see <A HREF="AA-J-3.html">J.3</A>. 
</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p12">12</a></div>
<div class="Normal"><A NAME="I2120"></A>The base range (see <A HREF="AA-3-5.html">3.5</A>) 
of a fixed point type is symmetric around zero, except possibly for an 
extra negative value in some implementations.</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I2121"></A>An 
<SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0048">ordinary_fixed_point_definition</A></SPAN> 
defines an ordinary fixed point type whose base range includes at least 
all multiples of <I>small</I> that are between the bounds specified in 
the <SPAN Class="swiss"><A HREF="AA-3-5-7.html#S0046">real_range_specification</A></SPAN>. 
The base range of the type does not necessarily include the specified 
bounds themselves. <A NAME="I2122"></A><A NAME="I2123"></A>An <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0048">ordinary_fixed_point_definition</A></SPAN> 
also defines a constrained first subtype of the type, with each bound 
of its range given by the closer to zero of:&nbsp;</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Bulleted">the value of the conversion to the fixed point 
type of the corresponding <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-3-5-7.html#S0046">real_range_specification</A></SPAN>; 
<A NAME="I2124"></A></div>
<div class="paranum"><a name="p14.a.1">14.a.1/1</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>The conversion mentioned 
above is not an <I>implicit subtype conversion</I> (which is something 
that happens at overload resolution, see <A HREF="AA-4-6.html">4.6</A>), 
although it happens implicitly. Therefore, the freezing rules are not 
invoked on the type (which is important so that representation items 
can be given for the type). <A NAME="I2125"></A></div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Bulleted">the corresponding bound of the base range.&nbsp;</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="Normal"><A NAME="I2126"></A>A <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0049">decimal_fixed_point_definition</A></SPAN> 
defines a decimal fixed point type whose base range includes at least 
the range &ndash;(10**<I>digits</I>&ndash;1)*<I>delta</I> .. +(10**<I>digits</I>&ndash;1)*<I>delta</I>. 
<A NAME="I2127"></A><A NAME="I2128"></A>A <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0049">decimal_fixed_point_definition</A></SPAN> 
also defines a constrained first subtype of the type. If a <SPAN Class="swiss"><A HREF="AA-3-5-7.html#S0046">real_range_specification</A></SPAN> 
is given, the bounds of the first subtype are given by a conversion of 
the values of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>s 
of the <SPAN Class="swiss"><A HREF="AA-3-5-7.html#S0046">real_range_specification</A></SPAN>. 
<A NAME="I2129"></A>Otherwise, the range of the first subtype is &ndash;(10**<I>digits</I>&ndash;1)*<I>delta</I> 
.. +(10**<I>digits</I>&ndash;1)*<I>delta</I>.</div>
<div class="paranum"><a name="p16.a.1">16.a.1/1</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>The conversion mentioned 
above is not an <I>implicit subtype conversion</I> (which is something 
that happens at overload resolution, see <A HREF="AA-4-6.html">4.6</A>), 
although it happens implicitly. Therefore, the freezing rules are not 
invoked on the type (which is important so that representation items 
can be given for the type). <A NAME="I2130"></A></div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p17">17</a></div>
<div class="Normal"><A NAME="I2131"></A>The elaboration of a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0047">fixed_point_definition</A></SPAN> 
creates the fixed point type and its first subtype.</div>
<div class="paranum"><a name="p18">18/4</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0152-1.TXT">AI12-0152-1</A></I>} 
For a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
on a decimal fixed point subtype with a given <I>delta</I>, if it does 
not have a <SPAN Class="swiss"><A HREF="AA-3-5.html#S0036">range_constraint</A></SPAN>, 
then it specifies an implicit range &ndash;(10**<I>D</I>&ndash;1)*<I>delta</I> 
.. +(10**<I>D</I>&ndash;1)*<I>delta</I>, where <I>D</I> is the value 
of the <span class="insert4"><SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN></span><span class="delete4"><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">&nbsp;expression</A></SPAN></span>. 
<A NAME="I2132"></A>A <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
is <I>compatible</I> with a decimal fixed point subtype if the value 
of the <span class="insert4"><SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN></span><span class="delete4"><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">&nbsp;expression</A></SPAN></span> 
is no greater than the <I>digits</I> of the subtype, and if it specifies 
(explicitly or implicitly) a range that is compatible with the subtype. 
</div>
<div class="paranum"><a name="p18.a">18.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Except for the requirement 
that the <I>digits</I> specified be no greater than the <I>digits</I> 
of the subtype being constrained, a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
is essentially equivalent to a <SPAN Class="swiss"><A HREF="AA-3-5.html#S0036">range_constraint</A></SPAN>.</div>
<div class="paranum"><a name="p18.b">18.b</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">Consider the following 
example:&nbsp;</div>
<div class="paranum"><a name="p18.c">18.c</a></div>
<div class="SmallExamples"><B>type</B>&nbsp;D&nbsp;<B>is</B>&nbsp;<B>delta</B>&nbsp;0.01&nbsp;<B>digits</B>&nbsp;7&nbsp;<B>range</B>&nbsp;-0.00&nbsp;..&nbsp;9999.99;</div>
<div class="paranum"><a name="p18.d">18.d/1</a></div>
<div class="Annotations">The compatibility rule implies that the <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
&quot;<B>digits</B> 6&quot; specifies an implicit range of &quot;&ndash;9999.99 
.. 9999.99&quot;. Thus, &quot;<B>digits</B> 6&quot; is not compatible 
with the constraint of D, but &quot;<B>digits</B> 6 range 0.00 .. 9999.99&quot; 
is compatible.</div>
<div class="paranum"><a name="p18.e">18.e/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
A value of a scalar type belongs to a constrained subtype of the type 
if it belongs to the range of the subtype. Attributes like Digits and 
Delta have no effect on this fundamental rule. So the obsolescent forms 
of <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-J-3.html#S0367">delta_constraint</A></SPAN>s 
that are called &ldquo;accuracy constraints&rdquo; in RM83 don't really 
represent constraints on the values of the subtype, but rather primarily 
affect compatibility of the &ldquo;constraint&rdquo; with the subtype 
being &ldquo;constrained&rdquo;. In this sense, they might better be 
called &ldquo;subtype assertions&rdquo; rather than &ldquo;constraints&rdquo;.</div>
<div class="paranum"><a name="p18.f">18.f</a></div>
<div class="Annotations">Note that the <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
on a decimal fixed point subtype is a combination of an assertion about 
the <I>digits</I> of the subtype being further constrained, and a constraint 
on the range of the subtype being defined, either explicit or implicit. 
</div>
<div class="paranum"><a name="p19">19/4</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0152-1.TXT">AI12-0152-1</A></I>} 
<A NAME="I2133"></A>The elaboration of a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
consists of the elaboration of the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0036">range_constraint</A></SPAN>, 
if any. <A NAME="I2134"></A><A NAME="I2135"></A>If a <SPAN Class="swiss"><A HREF="AA-3-5.html#S0036">range_constraint</A></SPAN> 
is given, a check is made that the bounds of the range are both in the 
range &ndash;(10**<I>D</I>&ndash;1)*<I>delta</I> .. +(10**<I>D</I>&ndash;1)*<I>delta</I>, 
where <I>D</I> is the value of the (static) <span class="insert4"><SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN></span><span class="delete4"><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">&nbsp;expression</A></SPAN></span> 
given after the reserved word <B>digits</B>. <A NAME="I2136"></A>If this 
check fails, Constraint_Error is raised.&nbsp;</div>

<H4 Class="centered">Implementation Requirements</H4>
<div class="paranum"><a name="p20">20</a></div>
<div class="Normal">The implementation shall support at least 24 bits 
of precision (including the sign bit) for fixed point types.&nbsp;</div>
<div class="paranum"><a name="p20.a">20.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is sufficient to represent 
Standard.Duration with a <I>small</I> no more than 50 milliseconds.&nbsp;</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p21">21</a></div>
<div class="Normal">Implementations are permitted to support only <I>small</I>s 
that are a power of two. In particular, all decimal fixed point type 
declarations can be disallowed. Note however that conformance with the 
Information Systems Annex requires support for decimal <I>small</I>s, 
and decimal fixed point type declarations with <I>digits</I> up to at 
least 18.&nbsp;</div>
<div class="paranum"><a name="p21.a">21.a</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>The accuracy requirements 
for multiplication, division, and conversion (see <A HREF="AA-G-2-1.html">G.2.1</A>, 
&ldquo;<A HREF="AA-G-2-1.html">Model of Floating Point Arithmetic</A>&rdquo;) 
are such that support for arbitrary <I>small</I>s should be practical 
without undue implementation effort. Therefore, implementations should 
support fixed point types with arbitrary values for <I>small</I> (within 
reason). One reasonable limitation would be to limit support to fixed 
point types that can be converted to the most precise floating point 
type without loss of precision (so that Fixed_IO is implementable in 
terms of Float_IO).&nbsp;</div>
<div class="paranum"><a name="p22">22/5</a></div>
<div class="Notes" style="margin-bottom: 0.4em">NOTE&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0442-1.TXT">AI12-0442-1</A></I>} 
The <span class="insert5">specified bounds themselves can be outside 
the&nbsp;</span>base range of an ordinary fixed point type<span class="delete5">&nbsp;need not include the specified bounds themselves</span> so that the range 
specification can be given in a natural way, such as:&nbsp;</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="SmallIndented1Examples" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Fraction&nbsp;<B>is&nbsp;delta</B>&nbsp;2.0**(-15)&nbsp;<B>range</B>&nbsp;-1.0&nbsp;..&nbsp;1.0;<BR>
&nbsp;&nbsp;</div>
<div class="paranum"><a name="p24">24/5</a></div>
<div class="Notes">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0442-1.TXT">AI12-0442-1</A></I>} 
With 2's complement hardware, such a type <span class="insert5">would 
typically</span><span class="delete5">&nbsp;could</span> have a signed 16-bit 
representation, using 1 bit for the sign and 15 bits for fraction, resulting 
in a base range of &ndash;1.0 .. 1.0&ndash;2.0**(&ndash;15).&nbsp;</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p25">25</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of fixed 
point types and subtypes:</I>&nbsp;</div>
<div class="paranum"><a name="p26">26</a></div>
<div class="Examples"><B>type</B>&nbsp;Volt&nbsp;<B>is</B>&nbsp;<B>delta</B>&nbsp;0.125&nbsp;<B>range</B>&nbsp;0.0&nbsp;..&nbsp;255.0;</div>
<div class="paranum"><a name="p27">27</a></div>
<div class="Examples">&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>A&nbsp;pure&nbsp;fraction&nbsp;which&nbsp;requires&nbsp;all&nbsp;the&nbsp;available</I></SPAN><BR>
&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>space&nbsp;in&nbsp;a&nbsp;word&nbsp;can&nbsp;be&nbsp;declared&nbsp;as&nbsp;the&nbsp;type&nbsp;Fraction:</I></SPAN><BR>
<B>type</B>&nbsp;Fraction&nbsp;<B>is</B>&nbsp;<B>delta</B>&nbsp;System.Fine_Delta&nbsp;<B>range</B>&nbsp;-1.0&nbsp;..&nbsp;1.0;<BR>
&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Fraction'Last&nbsp;=&nbsp;1.0&nbsp;&ndash;&nbsp;System.Fine_Delta</I></SPAN></div>
<div class="paranum"><a name="p28">28</a></div>
<div class="Examples"><B>type</B>&nbsp;Money&nbsp;<B>is</B>&nbsp;<B>delta</B>&nbsp;0.01&nbsp;<B>digits</B>&nbsp;15;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>decimal&nbsp;fixed&nbsp;point</I></SPAN><BR>
<B>subtype</B>&nbsp;Salary&nbsp;<B>is</B>&nbsp;Money&nbsp;<B>digits</B>&nbsp;10;<BR>
&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Money'Last&nbsp;=&nbsp;10.0**13&nbsp;&ndash;&nbsp;0.01,&nbsp;Salary'Last&nbsp;=&nbsp;10.0**8&nbsp;&ndash;&nbsp;0.01</I></SPAN></div>

<H4 Class="centered">Inconsistencies With Ada 83</H4>
<div class="paranum"><a name="p28.a">28.a</a></div>
<div class="Annotations"><A NAME="I2137"></A>In Ada 95, S'Small always 
equals S'Base'Small, so if an implementation chooses a <I>small</I> for 
a fixed point type smaller than required by the <I>delta</I>, the value 
of S'Small in Ada 95 might not be the same as it was in Ada 83.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum"><a name="p28.b">28.b/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<A NAME="I2138"></A>Decimal fixed point types are new, though their capabilities 
are essentially similar to that available in Ada 83 with a fixed point 
type whose <I>small</I> equals its <I>delta</I> and both are a power 
of 10. However, in the Information Systems Annex, additional requirements 
are placed on the support of decimal fixed point types (e.g. a minimum 
of 18 digits of precision).&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<div class="paranum"><a name="p28.c">28.c</a></div>
<div class="Annotations">The syntax rules for <SPAN Class="swiss">fixed_point_constraint</SPAN> 
and <SPAN Class="swiss">fixed_accuracy_definition</SPAN> are removed. 
The syntax rule for <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0047">fixed_point_definition</A></SPAN> 
is new. A syntax rule for <SPAN Class="swiss"><A HREF="AA-J-3.html#S0367">delta_constraint</A></SPAN> 
is included in the Obsolescent features (to be compatible with Ada 83's 
<SPAN Class="swiss">fixed_point_constraint</SPAN>).&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p28.d">28.d/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00100.TXT">AI95-00100-01</A></I>} 
Added wording to define the machine numbers of fixed point types; this 
is needed by the static evaluation rules.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2012</H4>
<div class="paranum"><a name="p28.e">28.e/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0152-1.TXT">AI12-0152-1</A></I>} 
<span class="insert4"><A NAME="I2139"></A><B>Corrigendum:</B> Changed 
the syntax so that the value following <B>digits</B> in a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN>. 
This is compatible with one very unlikely exception: if the <B>digits</B> 
expression is a static expression of a modular type using an unparenthesized 
logical operator (like <B>and</B> or <B>or</B>). Parenthesizing the expression 
will make it legal in that case. The change is necessary to eliminate 
syntax ambguities in <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>s.</span> 
</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p28.f">28.f/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
<span class="insert4"><B>Corrigendum</B>:Added wording to define the 
expected type for a <SPAN Class="swiss"><A HREF="AA-3-5-9.html#S0050">digits_constraint</A></SPAN>. 
This was missing since Ada 95, but as it is obvious and unchanged from 
Ada 83, we don't consider it an incompatibility.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-5-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-5-10.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
