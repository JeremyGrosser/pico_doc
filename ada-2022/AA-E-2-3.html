<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Remote Call Interface Library Units</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>E.2.3 Remote Call Interface Library Units</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">[A remote call interface library unit can be used 
as an interface for remote procedure calls (RPCs) (or remote function 
calls) between active partitions.]&nbsp;</div>

<H4 Class="centered">Language Design Principles</H4>
<div class="paranum"><a name="p1.a">1.a</a></div>
<div class="Annotations">The restrictions governing a remote call interface 
library unit are intended to ensure that the values of the actual parameters 
in a remote call can be meaningfully sent between two active partitions. 
</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Indented1" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><A NAME="I10178"></A><A NAME="I10179"></A>The form 
of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Remote_Call_Interface is as follows:</span>&nbsp;</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
&nbsp;&nbsp;<span class="delete5"><B>pragma</B> <A NAME="I10180"></A><A NAME="I10181"></A>Remote_Call_Interface[(<I>library_unit_</I><A NAME="I10182"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>)];</span></div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Indented1" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5">The form of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
All_Calls_Remote is as follows:</span>&nbsp;</div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
&nbsp;&nbsp;<span class="delete5"><B>pragma</B> <A NAME="I10183"></A><A NAME="I10184"></A>All_Calls_Remote[(<I>library_unit_</I><A NAME="I10185"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>)];</span></div>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5"><A NAME="I10186"></A><A NAME="I10187"></A>A <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
All_Calls_Remote is a library unit pragma.</span>&nbsp;</div>
<div class="Normal"><span class="insert5"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
2 through 6 were moved to <A HREF="AA-J.html">Annex J</A>, &ldquo;<A HREF="AA-J.html">Obsolescent 
Features</A>&rdquo;.</I></SPAN></span>&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<A NAME="I10188"></A><A NAME="I10189"></A><A NAME="I10190"></A><A NAME="I10191"></A><A NAME="I10192"></A><span class="insert5">When 
the library unit aspect (see <A HREF="AA-13-1-1.html">13.1.1</A>)</span><span class="delete5">&nbsp;A</span><span class="delete5">&nbsp;<SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN></span> 
Remote_Call_Interface<span class="insert5"><A NAME="I10193"></A><A NAME="I10194"></A> 
of</span><span class="delete5">&nbsp;is used to specify that</span> a library 
unit is <span class="insert5">True, the library unit is&nbsp;</span>a <I>remote 
call interface (RCI)</I><span class="delete5">, namely that the Remote_Call_Interface 
aspect<A NAME="I10195"></A><A NAME="I10196"></A> of the library unit 
is True</span>. A subprogram declared in the visible part of such a library 
unit, or declared by such a library unit, is called a <I>remote subprogram</I>.</div>
<div class="paranum"><a name="p7.a">7.a/3</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Remote_Call_Interface: 
</B>Subprograms in a given package may be used in remote procedure calls.</div>
<div class="paranum"><a name="p8">8/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0206-1.TXT">AI05-0206-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
The declaration of an RCI library unit shall be preelaborable (see <A HREF="AA-10-2-1.html">10.2.1</A>), 
and shall depend semantically only upon declared pure <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0287">library_item</A></SPAN>s, 
shared passive library units, remote types library units, other remote 
call interface library units, or preelaborated normal library units that 
are mentioned only in private with clauses.</div>
<div class="paranum"><a name="p8.a">8.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
We say declared pure <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0287">library_item</A></SPAN> 
here, so that (all) limited views are allowed; those are not library 
units, but they are declared pure <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0287">library_item</A></SPAN>s. 
</div>
<div class="paranum"><a name="p9">9/1</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
In addition, the following restrictions apply to an RCI library unit: 
</div>
<div class="paranum"><a name="p10">10/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
its visible part shall not contain the declaration of a variable;&nbsp;</div>
<div class="paranum"><a name="p10.a">10.a/1</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
Remote call interface units do not provide remote data access. A shared 
passive package has to be used for that.&nbsp;</div>
<div class="paranum"><a name="p11">11/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
its visible part shall not contain the declaration of a limited type; 
</div>
<div class="paranum"><a name="p11.a">11.a/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00240.TXT">AI95-00240-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
We disallow the declaration of task and protected types, since calling 
an entry or a protected subprogram implicitly passes an object of a limited 
type (the target task or protected object). We disallow other limited 
types since we require that such types have available Read and Write 
attributes, but we certainly don't want the Read and Write attributes 
themselves to involve remote calls (thereby defeating their purpose of 
marshalling the value for remote calls).&nbsp;</div>
<div class="paranum"><a name="p12">12/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
its visible part shall not contain a nested <SPAN Class="swiss"><A HREF="AA-12-1.html#S0310">generic_declaration</A></SPAN>; 
</div>
<div class="paranum"><a name="p12.a">12.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is disallowed because the 
body of the nested generic would presumably have access to data inside 
the body of the RCI package, and if instantiated in a different partition, 
remote data access might result, which is not supported.&nbsp;</div>
<div class="paranum"><a name="p13">13/3</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
it shall not be, nor shall its visible part contain, the declaration 
of a subprogram for which aspect Inline is True;</div>
<div class="paranum"><a name="p13.1">13.1/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0283-1.TXT">AI12-0283-1</A></I>} 
<span class="insert5">it shall not be, nor shall its visible part contain, 
the declaration of a subprogram that is nonblocking (see <A HREF="AA-9-5.html">9.5</A>);</span></div>
<div class="paranum"><a name="p13.a">13.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B>All such 
subprograms are remote subprograms, and all calls on remote subprograms 
are considered potentially blocking, so they cannot statically be allowed 
in nonblocking code.</span>&nbsp;</div>
<div class="paranum"><a name="p13.b">13.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>The 
type declaration of a remote subprogram is illegal if the Nonblocking 
aspect is True, either implicitly by inheritance or by explicit specification.</span> 
</div>
<div class="paranum"><a name="p14">14/3</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00240.TXT">AI95-00240-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0101-1.TXT">AI05-0101-1</A></I>} 
it shall not be, nor shall its visible part contain, a subprogram (or 
access-to-subprogram) declaration whose profile has a parameter or result 
of a type that does not support external streaming (see <A HREF="AA-13-13-2.html">13.13.2</A>);</div>
<div class="paranum"><a name="p14.a">14.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0101-1.TXT">AI05-0101-1</A></I>} 
No anonymous access types support external streaming, so they are never 
allowed as parameters or results of RCI subprograms.&nbsp;</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Bulleted">any public child of the library unit shall be a 
remote call interface library unit.&nbsp;</div>
<div class="paranum"><a name="p15.a">15.a/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
No restrictions apply to the private part of an RCI package, and since 
a public child can &ldquo;see&rdquo; the private part of its parent, 
such a child must itself have a Remote_Call_Interface <span class="insert5">aspect</span><span class="delete5">&nbsp;pragma</span>, 
and be assigned to the same partition (see below).&nbsp;</div>
<div class="paranum"><a name="p15.b">15.b/5</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
We considered making the public child of an RCI package implicitly RCI, 
but it seemed better to require an explicit <span class="insert5">aspect</span><span class="delete5">&nbsp;pragma</span> 
to avoid any confusion.</div>
<div class="paranum"><a name="p15.c">15.c</a></div>
<div class="Annotations">Note that there is no need for a private child 
to be an RCI package, since it can only be seen from the body of its 
parent or its siblings, all of which are required to be in the same active 
partition.&nbsp;</div>
<div class="paranum"><a name="p15.1">15.1/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0002-1.TXT">AI12-0002-1</A></I>} 
<span class="insert5">Specification of a stream-oriented attribute is 
illegal in the specification of a remote call interface library unit. 
In addition to the places where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit.<A NAME="I10197"></A></span></div>
<div class="paranum"><a name="p15.d">15.d/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>This 
applies whether the stream-oriented attribute is specified with an <SPAN Class="swiss"><A HREF="AA-13-3.html#S0349">attribute_definition_clause</A></SPAN> 
or with an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN>.</span> 
</div>
<div class="paranum"><a name="p15.e">15.e/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B>Stream-oriented 
attributes are intended to be used locally (to marshall values), while 
subprograms in a remote call interface are intended to be used remotely. 
We resolve the conflict by banning the local use routines. The type should 
be included in a remote types package and imported into the remote call 
interface package.</span>&nbsp;</div>
<div class="paranum"><a name="p16">16/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="delete5">A pragma All_Calls_Remote</span><span class="delete5">sets 
the&nbsp;</span>All_Calls_Remote <span class="insert5">is a library unit</span><span class="delete5">&nbsp;representation</span> 
aspect<A NAME="I10198"></A><A NAME="I10199"></A><span class="delete5">&nbsp;of the</span><span class="delete5">&nbsp;library unit</span><span class="delete5">&nbsp;to which the pragma applies to the value True</span>. If the All_Calls_Remote 
aspect of a library unit is True, the library unit shall be a remote 
call interface.</div>
<div class="paranum"><a name="p16.a">16.a/4</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>All_Calls_Remote: 
</B>All <span class="insert4">indirect or dispatching remote subprogram 
calls, and all direct</span> remote <span class="insert4">subprogram</span><span class="delete4">&nbsp;procedure</span> 
calls<span class="insert4">,</span> should use the Partition Communication 
Subsystem<span class="delete4">, even if they are local</span>.</div>

<H4 Class="centered">Post-Compilation Rules</H4>
<div class="paranum"><a name="p17">17</a></div>
<div class="Normal">A remote call interface library unit shall be assigned 
to at most one partition of a given program. A remote call interface 
library unit whose parent is also an RCI library unit shall be assigned 
only to the same partition as its parent.&nbsp;</div>
<div class="paranum"><a name="p17.a">17.a/1</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
The declaration of an RCI unit, with a calling-stub body, is automatically 
included in all active partitions with compilation units that depend 
on it. However the whole RCI library unit, including its (non-stub) body, 
will only be in one of the active partitions.&nbsp;</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Normal"><A NAME="I10200"></A><A NAME="I10201"></A><A NAME="I10202"></A>Notwithstanding 
the rule given in <A HREF="AA-10-2.html">10.2</A>, a compilation unit 
in a given partition that semantically depends on the declaration of 
an RCI library unit, <I>needs</I> (in the sense of <A HREF="AA-10-2.html">10.2</A>) 
only the declaration of the RCI library unit, not the body, to be included 
in that same partition. [Therefore, the body of an RCI library unit is 
included only in the partition to which the RCI library unit is explicitly 
assigned.]</div>

<H4 Class="centered">Implementation Requirements</H4>
<div class="paranum"><a name="p19">19/4</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0031-1.TXT">AI12-0031-1</A></I>} 
<span class="insert4"></span>If aspect All_Calls_Remote is True for a 
given RCI library unit, then the implementation shall route any <span class="insert4">of 
the following calls</span><span class="delete4">&nbsp;call to a subprogram 
of the RCI unit from outside the declarative region of the unit</span> 
through the Partition Communication Subsystem (PCS); see <A HREF="AA-E-5.html">E.5</A><span class="insert4">:</span><span class="delete4">. 
Calls to such subprograms from within the declarative region of the unit 
are defined to be local and shall not go through the PCS.</span>&nbsp;</div>
<div class="paranum"><a name="p19.1">19.1/4</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0031-1.TXT">AI12-0031-1</A></I>} 
<span class="insert4">A direct call to a subprogram of the RCI unit from 
outside the declarative region of the unit;</span></div>
<div class="paranum"><a name="p19.2">19.2/4</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0031-1.TXT">AI12-0031-1</A></I>} 
<span class="insert4">An indirect call through a remote access-to-subprogram 
value that designates a subprogram of the RCI unit;</span></div>
<div class="paranum"><a name="p19.3">19.3/4</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0031-1.TXT">AI12-0031-1</A></I>} 
<span class="insert4">A dispatching call with a controlling operand designated 
by a remote access-to-class-wide value whose tag identifies a type declared 
in the RCI unit.</span>&nbsp;</div>
<div class="paranum"><a name="p19.a">19.a/5</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0031-1.TXT">AI12-0031-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
When this aspect is False (or not used), it is presumed that most implementations 
will<span class="insert4">&nbsp;not</span> make<span class="delete4">&nbsp;direct</span> 
calls<span class="insert4">&nbsp;through the PCS</span> if the call originates 
in the same partition as that of the RCI unit. When this aspect is True, 
all <span class="insert4">indirect or dispatching remote subprogram calls 
to the RCI unit</span><span class="insert5">,</span><span class="insert4">&nbsp;and all direct&nbsp;</span>calls from outside the subsystem rooted at the 
RCI unit<span class="insert5">,</span> are treated like calls from outside 
the partition, ensuring that the PCS is involved in all such calls (for 
debugging, redundancy, etc.).&nbsp;</div>
<div class="paranum"><a name="p19.b">19.b/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0031-1.TXT">AI12-0031-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
There is no point <span class="insert5">in forcing</span><span class="delete5">&nbsp;to 
force</span> local <span class="insert4">direct&nbsp;</span>calls (<span class="insert4">including</span><span class="delete4">&nbsp;or</span> 
calls from children) to go through the PCS, since on the target system<span class="delete4">,</span> 
these calls are always local, and all the units are in the same active 
partition.&nbsp;</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0444-1.TXT">AI12-0444-1</A></I>} 
An implementation <span class="insert5">may omit</span><span class="delete5">&nbsp;need 
not</span> support<span class="insert5">&nbsp;for</span> the Remote_Call_Interface 
<span class="delete5">pragma&nbsp;</span><span class="delete5">or&nbsp;</span>aspect 
<span class="insert5">or</span><span class="delete5">&nbsp;nor</span> the 
All_Calls_Remote <span class="insert5">aspect</span><span class="delete5">&nbsp;pragma</span>. 
[Explicit message-based communication between active partitions can be 
supported as an alternative to RPC.]&nbsp;</div>
<div class="paranum"><a name="p20.a">20.a/5</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
Of course, it is pointless to support the All_Calls_Remote <span class="insert5">aspect</span><span class="delete5">&nbsp;pragma</span> 
if the Remote_Call_Interface <span class="insert5">aspect</span><span class="delete5">&nbsp;pragma</span> 
(or some approximate equivalent) is not supported.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<div class="paranum"><a name="p20.b">20.b/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00240.TXT">AI95-00240-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0248-1.TXT">AI05-0248-1</A></I>} 
<A NAME="I10203"></A><B>Amendment Correction:</B> The wording was changed 
from &ldquo;user-specified&rdquo; to &ldquo;available&rdquo; read and 
write attributes. (This was then further changed, see below.) This means 
that a type with the attributes specified in the private part would originally 
have been allowed as a formal parameter of an RCI subprogram, but that 
is no longer allowed. This change was made so that the rules were consistent 
with the rules introduced for the Corrigendum for stream attributes; 
moreover, legality should not depend on the contents of the private part. 
</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p20.c">20.c/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0078">8652/0078</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00048.TXT">AI95-00048-01</A></I>} 
<B>Corrigendum:</B> Changed the wording to allow a library subprogram 
to be a remote call interface unit.</div>
<div class="paranum"><a name="p20.d">20.d/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00366.TXT">AI95-00366-01</A></I>} 
Changed the wording to use the newly defined term <I>type that supports 
external streaming</I>, so that various issues with access types in pure 
units and implicitly declared attributes for type extensions are properly 
handled.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2005</H4>
<div class="paranum"><a name="p20.e">20.e/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0101-1.TXT">AI05-0101-1</A></I>} 
<A NAME="I10204"></A><B>Correction:</B> Added a rule to ensure that function 
results are streamable; this was missing in previous versions of Ada. 
While programs that returned unstreamable types from RCI functions were 
legal, it is not clear what they could have done (as the results could 
not be marshalled). Thus, it seems unlikely that any real programs will 
be impacted by this change.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p20.f">20.f/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0206-1.TXT">AI05-0206-1</A></I>} 
<A NAME="I10205"></A>Added wording to allow private withs of preelaborated 
normal units in the specification of a remote call interface unit.</div>
<div class="paranum"><a name="p20.g">20.g/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
All_Calls_Remote is now a representation aspect, so it can be specified 
by an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN><span class="delete5">&nbsp;&mdash; although the pragma is still preferred by the Reference Manual.</span></div>
<div class="paranum"><a name="p20.h">20.h/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0243-1.TXT">AI05-0243-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
Remote_Call_Interface is now a categorization aspect, so it can be specified 
by an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN><span class="delete5">&nbsp;&mdash; although the pragma is still preferred by the Reference Manual.</span> 
</div>

<H4 Class="centered">Inconsistencies With Ada 2012</H4>
<div class="paranum"><a name="p20.i">20.i/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0031-1.TXT">AI12-0031-1</A></I>} 
<span class="insert4"><A NAME="I10206"></A><B>Corrigendum:</B> Redefined 
when indirect and dispatching remote calls have to be remote for a unit 
for which the aspect All_Calls_Remote is True. With the new rules, a 
local target called indirectly or via dispatching will be routed through 
the PCS, while that was not necessarily true in earlier Ada. If a program 
depended on local targets not being routed through the PCS even when 
All_Calls_Remote is used, then it might behave differently or fail in 
</span><span class="insert4"><span class="delete5">corrected&nbsp;</span></span><span class="insert4">Ada 
2012</span><span class="insert5">&nbsp;as corrected with this refinement</span><span class="insert4">. 
This is highly unlikely as the PCS is going to be able to communicate 
with any partition of the program, including the local partition.</span> 
</div>

<H4 Class="centered">Incompatibilities With Ada 2012</H4>
<div class="paranum"><a name="p20.j">20.j/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0002-1.TXT">AI12-0002-1</A></I>} 
<span class="insert5"><A NAME="I10207"></A><B>Correction:</B> Specifying 
user-defined stream-oriented attributes is now illegal in an RCI unit. 
If a program contains such attributes, they and their associated type 
will need to be moved to a remote types package (which is then imported 
into the RCI unit).</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p20.k">20.k/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0283-1.TXT">AI12-0283-1</A></I>} 
<span class="insert5">Added a rule to ensure that potentially blocking 
remote calls are not considered nonblocking.</span></div>
<div class="paranum"><a name="p20.l">20.l/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0417-1.TXT">AI12-0417-1</A></I>} 
<span class="insert5">The pragmas Remote_Call_Interface and All_Calls_Remote 
are now obsolescent.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
