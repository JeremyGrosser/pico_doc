<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Admission Policies</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>D.4.1 <span class="insert5">Admission Policies</span><span class="delete5"></span></H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5">[This subclause specifies a mechanism for a user 
to choose an admission policy. It also defines one such policy. Other 
policies are implementation defined.]</span></div>
<div class="paranum"><a name="p1.a.1">1.a.1/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation defined: 
</B></span><span class="insert5">Implementation-defined admission policies.</span></div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Indented1" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5">The form of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Admission_Policy is as follows:</span></div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Indented1">&nbsp;&nbsp;<span class="insert5"><B>pragma</B> 
<A NAME="I9850"></A><A NAME="I9851"></A>Admission_Policy (<I>policy_</I><A NAME="I9852"></A><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>);</span> 
</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5">The <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
shall be either FIFO_Spinning or an implementation-defined identifier.</span> 
</div>

<H4 Class="centered">Post-Compilation Rules</H4>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5">An Admission_Policy pragma is a configuration pragma.</span></div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5">An admission policy governs the order in which 
competing tasks are evaluated for acquiring the execution resource associated 
with a protected object. The admission policy is specified by an Admission_Policy 
pragma.</span></div>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5">One admission policy, FIFO_Spinning, is language 
defined. If FIFO_Spinning is in effect, and starting a protected action 
on a protected object involves busy-waiting, then calls are selected 
for acquiring the execution resource of the protected object in the order 
in which the busy-wait was initiated; otherwise the FIFO_Spinning policy 
has no effect. If no Admission_Policy pragma applies to any of the program 
units in the partition, the admission policy for that partition is implementation 
defined.</span></div>
<div class="paranum"><a name="p7.a">7.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
<span class="insert5">Busy-waiting might be used for protected objects 
that can be called from tasks running on other processors than the one 
the protected object is on. It is unnecessary if all of the tasks that 
can call a protected object are on the same processor as the object; 
in particular, it would not be used on a monoprocessor. Aspect CPU (see 
<A HREF="AA-D-16.html">D.16</A>) can be used to ensure that busy-waiting 
is not needed.</span>&nbsp;</div>
<div class="paranum"><a name="p7.b">7.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation Note: 
</B>A possible implementation for this policy would be to apply the abstraction 
of a ticketing system by assigning two sequence number values to each 
protected object. One sequence number represents the next available ticket 
number, and the other sequence number represents the ticket number currently 
being serviced by the protected object. The next available ticket number 
is incremented and assigned to a task when the task initiates a busy-wait 
for acquiring the execution resource associated with the protected object. 
The ticket number currently being serviced is incremented when a task 
releases this execution resource. As part of acquiring the execution 
resource, a task busy-waits until its assigned ticket number equals the 
protected object's value for the ticket number currently being serviced. 
While a task busy-waits, it monitors the active priority of the protected 
object in order to inherit any modifications to the protected object's 
active priority.</span>&nbsp;</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p8">8/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0444-1.TXT">AI12-0444-1</A></I>} 
<span class="insert5">Implementations are allowed to define other admission 
policies, but are not required to support specifying more than one admission 
policy per partition.</span></div>
<div class="paranum"><a name="p8.a">8.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B>This 
rule is in fact redundant, as <A HREF="AA-10-1-5.html">10.1.5</A> allows 
an implementation to limit the use of configuration pragmas to an empty 
environment. In that case, there would be no way to have multiple policies 
in a partition.</span>&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p8.b">8.b/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0276-1.TXT">AI12-0276-1</A></I>} 
<span class="insert5"><A NAME="I9853"></A>Admission Policies and the 
specific policy FIFO_Spinning are new.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
