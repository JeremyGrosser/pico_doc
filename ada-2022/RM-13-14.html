<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Freezing Rules</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13-13-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>13.14 Freezing Rules</H1>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal">This subclause defines a place in the program text 
where each declared entity becomes &ldquo;frozen&rdquo;. A use of an 
entity, such as a reference to it by name, or (for a type) an expression 
of the type, causes freezing of the entity in some contexts, as described 
below. The Legality Rules forbid certain kinds of uses of an entity in 
the region of text where it is frozen.&nbsp;</div>
<div class="paranum"><a name="p2">2</a></div>
<div class="Normal"><A NAME="I5979"></A><A NAME="I5980"></A>The <I>freezing</I> 
of an entity occurs at one or more places (<I>freezing points</I>) in 
the program text where the representation for the entity has to be fully 
determined. Each entity is frozen from its first freezing point to the 
end of the program text (given the ordering of compilation units defined 
in <A HREF="RM-10-1-4.html">10.1.4</A>).&nbsp;</div>
<div class="paranum"><a name="p2.1">2.1/3</a></div>
<div class="Normal">&nbsp;<A NAME="I5981"></A>This subclause also defines 
a place in the program text where the profile of each declared callable 
entity becomes <I>frozen</I>. A use of a callable entity causes freezing 
of its profile in some contexts, as described below. At the place where 
the profile of a callable entity becomes frozen, the entity itself becomes 
frozen.</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Normal"><A NAME="I5982"></A>The end of a <SPAN Class="swiss"><A HREF="RM-3-11.html#S0086">declarative_part</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-9-4.html#S0254">protected_body</A></SPAN>, 
or a declaration of a library package or generic library package, causes 
<I>freezing</I> of each entity and profile declared within it, as well 
as the entity itself in the case of the declaration of a library unit. 
<A NAME="I5983"></A>A noninstance <SPAN Class="swiss"><A HREF="RM-3-11.html#S0090">proper_body</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-10-1-3.html#S0297">body_stub</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-9-5-2.html#S0260">entry_body</A></SPAN> 
causes freezing of each entity and profile declared before it within 
the same <SPAN Class="swiss"><A HREF="RM-3-11.html#S0086">declarative_part</A></SPAN>. 
</div>
<div class="paranum"><a name="p4">4/1</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I5984"></A>A 
construct that (explicitly or implicitly) references an entity can cause 
the <I>freezing</I> of the entity, as defined by subsequent paragraphs. 
<A NAME="I5985"></A>At the place where a construct causes freezing, each 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>, <SPAN Class="swiss"><A HREF="RM-4-4.html#S0132">expression</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0095">implicit_dereference</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN> within 
the construct causes freezing:&nbsp;</div>
<div class="paranum"><a name="p5">5/3</a></div>
<div class="Bulleted"><A NAME="I5986"></A>The occurrence of a <SPAN Class="swiss"><A HREF="RM-12-3.html#S0315">generic_instantiation</A></SPAN> 
causes freezing, except that a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
which is a generic actual parameter whose corresponding generic formal 
parameter is a formal incomplete type (see <A HREF="RM-12-5-1.html">12.5.1</A>) 
does not cause freezing. In addition, if a parameter of the instantiation 
is defaulted, the <SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-12-6.html#S0339">default_name</A></SPAN> 
for that parameter causes freezing.</div>
<div class="paranum"><a name="p5.1">5.1/4</a></div>
<div class="Bulleted">At the occurrence of an <SPAN Class="swiss"><A HREF="RM-6-8.html#S0228">expression_function_declaration</A></SPAN> 
that is a completion, the return expression of the expression function 
causes freezing.</div>
<div class="paranum"><a name="p5.2">5.2/4</a></div>
<div class="Bulleted">At the occurrence of a renames-as-body whose <I>callable_entity_</I><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
denotes an expression function, the return expression of the expression 
function causes freezing.</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Bulleted"><A NAME="I5987"></A>The occurrence of an <SPAN Class="swiss"><A HREF="RM-3-3-1.html#S0032">object_declaration</A></SPAN> 
that has no corresponding completion causes freezing.&nbsp;</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Bulleted"><A NAME="I5988"></A>The declaration of a record 
extension causes freezing of the parent subtype.&nbsp;</div>
<div class="paranum"><a name="p7.1">7.1/2</a></div>
<div class="Bulleted">The declaration of a record extension, interface 
type, task unit, or protected unit causes freezing of any progenitor 
types specified in the declaration.&nbsp;</div>
<div class="paranum"><a name="p7.2">7.2/5</a></div>
<div class="Bulleted">At the freezing point of the entity associated 
with an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN>, 
any static expressions within the <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN> 
cause freezing, as do <SPAN Class="swiss"><A HREF="RM-4-4.html#S0132">expression</A></SPAN>s 
or <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>s in 
<SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0348">aspect_definition</A></SPAN>s 
for representation aspects, or operational aspects that have a corresponding 
operational attribute. Similarly, if an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0348">aspect_definition</A></SPAN> 
for an operational aspect, other than an assertion aspect, can affect 
the Name Resolution, Static Semantics, or Legality Rules of a subsequent 
construct, then any <SPAN Class="swiss"><A HREF="RM-4-4.html#S0132">expression</A></SPAN>s 
or <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>s within 
the <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0348">aspect_definition</A></SPAN> 
cause freezing at the freezing point of the associated entity. Any static 
expressions within an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN> 
also cause freezing at the end of the immediately enclosing declaration 
list. For the purposes of this rule, if there is no declared entity associated 
with an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN>, 
the freezing point is considered to occur immediately following the <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN>. 
</div>
<div class="paranum"><a name="p8">8/4</a></div>
<div class="Normal"><A NAME="I5989"></A>A static expression (other than 
within an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN>) 
causes freezing where it occurs. <A NAME="I5990"></A>An object name or 
nonstatic expression causes freezing where it occurs, unless the name 
or expression is part of a <SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="RM-12-6.html#S0339">default_name</A></SPAN>, 
the return expression of an expression function, an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN>, 
or a per-object expression of a component's <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0029">constraint</A></SPAN>, 
in which case, the freezing occurs later as part of another construct 
or at the freezing point of an associated entity.</div>
<div class="paranum"><a name="p8.1">8.1/3</a></div>
<div class="Normal">&nbsp;<A NAME="I5991"></A>An implicit call freezes the 
same entities and profiles that would be frozen by an explicit call. 
This is true even if the implicit call is removed via implementation 
permissions.</div>
<div class="paranum"><a name="p8.2">8.2/1</a></div>
<div class="Normal">&nbsp;<A NAME="I5992"></A>If an expression is implicitly 
converted to a type or subtype <I>T</I>, then at the place where the 
expression causes freezing, <I>T</I> is frozen.</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The following rules 
define which entities are frozen at the place where a construct causes 
freezing:&nbsp;</div>
<div class="paranum"><a name="p10">10/5</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I5993"></A>At 
the place where an expression causes freezing, the type of the expression 
is frozen, unless the expression is an enumeration literal used as a 
<SPAN Class="swiss"><A HREF="RM-3-8-1.html#S0074">discrete_choice</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="RM-4-3-3.html#S0113">array_aggregate</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-13-4.html#S0350">enumeration_representation_clause</A></SPAN> 
or as the <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0348">aspect_definition</A></SPAN> 
of a specification for aspect Default_Value.&nbsp;</div>
<div class="paranum"><a name="p10.1">10.1/4</a></div>
<div class="Bulleted"><A NAME="I5994"></A><A NAME="I5995"></A>At the 
place where a function call causes freezing, the profile of the function 
is frozen. Furthermore, if a parameter of the call is defaulted, the 
<SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN> 
for that parameter causes freezing. If the function call is to an expression 
function, the return expression of the expression function causes freezing.</div>
<div class="paranum"><a name="p10.2">10.2/4</a></div>
<div class="Bulleted"><A NAME="I5996"></A><A NAME="I5997"></A>At the 
place where a <SPAN Class="swiss"><A HREF="RM-12-3.html#S0315">generic_instantiation</A></SPAN> 
causes freezing of a callable entity, the profile of that entity is frozen 
unless the formal subprogram corresponding to the callable entity has 
a parameter or result of a formal untagged incomplete type; if the callable 
entity is an expression function, the return expression of the expression 
function causes freezing.</div>
<div class="paranum"><a name="p10.3">10.3/4</a></div>
<div class="Bulleted"><A NAME="I5998"></A>At the place where a use of 
the Access or Unchecked_Access attribute whose <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
denotes an expression function causes freezing, the return expression 
of the expression function causes freezing.</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I5999"></A>At 
the place where a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
causes freezing, the entity denoted by the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
is frozen, unless the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
of an expanded name; <A NAME="I6000"></A>at the place where an object 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> causes 
freezing, the nominal subtype associated with the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
is frozen.&nbsp;</div>
<div class="paranum"><a name="p11.1">11.1/1</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I6001"></A>At 
the place where an <SPAN Class="swiss"><A HREF="RM-4-1.html#S0095">implicit_dereference</A></SPAN> 
causes freezing, the nominal subtype associated with the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0095">implicit_dereference</A></SPAN> 
is frozen.</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I6002"></A>At 
the place where a <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN> 
causes freezing, the type of the <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN> 
is frozen.&nbsp;</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I6003"></A>At 
the place where an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0164">allocator</A></SPAN> 
causes freezing, the designated subtype of its type is frozen. If the 
type of the <SPAN Class="swiss"><A HREF="RM-4-8.html#S0164">allocator</A></SPAN> 
is a derived type, then all ancestor types are also frozen.&nbsp;</div>
<div class="paranum"><a name="p14">14/3</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I6004"></A>At 
the place where a profile is frozen, each subtype of the profile is frozen. 
If the corresponding callable entity is a member of an entry family, 
the index subtype of the family is frozen.&nbsp;</div>
<div class="paranum"><a name="p15">15/5</a></div>
<div class="Bulleted"><A NAME="I6005"></A>At the place where a subtype 
is frozen, its type is frozen. <A NAME="I6006"></A><A NAME="I6007"></A>At 
the place where a type is frozen, any expressions or <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>s 
within the full type definition cause freezing, other than those that 
occur within an <SPAN Class="swiss"><A HREF="RM-3-10.html#S0079">access_type_definition</A></SPAN> 
or an <SPAN Class="swiss"><A HREF="RM-3-10.html#S0084">access_definition</A></SPAN>; 
the first subtype, and any component subtypes, index subtypes, and parent 
subtype of the type are frozen as well. <A NAME="I6008"></A><A NAME="I6009"></A>For 
a specific tagged type, the corresponding class-wide type is frozen as 
well. For a class-wide type, the corresponding specific type is frozen 
as well.&nbsp;</div>
<div class="paranum"><a name="p15.1">15.1/3</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em">At the place where 
a specific tagged type is frozen, the primitive subprograms of the type 
are frozen. At the place where a type is frozen, any subprogram named 
in an <SPAN Class="swiss"><A HREF="RM-13-3.html#S0349">attribute_definition_clause</A></SPAN> 
for the type is frozen.&nbsp;</div>
<div class="paranum"><a name="p15.2">15.2/5</a></div>
<div class="Bulleted">At the place where a construct causes freezing, 
if the construct includes a check associated with some assertion aspect 
(independent of whether the check is enabled), or depends on the definition 
of some operational aspect as part of its Dynamic Semantics, any <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>s 
or <SPAN Class="swiss"><A HREF="RM-4-4.html#S0132">expression</A></SPAN>s 
in the <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0348">aspect_definition</A></SPAN> 
for the aspect cause freezing.&nbsp;</div>
<div class="paranum"><a name="p15.3">15.3/5</a></div>
<div class="Normal">&nbsp;&nbsp;Notwithstanding the rest of this subclause, freezing 
an incomplete view has no effect.<A NAME="I6010"></A></div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p16">16</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The explicit declaration 
of a primitive subprogram of a tagged type shall occur before the type 
is frozen (see <A HREF="RM-3-9-2.html">3.9.2</A>).&nbsp;</div>
<div class="paranum"><a name="p17">17</a></div>
<div class="Normal" style="margin-bottom: 0.4em">A type shall be completely 
defined before it is frozen (see <A HREF="RM-3-11-1.html">3.11.1</A> 
and <A HREF="RM-7-3.html">7.3</A>).</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The completion of a 
deferred constant declaration shall occur before the constant is frozen 
(see <A HREF="RM-7-4.html">7.4</A>).</div>
<div class="paranum"><a name="p19">19/1</a></div>
<div class="Normal" style="margin-bottom: 0.4em">An operational or representation 
item that directly specifies an aspect of an entity shall appear before 
the entity is frozen (see <A HREF="RM-13-1.html">13.1</A>).&nbsp;</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p20">20/2</a></div>
<div class="Normal">The tag (see <A HREF="RM-3-9.html">3.9</A>) of a 
tagged type T is created at the point where T is frozen.<A NAME="I6011"></A> 
</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13-13-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
