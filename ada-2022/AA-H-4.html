<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>High Integrity Restrictions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented4Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 9.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented4Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 9.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented2NestedBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented2NestedBulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.8em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-H-3-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-H-4-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>H.4 High Integrity Restrictions</H1>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0299-1.TXT">AI05-0299-1</A></I>} 
This subclause defines restrictions that can be used with pragma Restrictions 
(see <A HREF="AA-13-12.html">13.12</A>); these facilitate the demonstration 
of program correctness by allowing tailored versions of the run-time 
system.&nbsp;</div>
<div class="paranum"><a name="p1.a">1.a/3</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
Note that the restrictions are absolute. If a partition has 100 library 
units and just one needs Unchecked_Conversion, then the pragma cannot 
be used to ensure the other 99 units do not use Unchecked_Conversion. 
Note also that these are restrictions on all Ada code within a partition, 
and therefore it might not be evident from the specification of a package 
whether a restriction can be imposed.</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p2">2/2</a></div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00347.TXT">AI95-00347-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
</div>
<div class="paranum"><a name="p3">3/2</a></div>
<div class="Normal" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
The following <I>restriction_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s 
are language defined:</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><B>Tasking-related 
restriction:</B></div>
<div class="paranum"><a name="p5">5</a></div>
<div class="WideHanging-Term" style="margin-bottom: 0.9em"><A NAME="I10502"></A><A NAME="I10503"></A>No_Protected_Types 
</div><div class="WideHanging-Body"><br clear="left">
There are no declarations of protected types or protected objects.&nbsp;</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><B>Memory-management 
related restrictions:</B></div>
<div class="paranum"><a name="p7">7</a></div>
<div class="WideHanging-Term"><A NAME="I10504"></A><A NAME="I10505"></A>No_Allocators 
</div><div class="WideHanging-Body">
There are no occurrences of an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">allocator</A></SPAN>.</div>
<div class="paranum"><a name="p8">8/1</a></div>
<div class="WideHanging-Term">{<I><A HREF="defect1.html#8652/0042">8652/0042</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00130.TXT">AI95-00130</A></I>} 
<A NAME="I10506"></A><A NAME="I10507"></A>No_Local_Allocators&nbsp;</div><div class="WideHanging-Body"><br clear="left">
<SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">Allocator</A></SPAN>s 
are prohibited in subprograms, generic subprograms, tasks, and entry 
bodies.&nbsp;</div>
<div class="paranum"><a name="p8.a">8.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Thus <SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">allocator</A></SPAN>s 
are permitted only in expressions whose evaluation can only be performed 
before the main subprogram is invoked.&nbsp;</div>
<div class="paranum"><a name="p8.b">8.b/1</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0042">8652/0042</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00130.TXT">AI95-00130</A></I>} 
</div>
<div class="paranum"><a name="p8.1">8.1/3</a></div>
<div class="WideHanging-Term">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0152-1.TXT">AI05-0152-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
<A NAME="I10508"></A><A NAME="I10509"></A>No_Anonymous_Allocators&nbsp;</div><div class="WideHanging-Body"><br clear="left">
There are no <SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">allocator</A></SPAN>s 
of anonymous access types.</div>
<div class="paranum"><a name="p8.2">8.2/3</a></div>
<div class="WideHanging-Term">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0190-1.TXT">AI05-0190-1</A></I>} 
<A NAME="I10510"></A><A NAME="I10511"></A>No_Coextensions&nbsp;</div><div class="WideHanging-Body"><br clear="left">
There are no coextensions. See <A HREF="AA-3-10-2.html">3.10.2</A>.</div>
<div class="paranum"><a name="p8.3">8.3/3</a></div>
<div class="WideHanging-Term">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0190-1.TXT">AI05-0190-1</A></I>} 
<A NAME="I10512"></A><A NAME="I10513"></A>No_Access_Parameter_Allocators 
</div><div class="WideHanging-Body"><br clear="left">
<SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">Allocator</A></SPAN>s 
are not permitted as the actual parameter to an access parameter. See 
<A HREF="AA-6-1.html">6.1</A>.</div>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="WideHanging-Term"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="WideHanging-Term" style="margin-bottom: 0.9em">Immediate_Reclamation 
</div><div class="WideHanging-Body"><br clear="left">
Except for storage occupied by objects created by <SPAN Class="swiss"><A HREF="AA-4-8.html#S0164">allocator</A></SPAN>s 
and not deallocated via unchecked deallocation, any storage reserved 
at run time for an object is immediately reclaimed when the object no 
longer exists. <A NAME="I10514"></A><A NAME="I10515"></A></div>
<div class="paranum"><a name="p10.a">10.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Immediate reclamation would 
apply to storage created by the compiler, such as for a return value 
from a function whose size is not known at the call site.&nbsp;</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><B>Exception-related 
restriction:</B></div>
<div class="paranum"><a name="p12">12/5</a></div>
<div class="WideHanging-Term" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0344-1.TXT">AI12-0344-1</A></I>} 
<A NAME="I10516"></A><A NAME="I10517"></A>No_Exceptions&nbsp;</div><div class="WideHanging-Body"><br clear="left">
<SPAN Class="swiss"><A HREF="AA-11-3.html#S0308">Raise_statement</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-11-2.html#S0305">exception_handler</A></SPAN>s 
are not allowed. No language-defined runtime checks are generated; however, 
a runtime check performed automatically by the hardware is permitted.<span class="insert5">&nbsp;The callable entity associated with a <SPAN Class="swiss"><A HREF="AA-5-5-3.html#S0185">procedural_iterator</A></SPAN> 
(see <A HREF="AA-5-5-3.html">5.5.3</A>) is considered to not allow exit, 
independent of the value of its Allows_Exit aspect.</span></div>
<div class="paranum"><a name="p12.a">12.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>This restriction mirrors 
a method of working that is quite common in the safety area. The programmer 
is required to show that exceptions cannot be raised. Then a simplified 
run-time system is used without exception handling. However, some hardware 
checks may still be enforced. If the software check would have failed, 
or if the hardware check actually fails, then the execution of the program 
is unpredictable. There are obvious dangers in this approach, but it 
is similar to programming at the assembler level.</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><B>Other restrictions:</B></div>
<div class="paranum"><a name="p14">14</a></div>
<div class="WideHanging-Term"><A NAME="I10518"></A><A NAME="I10519"></A>No_Floating_Point 
</div><div class="WideHanging-Body"><br clear="left">
Uses of predefined floating point types and operations, and declarations 
of new floating point types, are not allowed.&nbsp;</div>
<div class="paranum"><a name="p14.a">14.a/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
The intention is to avoid the use of floating point hardware at run time, 
but this is expressed in language terms. It is conceivable that floating 
point is used implicitly in some contexts, say fixed point type conversions 
of high accuracy. However, the Implementation Requirements below make 
it clear that the restriction would apply to the &ldquo;run-time system&rdquo; 
and hence not be allowed. This restriction could be used to inform a 
compiler that a variant of the architecture is being used which does 
not have floating point instructions.</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="WideHanging-Term"><A NAME="I10520"></A><A NAME="I10521"></A>No_Fixed_Point 
</div><div class="WideHanging-Body"><br clear="left">
Uses of predefined fixed point types and operations, and declarations 
of new fixed point types, are not allowed.&nbsp;</div>
<div class="paranum"><a name="p15.a">15.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>This restriction would have 
the side effect of prohibiting the <SPAN Class="swiss"><A HREF="AA-9-6.html#S0268">delay_relative_statement</A></SPAN>. 
As with the No_Floating_Point restriction, this might be used to avoid 
any question of rounding errors. Unless an Ada run-time is written in 
Ada, it seems hard to rule out implicit use of fixed point, since at 
the machine level, fixed point is virtually the same as integer arithmetic.</div>
<div class="paranum"><a name="p16">16/2</a></div>
<div class="WideHanging-Term"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
</div>
<div class="paranum"><a name="p17">17</a></div>
<div class="WideHanging-Term">No_Access_Subprograms&nbsp;</div><div class="WideHanging-Body"><br clear="left">
The declaration of access-to-subprogram types is not allowed. <A NAME="I10522"></A><A NAME="I10523"></A></div>
<div class="paranum"><a name="p17.a.1">17.a.1/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Most critical applications 
would require some restrictions or additional validation checks on uses 
of access-to-subprogram types. If the application does not require the 
functionality, then this restriction provides a means of ensuring the 
design requirement has been satisfied. The same applies to several of 
the following restrictions, and to restriction No_Dependence =&gt; Ada.Unchecked_Conversion. 
</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="WideHanging-Term"><A NAME="I10524"></A><A NAME="I10525"></A>No_Unchecked_Access 
</div><div class="WideHanging-Body"><br clear="left">
The <A NAME="I10526"></A><A NAME="I10527"></A>Unchecked_Access attribute 
is not allowed.</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="WideHanging-Term"><A NAME="I10528"></A><A NAME="I10529"></A>No_Dispatch 
</div><div class="WideHanging-Body">
Occurrences of T'Class are not allowed, for any (tagged) subtype T.</div>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00285.TXT">AI95-00285-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0318-1.TXT">AI12-0318-1</A></I>} 
<A NAME="I10530"></A><A NAME="I10531"></A>No_IO&nbsp;</div><div class="WideHanging-Body"><br clear="left">
Semantic dependence on any of the library units Sequential_IO, Direct_IO, 
Text_IO, Wide_Text_IO, Wide_Wide_Text_IO, <span class="delete5">or&nbsp;</span>Stream_IO<span class="insert5">, 
or Directories</span> is not allowed.&nbsp;</div>
<div class="paranum"><a name="p20.a">20.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Excluding the input-output 
facilities of an implementation may be needed in those environments which 
cannot support the supplied functionality. A program in such an environment 
is likely to require some low level facilities or a call on a non-Ada 
feature.</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="WideHanging-Term"><A NAME="I10532"></A><A NAME="I10533"></A>No_Delay 
</div><div class="WideHanging-Body">
<SPAN Class="swiss"><A HREF="AA-9-6.html#S0266">Delay_Statement</A></SPAN>s 
and semantic dependence on package Calendar are not allowed.&nbsp;</div>
<div class="paranum"><a name="p21.a">21.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This implies that <SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0274">delay_alternative</A></SPAN>s 
in a <SPAN Class="swiss"><A HREF="AA-9-7.html#S0269">select_statement</A></SPAN> 
are prohibited.</div>
<div class="paranum"><a name="p21.b">21.b</a></div>
<div class="Annotations">The purpose of this restriction is to avoid 
the need for timing facilities within the run-time system.</div>
<div class="paranum"><a name="p22">22</a></div>
<div class="WideHanging-Term"><A NAME="I10534"></A><A NAME="I10535"></A>No_Recursion 
</div><div class="WideHanging-Body">
As part of the execution of a subprogram, the same subprogram is not 
invoked.</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="WideHanging-Term"><A NAME="I10536"></A><A NAME="I10537"></A>No_Reentrancy 
</div><div class="WideHanging-Body">
During the execution of a subprogram by a task, no other task invokes 
the same subprogram.</div>
<div class="paranum"><a name="p23.1">23.1/5</a></div>
<div class="WideHanging-Term">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0079-3.TXT">AI12-0079-3</A></I>} 
<span class="insert5"><A NAME="I10538"></A><A NAME="I10539"></A>No_Unspecified_Globals</span></div><div class="WideHanging-Body"><br clear="left">
<span class="insert5">No library-level entity shall have a Global aspect 
of Unspecified, either explicitly or by default. No library-level entity 
shall have a Global'Class aspect of Unspecified, explicitly or by default, 
if it is used as part of a dispatching call.</span></div>
<div class="paranum"><a name="p23.a">23.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>Global'Class 
need not be specified on an operation if there are no dispatching calls 
to the operation, or if all of the dispatching calls are covered by <SPAN Class="swiss"><A HREF="AA-H-7-1.html#S0366">dispatching_operation_specifier</A></SPAN>s 
for operations with such calls (see <A HREF="AA-H-7.html">H.7</A>).</span> 
</div>
<div class="paranum"><a name="p23.2">23.2/5</a></div>
<div class="WideHanging-Term" style="margin-bottom: 0.4em">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0079-3.TXT">AI12-0079-3</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0380-1.TXT">AI12-0380-1</A></I>} 
<span class="insert5"><A NAME="I10540"></A><A NAME="I10541"></A>No_Hidden_Indirect_Globals</span></div><div class="WideHanging-Body"><br clear="left">
<span class="insert5">When within a context where an applicable global 
aspect is neither Unspecified nor <B>in out all</B>, any execution within 
such a context does neither of the following:</span></div>
<div class="paranum"><a name="p23.3">23.3/5</a></div>
<div class="Indented4Bulleted"><span class="insert5">Update (or return 
a writable reference to) a variable that is reachable via a sequence 
of zero or more dereferences of access-to-object values from a parameter 
of a visibly access-to-constant type, from a part of a non-access-type 
formal parameter of mode <B>in</B> (after any <B>overriding</B> &ndash; 
see <A HREF="AA-H-7.html">H.7</A>), or from a global that has mode <B>in</B> 
or is not within the applicable global variable set, unless the initial 
dereference is of a part of a formal parameter or global that is visibly 
of an access-to-variable type;</span></div>
<div class="paranum"><a name="p23.4">23.4/5</a></div>
<div class="Indented4Bulleted"><span class="insert5">Read (or return 
a readable reference to) a variable that is reachable via a sequence 
of zero or more dereferences of access-to-object values from a global 
that is not within the applicable global variable set, unless the initial 
dereference is of a part of a formal parameter or global that is visibly 
of an access-to-object type.</span>&nbsp;</div>
<div class="paranum"><a name="p23.b">23.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>The 
above two rules specify that any hidden indirect references are covered 
by the global or formal parameter modes that apply, and are <I>not</I> 
subject to alternative paths of access (such as aliasing) that could 
result in conflicts. On the other hand, any visible access-to-object 
parts are allowed to designate objects that are accessible via other 
means, and side-effects on such objects are permitted if the value is 
visibly of an access-to-variable type. Such effects do not need to be 
covered by the applicable global aspect(s), but are rather for the caller 
to worry about.</span>&nbsp;</div>
<div class="paranum"><a name="p23.5">23.5/5</a></div>
<div class="WideHanging-Body" style="margin-bottom: 0.4em"><span class="insert5">For 
the purposes of the above rules:</span></div>
<div class="paranum"><a name="p23.6">23.6/5</a></div>
<div class="Indented4Bulleted"><span class="insert5">a part of an object 
is <I>visibly of an access type</I><A NAME="I10542"></A> if the type 
of the object is declared immediately within the visible part of a package 
specification, and at the point of declaration of the type the part is 
visible and of an access type;</span></div>
<div class="paranum"><a name="p23.7">23.7/5</a></div>
<div class="Indented4Bulleted"><span class="insert5">a function <I>returns 
a writable reference to V</I><A NAME="I10543"></A> if it returns a result 
with a part that is visibly of an access-to-variable type designating 
<I>V</I>; similarly, a function <I>returns a readable reference to V</I><A NAME="I10544"></A> 
if it returns a result with a part that is visibly of an access-to-constant 
type designating <I>V</I>;</span></div>
<div class="paranum"><a name="p23.8">23.8/5</a></div>
<div class="Indented4Bulleted"><span class="insert5">if an applicable 
global variable set includes a package name, and the collection of some 
pool-specific access type (see <A HREF="AA-7-6-1.html">7.6.1</A>) is 
implicitly declared in a part of the declarative region of the package 
included within the global variable set, then all objects allocated from 
that collection are considered included within the global variable set.</span> 
</div>
<div class="paranum"><a name="p23.9">23.9/5</a></div>
<div class="WideHanging-Body"><span class="insert5">The consequences 
of violating the No_Hidden_Indirect_Globals restriction is implementation-defined. 
Any aspects or other means for identifying such violations prior to or 
during execution are implementation-defined.</span>&nbsp;</div>
<div class="paranum"><a name="p23.b.1">23.b.1/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation defined: 
</B></span><span class="insert5">The consequences of violating No_Hidden_Indirect_Globals.</span></div>
<div class="paranum"><a name="p23.c">23.c/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B>We 
do not make violations automatically erroneous, because if the implementation 
chooses to never fully trust it, there is nothing erroneous that can 
happen. If an implementation chooses to trust the restriction, and performs 
some optimization as a result of the restriction, the implementation 
would define such a violation as erroneous. Such an implementation might 
also endeavor to detect most violations, perhaps by providing additional 
aspects, thereby reducing the situations which result in erroneous execution. 
Implementations might detect some but not all violations of the restrictions. 
Implementations that completely ignore the restriction should treat the 
restriction as an unsupported capability of <A HREF="AA-H.html">Annex 
H</A>, &ldquo;<A HREF="AA-H.html">High Integrity Systems</A>&rdquo;.</span> 
</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p23.10">23.10/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0020-1.TXT">AI12-0020-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0340-1.TXT">AI12-0340-1</A></I>} 
<span class="insert5">The following <I>restriction_parameter_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
is language defined:</span></div>
<div class="paranum"><a name="p23.11">23.11/5</a></div>
<div class="WideHanging-Term">&nbsp;&nbsp;&nbsp;<span class="insert5"><A NAME="I10545"></A><A NAME="I10546"></A>Max_Image_Length</span></div><div class="WideHanging-Body"><br clear="left">
<span class="insert5">Specifies the maximum length for the result of 
an Image, Wide_Image, or Wide_Wide_Image attribute. Violation of this 
restriction results in the raising of Program_Error at the point of the 
invocation of an image attribute.<A NAME="I10547"></A> <A NAME="I10548"></A><A NAME="I10549"></A></span></div>

<H4 Class="centered">Implementation Requirements</H4>
<div class="paranum"><a name="p23.12">23.12/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
An implementation of this Annex shall support:&nbsp;</div>
<div class="paranum"><a name="p23.13">23.13/5</a></div>
<div class="Bulleted">the restrictions defined in this subclause; and</div>
<div class="paranum"><a name="p23.14">23.14/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0189-1.TXT">AI05-0189-1</A></I>} 
the following restrictions defined in <A HREF="AA-D-7.html">D.7</A>: 
No_Task_Hierarchy, No_Abort_Statement, No_Implicit_Heap_Allocation, No_Standard_Allocators_After_Elaboration; 
and</div>
<div class="paranum"><a name="p23.15">23.15/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00347.TXT">AI95-00347-01</A></I>} 
the <B>pragma</B> Profile(Ravenscar); and&nbsp;</div>
<div class="paranum"><a name="p23.d">23.d/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00347.TXT">AI95-00347-01</A></I>} 
The reference to pragma Profile(Ravenscar) is intended to show that properly 
restricted tasking is appropriate for use in high integrity systems. 
The Ada 95 Annex seemed to suggest that tasking was inappropriate for 
such systems.&nbsp;</div>
<div class="paranum"><a name="p23.16">23.16/5</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em">the following uses 
of <I>restriction_parameter_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s 
defined in <A HREF="AA-D-7.html">D.7</A>[, which are checked prior to 
program execution]:&nbsp;</div>
<div class="paranum"><a name="p23.17">23.17/5</a></div>
<div class="Indented2NestedBulleted">Max_Task_Entries =&gt; 0,</div>
<div class="paranum"><a name="p23.18">23.18/5</a></div>
<div class="Indented2NestedBulleted">Max_Asynchronous_Select_Nesting 
=&gt; 0, and</div>
<div class="paranum"><a name="p23.19">23.19/5</a></div>
<div class="Indented2NestedBulleted">Max_Tasks =&gt; 0.&nbsp;</div>
<div class="paranum"><a name="p23.20">23.20/5</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0020-1.TXT">AI12-0020-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0340-1.TXT">AI12-0340-1</A></I>} 
<span class="insert5">If a Max_Image_Length restriction applies to any 
compilation unit in the partition, then for any subtype S, S'Image, S'Wide_Image, 
and S'Wide_Wide_Image shall be implemented within that partition without 
any dynamic allocation.</span></div>
<div class="paranum"><a name="p23.e">23.e/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation Note: 
</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0340-1.TXT">AI12-0340-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0384-2.TXT">AI12-0384-2</A></I>} 
<span class="insert5">This can be accomplished by using an object of 
the Text_Buffers.Bounded.Buffer_Type with the maximum characters as specified 
in the Max_Image_Length restriction, with a raise of Program_Error afterward 
if Text_Truncated (Buf) is True after the call on Put_Image (Buf, Arg).</span> 
</div>
<div class="paranum"><a name="p24">24/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0263-1.TXT">AI05-0263-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0272-1.TXT">AI05-0272-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0308-1.TXT">AI12-0308-1</A></I>} 
If an implementation supports <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Restrictions for a particular argument, then except for the restrictions 
<span class="delete5">No_Unchecked_Deallocation, No_Unchecked_Conversion, 
</span>No_Access_Subprograms, No_Unchecked_Access, No_Specification_of_Aspect, 
No_Use_of_Attribute, No_Use_of_Pragma, <span class="insert5">No_Dependence 
=&gt; Ada.Unchecked_Conversion,&nbsp;</span>and <span class="delete5">the 
equivalent use of</span> No_Dependence<span class="insert5">&nbsp;=&gt; Ada.Unchecked_Deallocation</span>, 
the associated restriction applies to the run-time system.&nbsp;</div>
<div class="paranum"><a name="p24.a">24.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>Permission is granted for the 
run-time system to use the specified otherwise-restricted features, since 
the use of these features may simplify the run-time system by allowing 
more of it to be written in Ada.&nbsp;</div>
<div class="paranum"><a name="p24.b">24.b</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The restrictions that are 
applied to the partition are also applied to the run-time system. For 
example, if No_Floating_Point is specified, then an implementation that 
uses floating point for implementing the delay statement (say) would 
require that No_Floating_Point is only used in conjunction with No_Delay. 
It is clearly important that restrictions are effective so that Max_Tasks=0 
does imply that tasking is not used, even implicitly (for input-output, 
say).</div>
<div class="paranum"><a name="p24.c">24.c</a></div>
<div class="Annotations">An implementation of tasking could be produced 
based upon a run-time system written in Ada in which the rendezvous was 
controlled by protected types. In this case, No_Protected_Types could 
only be used in conjunction with Max_Task_Entries=0. Other implementation 
dependencies could be envisaged.</div>
<div class="paranum"><a name="p24.d">24.d</a></div>
<div class="Annotations">If the run-time system is not written in Ada, 
then the wording needs to be applied in an appropriate fashion.</div>
<div class="paranum"><a name="p24.e">24.e/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0263-1.TXT">AI05-0263-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0308-1.TXT">AI12-0308-1</A></I>} 
<span class="delete5">&quot;the equivalent use of No_Dependence&quot; 
refers to <TT>No_Dependence =&gt; Ada.Unchecked_Conversion</TT> and the 
like, not all uses of No_Dependence.</span></div>

<H4 Class="centered">Documentation Requirements</H4>
<div class="paranum"><a name="p25">25</a></div>
<div class="Normal">If a pragma Restrictions(No_Exceptions) is specified, 
the implementation shall document the effects of all constructs where 
language-defined checks are still performed automatically (for example, 
an overflow check performed by the processor).&nbsp;</div>
<div class="paranum"><a name="p25.a">25.a/2</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN></div>
<div class="paranum"><a name="p25.b">25.b/2</a></div>
<div class="Annotations"><B>Documentation Requirement:&nbsp;</B>If a pragma 
Restrictions(No_Exceptions) is specified, the effects of all constructs 
where language-defined checks are still performed.</div>
<div class="paranum"><a name="p25.c">25.c/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
The documentation requirements here are quite difficult to satisfy. One 
method is to review the object code generated and determine the checks 
that are still present, either explicitly, or implicitly within the architecture. 
As another example from that of overflow, consider the question of dereferencing 
a null pointer. This could be undertaken by a memory access trap when 
checks are performed. When checks are suppressed via the argument No_Exceptions, 
it would not be necessary to have the memory access trap mechanism enabled.</div>

<H4 Class="centered">Erroneous Execution</H4>
<div class="paranum"><a name="p26">26</a></div>
<div class="Normal"><A NAME="I10550"></A>Program execution is erroneous 
if pragma Restrictions(No_Exceptions) has been specified and the conditions 
arise under which a generated language-defined runtime check would fail. 
</div>
<div class="paranum"><a name="p26.a">26.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The situation here is very 
similar to the application of pragma Suppress. Since users are removing 
some of the protection the language provides, they had better be careful!</div>
<div class="paranum"><a name="p27">27</a></div>
<div class="Normal"><A NAME="I10551"></A>Program execution is erroneous 
if pragma Restrictions(No_Recursion) has been specified and a subprogram 
is invoked as part of its own execution, or if pragma Restrictions(No_Reentrancy) 
has been specified and during the execution of a subprogram by a task, 
another task invokes the same subprogram.&nbsp;</div>
<div class="paranum"><a name="p27.a">27.a/3</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
In practice, many implementations might not exploit the absence of recursion 
or need for reentrancy, in which case the program execution would be 
unaffected by the use of recursion or reentrancy, even though the program 
is still formally erroneous.</div>
<div class="paranum"><a name="p27.b">27.b/2</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN></div>
<div class="paranum"><a name="p28">28/5</a></div>
<div class="Notes">NOTE&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0440-1.TXT">AI12-0440-1</A></I>} 
Uses of <I>restriction_parameter_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
No_Dependence defined in <A HREF="AA-13-12-1.html">13.12.1</A>: No_Dependence 
=&gt; Ada.Unchecked_Deallocation and No_Dependence =&gt; Ada.Unchecked_Conversion 
<span class="insert5">can</span><span class="delete5">&nbsp;may</span> be 
appropriate for high-integrity systems. Other uses of No_Dependence can 
also be appropriate for high-integrity systems.&nbsp;</div>
<div class="paranum"><a name="p28.a">28.a/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The specific mention of these 
two uses is meant to replace the identifiers now banished to <A HREF="AA-J-13.html">J.13</A>, 
&ldquo;<A HREF="AA-J-13.html">Dependence Restriction Identifiers</A>&rdquo;.</div>
<div class="paranum"><a name="p28.b">28.b/2</a></div>
<div class="Annotations">Restriction No_Dependence =&gt; Ada.Unchecked_Deallocation 
would be useful in those contexts in which heap storage is needed on 
program start-up, but need not be increased subsequently. The danger 
of a dangling pointer can therefore be avoided.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p28.c">28.c/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0042">8652/0042</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00130.TXT">AI95-00130-01</A></I>} 
<A NAME="I10552"></A>No_Local_Allocators no longer prohibits generic 
instantiations.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p28.d">28.d/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00285.TXT">AI95-00285-01</A></I>} 
Wide_Wide_Text_IO (which is new) is added to the No_IO restriction.</div>
<div class="paranum"><a name="p28.e">28.e/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00347.TXT">AI95-00347-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0299-1.TXT">AI05-0299-1</A></I>} 
The title of this subclause was changed to match the change to the Annex 
title. Pragma Profile(Ravenscar) is part of this annex.</div>
<div class="paranum"><a name="p28.f">28.f/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
Restriction No_Dependence is used instead of special <I>restriction_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s. 
The old names are banished to Obsolescent Features (see <A HREF="AA-J-13.html">J.13</A>).</div>
<div class="paranum"><a name="p28.g">28.g/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00394.TXT">AI95-00394-01</A></I>} 
The bizarre wording &ldquo;apply in this Annex&rdquo; (which no one quite 
can explain the meaning of) is banished.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p28.h">28.h/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0152-1.TXT">AI05-0152-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0190-1.TXT">AI05-0190-1</A></I>} 
<A NAME="I10553"></A>Restrictions No_Anonymous_Allocators, No_Coextensions, 
and No_Access_Parameter_Allocators are new.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p28.i">28.i/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0189-1.TXT">AI05-0189-1</A></I>} 
New restriction No_Standard_Allocators_After_Elaboration is added to 
the list of restrictions that are required by this annex.</div>
<div class="paranum"><a name="p28.j">28.j/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0263-1.TXT">AI05-0263-1</A></I>} 
<B>Correction:</B> Ada 2005 restriction No_Dependence is added where 
needed (this was missed in Ada 2005).</div>
<div class="paranum"><a name="p28.k">28.k/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0272-1.TXT">AI05-0272-1</A></I>} 
Restrictions against individual aspects, pragmas, and attributes do not 
apply to the run-time system, in order that an implementation can use 
whatever aspects, pragmas, and attributes are needed to do the job. For 
instance, attempting to write a run-time system for Linux that does not 
use the Import aspect would be very difficult and probably is not what 
the user is trying to prevent anyway.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2012</H4>
<div class="paranum"><a name="p28.l">28.l/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0318-1.TXT">AI12-0318-1</A></I>} 
<span class="insert5"><A NAME="I10554"></A><B>Correction:</B> Restriction 
No_IO now excludes use of Ada.Directories. If a program using No_IO used 
Ada.Directories, it would be legal in Ada 2012 and illegal in Ada 2022. 
However, given the role of Ada.Directories as a support package for the 
other packages that are excluded by No_IO, it seems unlikely that any 
use of the restriction would use this package (and it's possible that 
implementations wouldn't support its use with No_IO anyway).</span>&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p28.m">28.m/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0020-1.TXT">AI12-0020-1</A></I>} 
<span class="insert5"><A NAME="I10555"></A>Restriction Max_Image_Length 
is new.</span></div>
<div class="paranum"><a name="p28.n">28.n/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0079-3.TXT">AI12-0079-3</A></I>} 
<span class="insert5">Restrictions No_Unspecified_Globals and No_Hidden_Indirect_Globals 
are new.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-H-3-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-H-4-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
