<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Binary Adding Operators</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left:  10.2em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>4.5.3 Binary Adding Operators</H1>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I3341"></A><A NAME="I3342"></A><A NAME="I3343"></A><A NAME="I3344"></A><A NAME="I3345"></A><A NAME="I3346"></A><A NAME="I3347"></A><A NAME="I3348"></A><A NAME="I3349"></A><A NAME="I3350"></A>The 
binary adding operators + (addition) and &ndash; (subtraction) are predefined 
for every specific numeric type <I>T</I> with their conventional meaning. 
They have the following specifications:&nbsp;</div>
<div class="paranum"><a name="p2">2</a></div>
<div class="Examples"><B>function</B>&nbsp;&quot;+&quot;(Left,&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;-&quot;(Left,&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN></div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I3351"></A><A NAME="I3352"></A><A NAME="I3353"></A><A NAME="I3354"></A><A NAME="I3355"></A><A NAME="I3356"></A><A NAME="I3357"></A>The 
concatenation operators &amp; are predefined for every nonlimited, one-dimensional 
array type <I>T</I> with component type <I>C</I>. They have the following 
specifications:&nbsp;</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Examples"><B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN></div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p5">5</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I3358"></A>For 
the evaluation of a concatenation with result type <I>T</I>, if both 
operands are of type <I>T</I>, the result of the concatenation is a one-dimensional 
array whose length is the sum of the lengths of its operands, and whose 
components comprise the components of the left operand followed by the 
components of the right operand. If the left operand is a null array, 
the result of the concatenation is the right operand. Otherwise, the 
lower bound of the result is determined as follows:&nbsp;</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Bulleted">If the ultimate ancestor of the array type was 
defined by a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0054">constrained_array_definition</A></SPAN>, 
then the lower bound of the result is that of the index subtype;&nbsp;</div>
<div class="paranum"><a name="p6.a">6.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This rule avoids Constraint_Error 
when using concatenation on an array type whose first subtype is constrained. 
</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Bulleted">If the ultimate ancestor of the array type was 
defined by an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0052">unconstrained_array_definition</A></SPAN>, 
then the lower bound of the result is that of the left operand.&nbsp;</div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Normal">[The upper bound is determined by the lower bound 
and the length.] <A NAME="I3359"></A><A NAME="I3360"></A>A check is made 
that the upper bound of the result of the concatenation belongs to the 
range of the index subtype, unless the result is a null array. <A NAME="I3361"></A>Constraint_Error 
is raised if this check fails.</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Normal">If either operand is of the component type <I>C</I>, 
the result of the concatenation is given by the above rules, using in 
place of such an operand an array having this operand as its only component 
(converted to the component subtype) and having the lower bound of the 
index subtype of the array type as its lower bound. <A NAME="I3362"></A></div>
<div class="paranum"><a name="p9.a">9.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The conversion might raise 
Constraint_Error. The conversion provides &ldquo;sliding&rdquo; for the 
component in the case of an array-of-arrays, consistent with the normal 
Ada 95 rules that allow sliding during parameter passing.&nbsp;</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Normal"><A NAME="I3363"></A>The result of a concatenation 
is defined in terms of an assignment to an anonymous object, as for any 
function call (see <A HREF="AA-6-5.html">6.5</A>).&nbsp;</div>
<div class="paranum"><a name="p10.a">10.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This implies that value 
adjustment is performed as appropriate &mdash; see <A HREF="AA-7-6.html">7.6</A>. 
We don't bother saying this for other predefined operators, even though 
they are all function calls, because this is the only one where it matters. 
It is the only one that can return a value having controlled parts.&nbsp;</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Notes">NOTE&nbsp;&nbsp;&nbsp;As for all predefined operators 
on modular types, the binary adding operators + and &ndash; on modular 
types include a final reduction modulo the modulus if the result is outside 
the base range of the type.&nbsp;</div>
<div class="paranum"><a name="p11.a">11.a</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>A full &quot;modulus&quot; 
operation need not be performed after addition or subtraction of modular 
types. For binary moduli, a simple mask is sufficient. For nonbinary 
moduli, a check after addition to see if the value is greater than the 
high bound of the base range can be followed by a conditional subtraction 
of the modulus. Conversely, a check after subtraction to see if a &quot;borrow&quot; 
was performed can be followed by a conditional addition of the modulus. 
</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p12">12</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of expressions 
involving binary adding operators:</I>&nbsp;</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Examples">Z&nbsp;+&nbsp;0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;Z&nbsp;has&nbsp;to&nbsp;be&nbsp;of&nbsp;a&nbsp;real&nbsp;type&nbsp;</I></SPAN></div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Examples">&quot;A&quot;&nbsp;&amp;&nbsp;&quot;BCD&quot;&nbsp;--<SPAN Class="roman"><I>&nbsp;concatenation&nbsp;of&nbsp;two&nbsp;string&nbsp;literals</I></SPAN><BR>
'A'&nbsp;&amp;&nbsp;&quot;BCD&quot;&nbsp;--<SPAN Class="roman"><I>&nbsp;concatenation&nbsp;of&nbsp;a&nbsp;character&nbsp;literal&nbsp;and&nbsp;a&nbsp;string&nbsp;literal</I></SPAN><BR>
'A'&nbsp;&amp;&nbsp;'A'&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;concatenation&nbsp;of&nbsp;two&nbsp;character&nbsp;literals&nbsp;</I></SPAN></div>

<H4 Class="centered">Inconsistencies With Ada 83</H4>
<div class="paranum"><a name="p14.a">14.a</a></div>
<div class="Annotations"><A NAME="I3364"></A>The lower bound of the result 
of concatenation, for a type whose first subtype is constrained, is now 
that of the index subtype. This is inconsistent with Ada 83, but generally 
only for Ada 83 programs that raise Constraint_Error. For example, the 
concatenation operator in&nbsp;</div>
<div class="paranum"><a name="p14.b">14.b</a></div>
<div class="SmallExamples">X&nbsp;:&nbsp;<B>array</B>(1..10)&nbsp;<B>of</B>&nbsp;Integer;<BR>
<B>begin</B><BR>
X&nbsp;:=&nbsp;X(6..10)&nbsp;&amp;&nbsp;X(1..5);</div>
<div class="paranum"><a name="p14.c">14.c</a></div>
<div class="Annotations">would raise Constraint_Error in Ada 83 (because 
the bounds of the result of the concatenation would be 6..15, which is 
outside of 1..10), but would succeed and swap the halves of X (as expected) 
in Ada 95.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum"><a name="p14.d">14.d</a></div>
<div class="Annotations"><A NAME="I3365"></A>Concatenation is now useful 
for array types whose first subtype is constrained. When the result type 
of a concatenation is such an array type, Constraint_Error is avoided 
by effectively first sliding the left operand (if nonnull) so that its 
lower bound is that of the index subtype.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
