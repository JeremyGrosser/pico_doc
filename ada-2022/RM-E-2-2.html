<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Remote Types Library Units</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-E-2-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-E-2-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>E.2.2 Remote Types Library Units</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">A remote types library unit supports the definition 
of types intended for use in communication between active partitions. 
</div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>Paragraphs 2 and 
3 were moved to <A HREF="RM-J.html">Annex J</A>, &ldquo;<A HREF="RM-J.html">Obsolescent 
Features</A>&rdquo;.</I></SPAN>&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I9115"></A>When 
the library unit aspect (see <A HREF="RM-13-1-1.html">13.1.1</A>) Remote_Types<A NAME="I9116"></A><A NAME="I9117"></A> 
of a library unit is True, the library unit is a <I>remote types library 
unit</I>. The following restrictions apply to such a library unit:</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Bulleted">it shall be preelaborable;</div>
<div class="paranum"><a name="p6">6/3</a></div>
<div class="Bulleted">it shall depend semantically only on declared pure 
<SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN>s, 
shared passive library units, other remote types library units, or preelaborated 
normal library units that are mentioned only in private with clauses;</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Bulleted">it shall not contain the declaration of any variable 
within the visible part of the library unit;&nbsp;</div>
<div class="paranum"><a name="p8">8/2</a></div>
<div class="Bulleted">the full view of each type declared in the visible 
part of the library unit that has any available stream attributes shall 
support external streaming (see <A HREF="RM-13-13-2.html">13.13.2</A>). 
</div>
<div class="paranum"><a name="p9">9/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I9118"></A>A 
named access type declared in the visible part of a remote types or remote 
call interface library unit is called a <I>remote access type</I>. <A NAME="I9119"></A><A NAME="I9120"></A>Such 
a type shall be:</div>
<div class="paranum"><a name="p9.1">9.1/1</a></div>
<div class="Bulleted">an access-to-subprogram type, or</div>
<div class="paranum"><a name="p9.2">9.2/3</a></div>
<div class="Bulleted">a general access type that designates a class-wide 
limited private type, a class-wide limited interface type, or a class-wide 
private extension all of whose ancestors are either private extensions, 
limited interface types, or limited private types.&nbsp;</div>
<div class="paranum"><a name="p9.3">9.3/1</a></div>
<div class="Normal">&nbsp;A type that is derived from a remote access type 
is also a remote access type.</div>
<div class="paranum"><a name="p9.4">9.4/5</a></div>
<div class="Normal">&nbsp;A remote access-to-subprogram type shall not be 
nonblocking (see <A HREF="RM-9-5.html">9.5</A>).</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The following restrictions 
apply to the use of a remote access-to-subprogram type:&nbsp;</div>
<div class="paranum"><a name="p11">11/2</a></div>
<div class="Bulleted">A value of a remote access-to-subprogram type shall 
be converted only to or from another (subtype-conformant) remote access-to-subprogram 
type;</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Bulleted">The <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
of an Access <SPAN Class="swiss"><A HREF="RM-4-1-4.html#S0100">attribute_reference</A></SPAN> 
that yields a value of a remote access-to-subprogram type shall statically 
denote a (subtype-conformant) remote subprogram.&nbsp;</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The following restrictions 
apply to the use of a remote access-to-class-wide type:&nbsp;</div>
<div class="paranum"><a name="p14">14/3</a></div>
<div class="Bulleted">The primitive subprograms of the corresponding 
specific type shall only have access parameters if they are controlling 
formal parameters. The primitive functions of the corresponding specific 
type shall only have an access result if it is a controlling access result. 
Each noncontrolling formal parameter and noncontrolling result type shall 
support external streaming (see <A HREF="RM-13-13-2.html">13.13.2</A>);</div>
<div class="paranum"><a name="p14.1">14.1/3</a></div>
<div class="Bulleted">The corresponding specific type shall not have 
a primitive procedure with the Synchronization aspect specified unless 
the <SPAN Class="swiss"><A HREF="RM-9-5.html#S0256">synchronization_kind</A></SPAN> 
is Optional (see <A HREF="RM-9-5.html">9.5</A>);</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Bulleted">A value of a remote access-to-class-wide type shall 
be explicitly converted only to another remote access-to-class-wide type;</div>
<div class="paranum"><a name="p16">16/4</a></div>
<div class="Bulleted">A value of a remote access-to-class-wide type shall 
be dereferenced (or implicitly converted to an anonymous access type) 
only as part of a dispatching call to a primitive operation of the designated 
type where the value designates a controlling operand of the call (see 
<A HREF="RM-E-4.html">E.4</A>, &ldquo;<A HREF="RM-E-4.html">Remote Subprogram 
Calls</A>&rdquo;);&nbsp;</div>
<div class="paranum"><a name="p16.1">16.1/3</a></div>
<div class="Bulleted">A controlling access result value for a primitive 
function with any controlling operands of the corresponding specific 
type shall either be explicitly converted to a remote access-to-class-wide 
type or be part of a dispatching call where the value designates a controlling 
operand of the call;</div>
<div class="paranum"><a name="p17">17/4</a></div>
<div class="Bulleted">The Storage_Pool attribute is not defined for a 
remote access-to-class-wide type; the expected type for an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0164">allocator</A></SPAN> 
shall not be a remote access-to-class-wide type. A remote access-to-class-wide 
type shall not be an actual parameter for a generic formal access type. 
The Storage_Size attribute of a remote access-to-class-wide type yields 
0. The Storage_Pool and Storage_Size aspects shall not be specified for 
a remote access-to-class-wide type.&nbsp;</div>

<H4 Class="centered">Erroneous Execution</H4>
<div class="paranum"><a name="p17.1">17.1/4</a></div>
<div class="Normal">&nbsp;&nbsp;Execution is erroneous if some operation (other 
than the initialization or finalization of the object) modifies the value 
of a constant object declared in the visible part of a remote types package.</div>
<div class="paranum"><a name="p18">18/5</a></div>
<div class="Notes">NOTE 1&nbsp;&nbsp;&nbsp;A remote types library unit 
is not necessarily pure, and the types it defines can include levels 
of indirection implemented by using access types. User-specified Read 
and Write attributes (see <A HREF="RM-13-13-2.html">13.13.2</A>) provide 
for sending values of such a type between active partitions, with Write 
marshalling the representation, and Read unmarshalling any levels of 
indirection.</div>
<div class="paranum"><a name="p19">19/3</a></div>
<div class="Notes">NOTE 2&nbsp;&nbsp;&nbsp;The value of a remote access-to-class-wide 
limited interface can designate an object of a nonlimited type derived 
from the interface.</div>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="Notes">NOTE 3&nbsp;&nbsp;&nbsp;A remote access type can designate 
a class-wide synchronized, protected, or task interface type.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-E-2-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-E-2-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
