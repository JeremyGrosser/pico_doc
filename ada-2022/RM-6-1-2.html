<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>The Global and Global'Class Aspects</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented2Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented2Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.8em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-6-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-6-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>6.1.2 The Global and Global'Class Aspects</H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal">The Global and Global'Class aspects of a program 
unit are used to identify the objects global to the unit that can be 
read or written during its execution.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Indented1"><SPAN Class="swiss">global_aspect_definition</SPAN><A NAME="I3799"></A><A NAME="S0209"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>null</B><BR>
&nbsp;&nbsp;|&nbsp;Unspecified<BR>
&nbsp;&nbsp;|&nbsp;<A NAME="I3800"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>&nbsp;<A NAME="I3801"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0214">global_designator</A></SPAN><BR>
&nbsp;&nbsp;|&nbsp;(<A NAME="I3802"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0210">global_aspect_element</A></SPAN>{;&nbsp;<A NAME="I3803"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0210">global_aspect_element</A></SPAN>})</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Indented1"><SPAN Class="swiss">global_aspect_element</SPAN><A NAME="I3804"></A><A NAME="S0210"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I3805"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>&nbsp;<A NAME="I3806"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0213">global_set</A></SPAN><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="I3807"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>&nbsp;<B>all</B><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="I3808"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>&nbsp;<B>synchronized</B></div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Indented1"><SPAN Class="swiss">global_mode</SPAN><A NAME="I3809"></A><A NAME="S0211"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I3810"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0212">basic_global_mode</A></SPAN><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="I3811"></A><SPAN Class="swiss"><A HREF="RM-H-7.html#S0361">extended_global_mode</A></SPAN></div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="Indented1"><SPAN Class="swiss">basic_global_mode</SPAN><A NAME="I3812"></A><A NAME="S0212"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><B>in</B>&nbsp;|&nbsp;<B>in&nbsp;out</B>&nbsp;|&nbsp;<B>out</B></div>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="Indented1"><SPAN Class="swiss">global_set</SPAN><A NAME="I3813"></A><A NAME="S0213"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I3814"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN>&nbsp;{,&nbsp;<A NAME="I3815"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN>}</div>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Indented1"><SPAN Class="swiss">global_designator</SPAN><A NAME="I3816"></A><A NAME="S0214"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><B>all</B>&nbsp;|&nbsp;<B>synchronized</B>&nbsp;|&nbsp;<A NAME="I3817"></A><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN></div>
<div class="paranum"><a name="p8">8/5</a></div>
<div class="Indented1"><SPAN Class="swiss">global_name</SPAN><A NAME="I3818"></A><A NAME="S0215"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><I>object_</I><A NAME="I3819"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>&nbsp;|&nbsp;<I>package_</I><A NAME="I3820"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN></div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p9">9/5</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN> 
shall resolve to statically name an object or a package (including a 
limited view of a package).&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p10">10/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">For a subprogram, an 
entry, an access-to-subprogram type, a task unit, a protected unit, or 
a library package or generic library package, the following language-defined 
aspect may be specified with an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN> 
(see <A HREF="RM-13-1-1.html">13.1.1</A>):</div>
<div class="paranum"><a name="p11">11/5</a></div>
<div class="WideHanging-Term">Global</div><div class="WideHanging-Body">
The Global aspect shall be specified with a <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0209">global_aspect_definition</A></SPAN>.<A NAME="I3821"></A><A NAME="I3822"></A></div>
<div class="paranum"><a name="p12">12/5</a></div>
<div class="WideHanging-Body">The Global aspect identifies the set of 
variables (which, for the purposes of this clause, includes all constants 
except those which are known to have no variable views (see <A HREF="RM-3-3.html">3.3</A>)) 
that are global to a callable entity or task body, and that are read 
or updated as part of the execution of the callable entity or task body. 
If specified for a protected unit, it refers to all of the protected 
operations of the protected unit. Constants of any type may also be mentioned 
in a Global aspect.</div>
<div class="paranum"><a name="p13">13/5</a></div>
<div class="WideHanging-Body">If not specified or otherwise defined below, 
the aspect defaults to the Global aspect for the enclosing library unit 
if the entity is declared at library level, and to Unspecified otherwise. 
If not specified for a library unit, the aspect defaults to <TT>Global 
=&gt; <B>null</B></TT> for a library unit that is declared Pure, and 
to <TT>Global =&gt; Unspecified</TT> otherwise.&nbsp;</div>
<div class="paranum"><a name="p14">14/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">For a dispatching subprogram, 
the following language-defined aspect may be specified with an <SPAN Class="swiss"><A HREF="RM-13-1-1.html#S0346">aspect_specification</A></SPAN> 
(see <A HREF="RM-13-1-1.html">13.1.1</A>):</div>
<div class="paranum"><a name="p15">15/5</a></div>
<div class="WideHanging-Term">Global'Class</div><div class="WideHanging-Body">
The Global'Class aspect shall be specified with a <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0209">global_aspect_definition</A></SPAN>. 
This aspect identifies an upper bound on the set of variables global 
to a dispatching operation that can be read or updated as a result of 
a dispatching call on the operation. If not specified, the aspect defaults 
to the Global aspect for the dispatching subprogram.<A NAME="I3823"></A><A NAME="I3824"></A></div>
<div class="paranum"><a name="p16">16/5</a></div>
<div class="Normal">Together, we refer to the Global and Global'Class 
aspects as <I>global</I> aspects.<A NAME="I3825"></A></div>
<div class="paranum"><a name="p17">17/5</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0209">global_aspect_definition</A></SPAN> 
defines the Global or Global'Class aspect of some entity. The Global 
aspect identifies the sets of global variables that can be read, written, 
or modified as a side effect of executing the operation(s) associated 
with the entity. The Global'Class aspect associated with a dispatching 
operation of type <I>T</I> represents a restriction on the Global aspect 
on a corresponding operation of any descendant of type <I>T</I>.</div>
<div class="paranum"><a name="p18">18/5</a></div>
<div class="Normal">The Global aspect for a callable entity defines the 
global variables that can be referenced as part of a call on the entity, 
including any assertion expressions that apply to the call (even if not 
enabled), such as preconditions, postconditions, predicates, and type 
invariants.</div>
<div class="paranum"><a name="p19">19/5</a></div>
<div class="Normal">The Global aspect for an access-to-subprogram object 
(or subtype) identifies the global variables that can be referenced when 
calling via the object (or any object of that subtype) including assertion 
expressions that apply.</div>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="Normal">For a predefined operator of an elementary type, 
the function representing an enumeration literal, or any other static 
function (see <A HREF="RM-4-9.html">4.9</A>), the Global aspect is <B>null</B>. 
For a predefined operator of a composite type, the Global aspect of the 
operator defaults to that of the enclosing library unit (unless a Global 
aspect is specified for the type &mdash; see <A HREF="RM-H-7.html">H.7</A>).</div>
<div class="paranum"><a name="p21">21/5</a></div>
<div class="Normal">The following is defined in terms of operations that 
are performed by or on behalf of an entity. The rules on operations apply 
to the entity(s) associated with those operations.</div>
<div class="paranum"><a name="p22">22/5</a></div>
<div class="Normal">The global variables associated with any <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN> 
can be read as a side effect of an operation. The <B>in out</B> and <B>out</B> 
<SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>s 
together identify the set of global variables that can be updated as 
a side effect of an operation. Creating an access-to-variable value that 
designates an object is considered an update of the designated object, 
and creating an access-to-constant value that designates an object is 
considered a read of the designated object.</div>
<div class="paranum"><a name="p23">23/5</a></div>
<div class="Normal">The overall set of objects associated with each <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN> 
includes all objects identified for the mode in the <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0209">global_aspect_definition</A></SPAN>.</div>
<div class="paranum"><a name="p24">24/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">A <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0213">global_set</A></SPAN> 
identifies a <I>global variable set</I> as follows:<A NAME="I3826"></A></div>
<div class="paranum"><a name="p25">25/5</a></div>
<div class="Bulleted"><B>all</B> identifies the set of all global variables;</div>
<div class="paranum"><a name="p26">26/5</a></div>
<div class="Bulleted"><B>synchronized</B> identifies the set of all synchronized 
variables (see <A HREF="RM-9-10.html">9.10</A>), as well as variables 
of a composite type all of whose non-discriminant subcomponents are synchronized;</div>
<div class="paranum"><a name="p27">27/5</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN>{, 
<SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN>} 
identifies the union of the sets of variables identified by the <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN>s 
in the list, for the following forms of <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN>:</div>
<div class="paranum"><a name="p28">28/5</a></div>
<div class="Indented2Bulleted"><I>object_</I><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
identifies the specified global variable (or constant);</div>
<div class="paranum"><a name="p29">29/5</a></div>
<div class="Indented2Bulleted"><I>package_</I><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
identifies the set of all variables declared in the private part or body 
of the package, or anywhere within a private descendant of the package. 
</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p30">30/5</a></div>
<div class="Normal">Within a <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0209">global_aspect_definition</A></SPAN>, 
a given <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN> 
shall be specified at most once. Similarly, within a <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0209">global_aspect_definition</A></SPAN>, 
a given entity shall be named at most once by a <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0215">global_name</A></SPAN>.</div>
<div class="paranum"><a name="p31">31/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">If an entity (other 
than a library package or generic library package) has a Global aspect 
other than Unspecified or <B>in out all</B>, then the associated operation(s) 
shall read only those variables global to the entity that are within 
the global variable set associated with the <B>in</B>, <B>in out</B>, 
or <B>out</B> <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>s, 
and the operation(s) shall update only those variables global to the 
entity that are within the global variable set associated with either 
the <B>in out</B> or <B>out</B> <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>s. 
In the absence of the No_Hidden_Indirect_Globals restriction (see <A HREF="RM-H-4.html">H.4</A>), 
this ignores objects reached via a dereference of an access value. The 
above rule includes any possible Global effects of calls occurring during 
the execution of the operation, except for the following excluded calls:</div>
<div class="paranum"><a name="p32">32/5</a></div>
<div class="Bulleted">calls to formal subprograms;</div>
<div class="paranum"><a name="p33">33/5</a></div>
<div class="Bulleted">calls associated with operations on formal subtypes;</div>
<div class="paranum"><a name="p34">34/5</a></div>
<div class="Bulleted">calls through formal objects of an access-to-subprogram 
type;</div>
<div class="paranum"><a name="p35">35/5</a></div>
<div class="Bulleted">calls through access-to-subprogram parameters;</div>
<div class="paranum"><a name="p36">36/5</a></div>
<div class="Bulleted">calls on operations with Global aspect Unspecified.</div>
<div class="paranum"><a name="p37">37/5</a></div>
<div class="Normal">The possible Global effects of these excluded calls 
(other than those that are Unspecified) are taken into account by the 
caller of the original operation, by presuming they occur at least once 
during its execution. For calls that are not excluded, the possible Global 
effects of the call are those permitted by the Global aspect of the associated 
entity, or by its Global'Class aspect if a dispatching call.</div>
<div class="paranum"><a name="p38">38/5</a></div>
<div class="Normal">If a Global aspect other than Unspecified or <B>in 
out all</B> applies to an access-to-subprogram type, then the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
of an Access <SPAN Class="swiss"><A HREF="RM-4-1-4.html#S0100">attribute_reference</A></SPAN> 
producing a value of such a type shall denote a subprogram whose Global 
aspect is not Unspecified and is <I>covered</I><A NAME="I3827"></A> by 
that of the result type, where a global aspect <I>G1</I> is <I>covered</I> 
by a global aspect <I>G2</I> if the set of variables that <I>G1</I> identifies 
as readable or updatable is a subset of the corresponding set for <I>G2</I>. 
Similarly on a conversion to such a type, the operand shall be of a named 
access-to-subprogram type whose Global aspect is covered by that of the 
target type.</div>
<div class="paranum"><a name="p39">39/5</a></div>
<div class="Normal">If an implementation-defined <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN> 
applies to a given set of variables, an implementation-defined rule determines 
what sort of references to them are permitted.</div>
<div class="paranum"><a name="p40">40/5</a></div>
<div class="Normal">For a subprogram that is a dispatching operation 
of a tagged type <I>T</I>, each mode of its Global aspect shall identify 
a subset of the variables identified by the corresponding mode, or by 
the <B>in out</B> mode, of the Global'Class aspect of a corresponding 
dispatching subprogram of any ancestor of <I>T</I>, unless the aspect 
of that ancestor is Unspecified.</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p41">41/5</a></div>
<div class="Normal">An implementation can allow some references to a 
constant object which are not accounted for by the Global or Global'Class 
aspect when it is considered a variable in the above rules, if the implementation 
can determine that the object is in fact immutable.</div>
<div class="paranum"><a name="p42">42/5</a></div>
<div class="Normal">Implementations may perform additional checks on 
calls to operations with an Unspecified Global aspect to ensure that 
they do not violate any limitations associated with the point of call.</div>
<div class="paranum"><a name="p43">43/5</a></div>
<div class="Normal">Implementations may extend the syntax or semantics 
of the Global aspect in an implementation-defined manner; for example, 
supporting additional <SPAN Class="swiss"><A HREF="RM-6-1-2.html#S0211">global_mode</A></SPAN>s.</div>
<div class="paranum"><a name="p44">44/5</a></div>
<div class="Notes">NOTE&nbsp;&nbsp;&nbsp;For an example of the use of 
these aspects, see the Vector container definition in <A HREF="RM-A-18-2.html">A.18.2</A>. 
</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-6-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-6-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
