<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>File Management</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented2 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.8em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-8-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-8-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>A.8.2 File Management</H1>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0449-1.TXT">AI12-0449-1</A></I>} 
The procedures and functions described in this subclause provide for 
the control of external files; their declarations are repeated in each 
of the packages for sequential, direct, text, and stream input-output. 
For text input-output, the procedures Create, Open, and Reset have additional 
effects described in <span class="delete5">subclause&nbsp;</span><A HREF="AA-A-10-2.html">A.10.2</A>. 
</div>
<div class="paranum"><a name="p2">2</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Create(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mode&nbsp;:&nbsp;<B>in</B>&nbsp;File_Mode&nbsp;:=&nbsp;<SPAN Class="roman"><I>default_mode</I></SPAN>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;:&nbsp;<B>in</B>&nbsp;String&nbsp;:=&nbsp;&quot;&quot;;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Form&nbsp;:&nbsp;<B>in</B>&nbsp;String&nbsp;:=&nbsp;&quot;&quot;);</div>
<div class="paranum"><a name="p3">3/2</a></div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00283.TXT">AI95-00283-01</A></I>} 
Establishes a new external file, with the given name and form, and associates 
this external file with the given file. The given file is left open. 
The current mode of the given file is set to the given access mode. The 
default access mode is the mode Out_File for sequential, stream, and 
text input-output; it is the mode Inout_File for direct input-output. 
For direct access, the size of the created file is implementation defined.</div>
<div class="paranum"><a name="p3.a">3.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
<span class="insert4">For a direct file, the initial value of current 
index is 1 (see <A HREF="AA-A-8.html">A.8</A>).</span>&nbsp;</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Indented2">A null string for Name specifies an external file 
that is not accessible after the completion of the main program (a temporary 
file). A null string for Form specifies the use of the default options 
of the implementation for the external file.</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the given file is already open. The exception Name_Error 
is propagated if the string given as Name does not allow the identification 
of an external file. The exception Use_Error is propagated if, for the 
specified mode, the external environment does not support creation of 
an external file with the given name (in the absence of Name_Error) and 
form.</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Open(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mode&nbsp;:&nbsp;<B>in</B>&nbsp;File_Mode;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;:&nbsp;<B>in</B>&nbsp;String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Form&nbsp;:&nbsp;<B>in</B>&nbsp;String&nbsp;:=&nbsp;&quot;&quot;);</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Indented2">Associates the given file with an existing external 
file having the given name and form, and sets the current mode of the 
given file to the given mode. The given file is left open.</div>
<div class="paranum"><a name="p7.a">7.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
<span class="insert4">For a direct file, the initial value of current 
index is 1 (see <A HREF="AA-A-8.html">A.8</A>).</span>&nbsp;</div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the given file is already open. The exception Name_Error 
is propagated if the string given as Name does not allow the identification 
of an external file; in particular, this exception is propagated if no 
external file with the given name exists. The exception Use_Error is 
propagated if, for the specified mode, the external environment does 
not support opening for an external file with the given name (in the 
absence of Name_Error) and form.</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Close(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type);</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Indented2">Severs the association between the given file 
and its associated external file. The given file is left closed. In addition, 
for sequential files, if the file being closed has mode Out_File or Append_File, 
then the last element written since the most recent open or reset is 
the last element that can be read from the file. If no elements have 
been written and the file mode is Out_File, then the closed file is empty. 
If no elements have been written and the file mode is Append_File, then 
the closed file is unchanged.</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the given file is not open.</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Delete(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type);</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Indented2">Deletes the external file associated with the 
given file. The given file is closed, and the external file ceases to 
exist.</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the given file is not open. The exception Use_Error 
is propagated if deletion of the external file is not supported by the 
external environment.</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Examples"><B>procedure</B>&nbsp;Reset(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type;&nbsp;Mode&nbsp;:&nbsp;<B>in</B>&nbsp;File_Mode);<BR>
<B>procedure</B>&nbsp;Reset(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type);</div>
<div class="paranum"><a name="p16">16/2</a></div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00085.TXT">AI95-00085-01</A></I>} 
Resets the given file so that reading from its elements can be restarted 
from the beginning of the external file (for modes In_File and Inout_File), 
and so that writing to its elements can be restarted at the beginning 
of the external file (for modes Out_File and Inout_File) or after the 
last element of the external file (for mode Append_File). In particular, 
for direct access this means that the current index is set to one. If 
a Mode parameter is supplied, the current mode of the given file is set 
to the given mode. In addition, for sequential files, if the given file 
has mode Out_File or Append_File when Reset is called, the last element 
written since the most recent open or reset is the last element that 
can be read from the external file. If no elements have been written 
and the file mode is Out_File, the reset file is empty. If no elements 
have been written and the file mode is Append_File, then the reset file 
is unchanged.</div>
<div class="paranum"><a name="p17">17</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the file is not open. The exception Use_Error is propagated 
if the external environment does not support resetting for the external 
file and, also, if the external environment does not support resetting 
to the specified mode for the external file.</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Examples"><B>function</B>&nbsp;Mode(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;File_Mode;</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="Indented2">Returns the current mode of the given file.</div>
<div class="paranum"><a name="p20">20</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the file is not open.</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Examples"><B>function</B>&nbsp;Name(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;String;</div>
<div class="paranum"><a name="p22">22/2</a></div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00248.TXT">AI95-00248-01</A></I>} 
Returns a string which uniquely identifies the external file currently 
associated with the given file (and may thus be used in an Open operation).</div>
<div class="paranum"><a name="p22.a">22.a/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00248.TXT">AI95-00248-01</A></I>} 
Retrieving the full path can be accomplished by passing the result of 
Name to Directories.Full_Name (see <A HREF="AA-A-16.html">A.16</A>). 
It is important to drop the requirement on Name, as the only way to accomplish 
this requirement given that the current directory can be changed with 
package Directories is to store the full path when the file is opened. 
That's expensive, and it's better for users that need the full path to 
explicitly request it.&nbsp;</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the given file is not open. The exception Use_Error 
is propagated if the associated external file is a temporary file that 
cannot be opened by any name.</div>
<div class="paranum"><a name="p24">24</a></div>
<div class="Examples"><B>function</B>&nbsp;Form(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;String;</div>
<div class="paranum"><a name="p25">25</a></div>
<div class="Indented2">Returns the form string for the external file 
currently associated with the given file. If an external environment 
allows alternative specifications of the form (for example, abbreviations 
using default options), the string returned by the function should correspond 
to a full specification (that is, it should indicate explicitly all options 
selected, including default options).</div>
<div class="paranum"><a name="p26">26</a></div>
<div class="Indented2" style="margin-bottom: 0.9em">The exception Status_Error 
is propagated if the given file is not open.</div>
<div class="paranum"><a name="p27">27</a></div>
<div class="Examples"><B>function</B>&nbsp;Is_Open(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum"><a name="p28">28/3</a></div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
Returns True if the file is open (that is, if it is associated with an 
external file); otherwise, returns False.</div>
<div class="paranum"><a name="p28.1">28.1/4</a></div>
<div class="Examples" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0130-1.TXT">AI12-0130-1</A></I>} 
<span class="insert4"><B>procedure</B>&nbsp;Flush(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type);</span></div>
<div class="paranum"><a name="p28.2">28.2/4</a></div>
<div class="Indented2"><span class="insert4">The Flush procedure synchronizes 
the external file with the internal file (by flushing any internal buffers) 
without closing the file. For a direct file, the current index is unchanged; 
for a stream file (see <A HREF="AA-A-12-1.html">A.12.1</A>), the current 
position is unchanged.</span></div>
<div class="paranum"><a name="p28.3">28.3/4</a></div>
<div class="Indented2" style="margin-bottom: 0.9em"><span class="insert4">The 
exception Status_Error is propagated if the file is not open. The exception 
Mode_Error is propagated if the mode of the file is In_File.</span></div>
<div class="paranum"><a name="p28.4">28.4/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0021-1.TXT">AI12-0021-1</A></I>} 
<span class="insert5">The nested package Wide_File_Names provides operations 
equivalent to the operations of the same name of the outer package except 
that Wide_String is used instead of String for the name and form of the 
external file.</span></div>
<div class="paranum"><a name="p28.a">28.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation Note: 
</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0021-1.TXT">AI12-0021-1</A></I>} 
<span class="insert5">The expectation is that if one opens a file with 
this subpackage and then requests the name with Name from this subpackage, 
the result will include the same Wide_Characters that were used to open 
the file (rather than some encoded form). Since file names are completely 
implementation-defined, we cannot say this normatively. We have no expectations 
when retrieving the name of a file opened with this package using the 
String Name. Similar considerations apply to the nested package Wide_Wide_File_Names 
(see below).</span>&nbsp;</div>
<div class="paranum"><a name="p28.5">28.5/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0021-1.TXT">AI12-0021-1</A></I>} 
<span class="insert5">The nested package Wide_Wide_File_Names provides 
operations equivalent to the operations of the same name of the outer 
package except that Wide_Wide_String is used instead of String for the 
name and form of the external file.</span></div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p29">29</a></div>
<div class="Normal">An implementation may propagate Name_Error or Use_Error 
if an attempt is made to use an I/O feature that cannot be supported 
by the implementation due to limitations in the external environment. 
Any such restriction should be documented.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p29.a">29.a/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00085.TXT">AI95-00085-01</A></I>} 
Clarified that Reset affects and depends on the external file.</div>
<div class="paranum"><a name="p29.b">29.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00248.TXT">AI95-00248-01</A></I>} 
Removed the requirement for Name to return a full path; this is now accomplished 
by Directories.Full_Name(Name(File)) (see <A HREF="AA-A-16.html">A.16</A>). 
This is not documented as an inconsistency, because there is no requirement 
for implementations to change &mdash; the Ada 95 behavior is still allowed, 
it just is no longer required.</div>
<div class="paranum"><a name="p29.c">29.c/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00283.TXT">AI95-00283-01</A></I>} 
Added text to specify the default mode for a stream file.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p29.d">29.d/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0130-1.TXT">AI12-0130-1</A></I>} 
<span class="insert4">Procedure Flush is now defined here, so it can 
be used for all of the I/O packages.</span></div>
<div class="paranum"><a name="p29.e">29.e/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0021-1.TXT">AI12-0021-1</A></I>} 
<span class="insert5">The nested Wide_File_Names and Wide_Wide_File_Names 
packages are now described here.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-8-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-8-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
