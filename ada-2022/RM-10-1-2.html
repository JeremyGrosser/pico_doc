<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Context Clauses - With Clauses</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B> (Ada 2022 Draft 35)</SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>10.1.2 Context Clauses - With Clauses</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0292">context_clause</A></SPAN> 
is used to specify the <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN>s 
whose names are needed within a compilation unit.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2</a></div>
<div class="Indented1"><SPAN Class="swiss">context_clause</SPAN><A NAME="I4901"></A><A NAME="S0292"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN>{<A NAME="I4902"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0293">context_item</A></SPAN>}</div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Indented1"><SPAN Class="swiss">context_item</SPAN><A NAME="I4903"></A><A NAME="S0293"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4904"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN>&nbsp;|&nbsp;<A NAME="I4905"></A><SPAN Class="swiss"><A HREF="RM-8-4.html#S0235">use_clause</A></SPAN></div>
<div class="paranum"><a name="p4">4/2</a></div>
<div class="Indented1"><SPAN Class="swiss">with_clause</SPAN><A NAME="I4906"></A><A NAME="S0294"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4907"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0295">limited_with_clause</A></SPAN>&nbsp;|&nbsp;<A NAME="I4908"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0296">nonlimited_with_clause</A></SPAN></div>
<div class="paranum"><a name="p4.1">4.1/2</a></div>
<div class="Indented1"><SPAN Class="swiss">limited_with_clause</SPAN><A NAME="I4909"></A><A NAME="S0295"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><B>limited</B>&nbsp;[<B>private</B>]&nbsp;<B>with</B>&nbsp;<I>library_unit_</I><A NAME="I4910"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>&nbsp;{,&nbsp;<I>library_unit_</I><A NAME="I4911"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>};</div>
<div class="paranum"><a name="p4.2">4.2/2</a></div>
<div class="Indented1"><SPAN Class="swiss">nonlimited_with_clause</SPAN><A NAME="I4912"></A><A NAME="S0296"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN>[<B>private</B>]&nbsp;<B>with</B>&nbsp;<I>library_unit_</I><A NAME="I4913"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>&nbsp;{,&nbsp;<I>library_unit_</I><A NAME="I4914"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>};</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p5">5</a></div>
<div class="Normal"><A NAME="I4915"></A>The <I>scope</I> of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
that appears on a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0288">library_unit_declaration</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0289">library_unit_renaming_declaration</A></SPAN> 
consists of the entire declarative region of the declaration, which includes 
all children and subunits. The scope of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
that appears on a body consists of the body, which includes all subunits. 
</div>
<div class="paranum"><a name="p6">6/2</a></div>
<div class="Normal"><A NAME="I4916"></A><A NAME="I4917"></A>A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
(and the corresponding library unit) is <I>named</I> <A NAME="I4918"></A><A NAME="I4919"></A>in 
a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
if it is denoted by a <I>library_unit_</I><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN>. 
A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
(and the corresponding library unit) is <I>mentioned</I> in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
if it is named in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
or if it is denoted by a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN>.</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Normal">Outside its own declarative region, the declaration 
or renaming of a library unit can be visible only within the scope of 
a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
that mentions it. The visibility of the declaration or renaming of a 
library unit otherwise follows from its placement in the environment. 
</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p8">8/2</a></div>
<div class="Normal">If a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
of a given <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0286">compilation_unit</A></SPAN> 
mentions a private child of some library unit, then the given <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0286">compilation_unit</A></SPAN> 
shall be one of:&nbsp;</div>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="Bulleted">the declaration, body, or subunit of a private 
descendant of that library unit;</div>
<div class="paranum"><a name="p10">10/2</a></div>
<div class="Bulleted">the body or subunit of a public descendant of that 
library unit, but not a subprogram body acting as a subprogram declaration 
(see <A HREF="RM-10-1-4.html">10.1.4</A>); or</div>
<div class="paranum"><a name="p11">11/2</a></div>
<div class="Bulleted">the declaration of a public descendant of that 
library unit, in which case the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
shall include the reserved word <B>private</B>.&nbsp;</div>
<div class="paranum"><a name="p12">12/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">A <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
denoting a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
(or the corresponding declaration for a child of a generic within an 
instance &mdash; see <A HREF="RM-10-1-1.html">10.1.1</A>), if it is visible 
only due to being mentioned in one or more <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN>s 
of a unit <I>U</I> that include the reserved word <B>private</B>, shall 
appear only within:&nbsp;</div>
<div class="paranum"><a name="p13">13/2</a></div>
<div class="Bulleted">a private part;</div>
<div class="paranum"><a name="p14">14/5</a></div>
<div class="Bulleted">a body of a public descendant of <I>U</I>, but 
not within the <SPAN Class="swiss"><A HREF="RM-6-1.html#S0196">subprogram_specification</A></SPAN> 
of a body of a subprogram that is a public descendant of <I>U</I>;</div>
<div class="paranum"><a name="p15">15/5</a></div>
<div class="Bulleted">a private descendant of <I>U</I> or its body; or</div>
<div class="paranum"><a name="p16">16/2</a></div>
<div class="Bulleted">a pragma within a context clause.&nbsp;</div>
<div class="paranum"><a name="p17">17/2</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0295">limited_with_clause</A></SPAN> 
shall be the implicit declaration of the limited view of a library package, 
not the declaration of a subprogram, generic unit, generic instance, 
or a renaming.</div>
<div class="paranum"><a name="p18">18/2</a></div>
<div class="Normal">A <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0295">limited_with_clause</A></SPAN> 
shall not appear on a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0290">library_unit_body</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-10-1-3.html#S0302">subunit</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0289">library_unit_renaming_declaration</A></SPAN>.</div>
<div class="paranum"><a name="p19">19/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">A <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0295">limited_with_clause</A></SPAN> 
that names a library package shall not appear:</div>
<div class="paranum"><a name="p20">20/3</a></div>
<div class="Bulleted">in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0292">context_clause</A></SPAN> 
for the explicit declaration of the named library package or any of its 
descendants;</div>
<div class="paranum"><a name="p21">21/3</a></div>
<div class="Bulleted">within a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0292">context_clause</A></SPAN> 
for a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
that is within the scope of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0296">nonlimited_with_clause</A></SPAN> 
that mentions the same library package; or</div>
<div class="paranum"><a name="p22">22/3</a></div>
<div class="Bulleted">within a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0292">context_clause</A></SPAN> 
for a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
that is within the scope of a <SPAN Class="swiss"><A HREF="RM-8-4.html#S0235">use_clause</A></SPAN> 
that names an entity declared within the declarative region of the library 
package.</div>
<div class="paranum"><a name="p23">23/2</a></div>
<div class="Notes">NOTE&nbsp;&nbsp;&nbsp;A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0296">nonlimited_with_clause</A></SPAN> 
of a compilation unit is visible within the compilation unit and hence 
acts just like an ordinary declaration. Thus, within a compilation unit 
that mentions its declaration, the name of a library package can be given 
in <SPAN Class="swiss"><A HREF="RM-8-4.html#S0235">use_clause</A></SPAN>s 
and can be used to form expanded names, a library subprogram can be called, 
and instances of a generic library unit can be declared. If a child of 
a parent generic package is mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0296">nonlimited_with_clause</A></SPAN>, 
then the corresponding declaration nested within each visible instance 
is visible within the compilation unit. Similarly, a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0287">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0295">limited_with_clause</A></SPAN> 
of a compilation unit is visible within the compilation unit and thus 
can be used to form expanded names.</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p24">24/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of use 
of with clauses, limited with clauses, and private with clauses:</I> 
</div>
<div class="paranum"><a name="p25">25/2</a></div>
<div class="Examples"><B>package</B>&nbsp;Office&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;Office;</div>
<div class="paranum"><a name="p26">26/2</a></div>
<div class="Examples"><B>with</B>&nbsp;Ada.Strings.Unbounded;<BR>
<B>package</B>&nbsp;Office.Locations&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Location&nbsp;<B>is&nbsp;new</B>&nbsp;Ada.Strings.Unbounded.Unbounded_String;<BR>
<B>end</B>&nbsp;Office.Locations;</div>
<div class="paranum"><a name="p27">27/2</a></div>
<div class="Examples"><B>limited&nbsp;with</B>&nbsp;Office.Departments;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;types&nbsp;are&nbsp;incomplete</I></SPAN><BR>
<B>private&nbsp;with</B>&nbsp;Office.Locations;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;only&nbsp;visible&nbsp;in&nbsp;private&nbsp;part</I></SPAN><BR>
<B>package</B>&nbsp;Office.Employees&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Employee&nbsp;<B>is&nbsp;private</B>;</div>
<div class="paranum"><a name="p28">28/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Dept_Of(Emp&nbsp;:&nbsp;Employee)&nbsp;<B>return&nbsp;access</B>&nbsp;Departments.Department;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assign_Dept(Emp&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Employee;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;:&nbsp;<B>access</B>&nbsp;Departments.Department);</div>
<div class="paranum"><a name="p29">29/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;...<BR>
<B>private<BR>
&nbsp;&nbsp;&nbsp;type</B>&nbsp;Employee&nbsp;<B>is<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;:&nbsp;<B>access</B>&nbsp;Departments.Department;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loc&nbsp;:&nbsp;Locations.Location;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;<BR>
<B>end</B>&nbsp;Office.Employees;</div>
<div class="paranum"><a name="p30">30/5</a></div>
<div class="Examples"><B>limited&nbsp;with</B>&nbsp;Office.Employees;<BR>
<B>package</B>&nbsp;Office.Departments&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Department&nbsp;<B>is</B>&nbsp;...;</div>
<div class="paranum"><a name="p31">31/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Manager_Of(Dept&nbsp;:&nbsp;Department)&nbsp;<B>return&nbsp;access</B>&nbsp;Employees.Employee;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assign_Manager(Dept&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Department;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mgr&nbsp;&nbsp;:&nbsp;<B>access</B>&nbsp;Employees.Employee);<BR>
&nbsp;&nbsp;&nbsp;...<BR>
<B>end</B>&nbsp;Office.Departments;</div>
<div class="paranum"><a name="p32">32/5</a></div>
<div class="Normal"><I>The</I> <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0295">limited_with_clause</A></SPAN> 
<I>can be used to support mutually dependent abstractions that are split 
across multiple packages. In this case, an employee is assigned to a 
department, and a department has a manager who is an employee. If a</I> 
<SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0294">with_clause</A></SPAN> 
<I>with the reserved word <B>private</B> appears on one library unit 
and mentions a second library unit, it provides visibility to the second 
library unit, but restricts that visibility to the private part and body 
of the first unit. The compiler checks that no use is made of the second 
unit in the visible part of the first unit.</I>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
